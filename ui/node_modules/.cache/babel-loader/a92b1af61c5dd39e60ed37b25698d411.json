{"ast":null,"code":"import _objectSpread from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/anu-ujin/Works/open-source/erxes/ui/src/modules/settings/emailTemplates/components/List.tsx\";\nimport HeaderDescription from 'modules/common/components/HeaderDescription';\nimport Icon from 'erxes-common-ui/lib/components/icon';\nimport ModalTrigger from 'modules/common/components/ModalTrigger';\nimport { __ } from 'modules/common/utils';\nimport React from 'react';\nimport List from '../../common/components/List';\nimport { Actions, IframePreview, Template, TemplateBox, Templates } from '../styles';\nimport Form from './Form';\n\nvar EmailTemplateList =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(EmailTemplateList, _React$Component);\n\n  function EmailTemplateList() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, EmailTemplateList);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(EmailTemplateList)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.renderForm = function (props) {\n      return React.createElement(Form, Object.assign({}, props, {\n        renderButton: _this.props.renderButton,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 24\n        },\n        __self: this\n      }));\n    };\n\n    _this.removeTemplate = function (object) {\n      _this.props.remove(object._id);\n    };\n\n    _this.renderEditAction = function (object) {\n      var save = _this.props.save;\n\n      var content = function content(props) {\n        return _this.renderForm(_objectSpread({}, props, {\n          object: object,\n          save: save\n        }));\n      };\n\n      return React.createElement(ModalTrigger, {\n        enforceFocus: false,\n        title: \"Edit\",\n        size: \"lg\",\n        trigger: React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 44\n          },\n          __self: this\n        }, React.createElement(Icon, {\n          icon: \"edit\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 45\n          },\n          __self: this\n        }), \" Edit\"),\n        content: content,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 39\n        },\n        __self: this\n      });\n    };\n\n    _this.renderContent = function (props) {\n      return React.createElement(Templates, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, _this.renderRow(props));\n    };\n\n    return _this;\n  }\n\n  _createClass(EmailTemplateList, [{\n    key: \"renderRow\",\n    value: function renderRow(_ref) {\n      var _this2 = this;\n\n      var objects = _ref.objects;\n      return objects.map(function (object, index) {\n        return React.createElement(Template, {\n          key: index,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 55\n          },\n          __self: this\n        }, React.createElement(TemplateBox, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 56\n          },\n          __self: this\n        }, React.createElement(Actions, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 57\n          },\n          __self: this\n        }, _this2.renderEditAction(object), React.createElement(\"div\", {\n          onClick: _this2.removeTemplate.bind(_this2, object),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 59\n          },\n          __self: this\n        }, React.createElement(Icon, {\n          icon: \"cancel-1\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60\n          },\n          __self: this\n        }), \" Delete\")), React.createElement(IframePreview, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63\n          },\n          __self: this\n        }, React.createElement(\"iframe\", {\n          title: \"content-iframe\",\n          srcDoc: object.content,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 64\n          },\n          __self: this\n        }))), React.createElement(\"h5\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 67\n          },\n          __self: this\n        }, object.name));\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(List, Object.assign({\n        formTitle: \"New email template\",\n        size: \"lg\",\n        breadcrumb: [{\n          title: __('Settings'),\n          link: '/settings'\n        }, {\n          title: __('Email templates')\n        }],\n        title: __('Email templates'),\n        leftActionBar: React.createElement(HeaderDescription, {\n          icon: \"/images/actions/22.svg\",\n          title: \"Email templates\",\n          description: \"It's all about thinking ahead for your customers. Team members will be able to choose from email templates and send out one message to multiple recipients. You can use the email templates to send out a Mass email for leads/customers or you can send to other team members.\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87\n          },\n          __self: this\n        }),\n        renderForm: this.renderForm,\n        renderContent: this.renderContent\n      }, this.props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return EmailTemplateList;\n}(React.Component);\n\nexport default EmailTemplateList;","map":{"version":3,"sources":["/home/anu-ujin/Works/open-source/erxes/ui/src/modules/settings/emailTemplates/components/List.tsx"],"names":["HeaderDescription","Icon","ModalTrigger","__","React","List","Actions","IframePreview","Template","TemplateBox","Templates","Form","EmailTemplateList","renderForm","props","renderButton","removeTemplate","object","remove","_id","renderEditAction","save","content","renderContent","renderRow","objects","map","index","bind","name","title","link","Component"],"mappings":";;;;;;;AAAA,OAAOA,iBAAP,MAA8B,6CAA9B;AACA,OAAOC,IAAP,MAAiB,qCAAjB;AACA,OAAOC,YAAP,MAAyB,wCAAzB;AAEA,SAASC,EAAT,QAAmB,sBAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,IAAP,MAAiB,8BAAjB;AAEA,SACEC,OADF,EAEEC,aAFF,EAGEC,QAHF,EAIEC,WAJF,EAKEC,SALF,QAMO,WANP;AAOA,OAAOC,IAAP,MAAiB,QAAjB;;IAMMC,iB;;;;;;;;;;;;;;;;;;UACJC,U,GAAa,UAAAC,KAAK,EAAI;AACpB,aAAO,oBAAC,IAAD,oBAAUA,KAAV;AAAiB,QAAA,YAAY,EAAE,MAAKA,KAAL,CAAWC,YAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAP;AACD,K;;UAEDC,c,GAAiB,UAAAC,MAAM,EAAI;AACzB,YAAKH,KAAL,CAAWI,MAAX,CAAkBD,MAAM,CAACE,GAAzB;AACD,K;;UAEDC,gB,GAAmB,UAAAH,MAAM,EAAI;AAAA,UACnBI,IADmB,GACV,MAAKP,KADK,CACnBO,IADmB;;AAG3B,UAAMC,OAAO,GAAG,SAAVA,OAAU,CAAAR,KAAK,EAAI;AACvB,eAAO,MAAKD,UAAL,mBAAqBC,KAArB;AAA4BG,UAAAA,MAAM,EAANA,MAA5B;AAAoCI,UAAAA,IAAI,EAAJA;AAApC,WAAP;AACD,OAFD;;AAIA,aACE,oBAAC,YAAD;AACE,QAAA,YAAY,EAAE,KADhB;AAEE,QAAA,KAAK,EAAC,MAFR;AAGE,QAAA,IAAI,EAAC,IAHP;AAIE,QAAA,OAAO,EACL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE,oBAAC,IAAD;AAAM,UAAA,IAAI,EAAC,MAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,UALJ;AASE,QAAA,OAAO,EAAEC,OATX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF;AAaD,K;;UAqBDC,a,GAAgB,UAAAT,KAAK,EAAI;AACvB,aAAO,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAY,MAAKU,SAAL,CAAeV,KAAf,CAAZ,CAAP;AACD,K;;;;;;;oCArBsB;AAAA;;AAAA,UAAXW,OAAW,QAAXA,OAAW;AACrB,aAAOA,OAAO,CAACC,GAAR,CAAY,UAACT,MAAD,EAASU,KAAT;AAAA,eACjB,oBAAC,QAAD;AAAU,UAAA,GAAG,EAAEA,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACG,MAAI,CAACP,gBAAL,CAAsBH,MAAtB,CADH,EAEE;AAAK,UAAA,OAAO,EAAE,MAAI,CAACD,cAAL,CAAoBY,IAApB,CAAyB,MAAzB,EAA+BX,MAA/B,CAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE,oBAAC,IAAD;AAAM,UAAA,IAAI,EAAC,UAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,YAFF,CADF,EAOE,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAQ,UAAA,KAAK,EAAC,gBAAd;AAA+B,UAAA,MAAM,EAAEA,MAAM,CAACK,OAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,CAPF,CADF,EAYE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAKL,MAAM,CAACY,IAAZ,CAZF,CADiB;AAAA,OAAZ,CAAP;AAgBD;;;6BAMQ;AACP,aACE,oBAAC,IAAD;AACE,QAAA,SAAS,EAAC,oBADZ;AAEE,QAAA,IAAI,EAAC,IAFP;AAGE,QAAA,UAAU,EAAE,CACV;AAAEC,UAAAA,KAAK,EAAE3B,EAAE,CAAC,UAAD,CAAX;AAAyB4B,UAAAA,IAAI,EAAE;AAA/B,SADU,EAEV;AAAED,UAAAA,KAAK,EAAE3B,EAAE,CAAC,iBAAD;AAAX,SAFU,CAHd;AAOE,QAAA,KAAK,EAAEA,EAAE,CAAC,iBAAD,CAPX;AAQE,QAAA,aAAa,EACX,oBAAC,iBAAD;AACE,UAAA,IAAI,EAAC,wBADP;AAEE,UAAA,KAAK,EAAC,iBAFR;AAGE,UAAA,WAAW,mRAHb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UATJ;AAeE,QAAA,UAAU,EAAE,KAAKU,UAfnB;AAgBE,QAAA,aAAa,EAAE,KAAKU;AAhBtB,SAiBM,KAAKT,KAjBX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SADF;AAqBD;;;;EA5E6BV,KAAK,CAAC4B,S;;AA+EtC,eAAepB,iBAAf","sourcesContent":["import HeaderDescription from 'modules/common/components/HeaderDescription';\nimport Icon from 'erxes-common-ui/lib/components/icon';\nimport ModalTrigger from 'modules/common/components/ModalTrigger';\nimport { IButtonMutateProps } from 'modules/common/types';\nimport { __ } from 'modules/common/utils';\nimport React from 'react';\nimport List from '../../common/components/List';\nimport { ICommonListProps } from '../../common/types';\nimport {\n  Actions,\n  IframePreview,\n  Template,\n  TemplateBox,\n  Templates\n} from '../styles';\nimport Form from './Form';\n\ntype Props = {\n  renderButton: (props: IButtonMutateProps) => JSX.Element;\n} & ICommonListProps;\n\nclass EmailTemplateList extends React.Component<Props> {\n  renderForm = props => {\n    return <Form {...props} renderButton={this.props.renderButton} />;\n  };\n\n  removeTemplate = object => {\n    this.props.remove(object._id);\n  };\n\n  renderEditAction = object => {\n    const { save } = this.props;\n\n    const content = props => {\n      return this.renderForm({ ...props, object, save });\n    };\n\n    return (\n      <ModalTrigger\n        enforceFocus={false}\n        title=\"Edit\"\n        size=\"lg\"\n        trigger={\n          <div>\n            <Icon icon=\"edit\" /> Edit\n          </div>\n        }\n        content={content}\n      />\n    );\n  };\n\n  renderRow({ objects }) {\n    return objects.map((object, index) => (\n      <Template key={index}>\n        <TemplateBox>\n          <Actions>\n            {this.renderEditAction(object)}\n            <div onClick={this.removeTemplate.bind(this, object)}>\n              <Icon icon=\"cancel-1\" /> Delete\n            </div>\n          </Actions>\n          <IframePreview>\n            <iframe title=\"content-iframe\" srcDoc={object.content} />\n          </IframePreview>\n        </TemplateBox>\n        <h5>{object.name}</h5>\n      </Template>\n    ));\n  }\n\n  renderContent = props => {\n    return <Templates>{this.renderRow(props)}</Templates>;\n  };\n\n  render() {\n    return (\n      <List\n        formTitle=\"New email template\"\n        size=\"lg\"\n        breadcrumb={[\n          { title: __('Settings'), link: '/settings' },\n          { title: __('Email templates') }\n        ]}\n        title={__('Email templates')}\n        leftActionBar={\n          <HeaderDescription\n            icon=\"/images/actions/22.svg\"\n            title=\"Email templates\"\n            description={`It's all about thinking ahead for your customers. Team members will be able to choose from email templates and send out one message to multiple recipients. You can use the email templates to send out a Mass email for leads/customers or you can send to other team members.`}\n          />\n        }\n        renderForm={this.renderForm}\n        renderContent={this.renderContent}\n        {...this.props}\n      />\n    );\n  }\n}\n\nexport default EmailTemplateList;\n"]},"metadata":{},"sourceType":"module"}