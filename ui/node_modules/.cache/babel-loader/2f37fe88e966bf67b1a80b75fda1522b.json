{"ast":null,"code":"import _classCallCheck from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/anu-ujin/Works/open-source/erxes/ui/src/modules/customers/components/common/TrackedDataSection.tsx\";\nimport dayjs from 'dayjs';\nimport Box from 'modules/common/components/Box';\nimport EmptyState from 'modules/common/components/EmptyState';\nimport Label from 'modules/common/components/Label';\nimport { __, isValidDate } from 'modules/common/utils';\nimport { FieldStyle, SidebarCounter, SidebarList } from 'modules/layout/styles';\nimport React from 'react';\n\nvar TrackedDataSection =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(TrackedDataSection, _React$Component);\n\n  function TrackedDataSection() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, TrackedDataSection);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(TrackedDataSection)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.renderCustomValue = function (value) {\n      if (isValidDate(value)) {\n        return dayjs(value).format('lll');\n      }\n\n      return value;\n    };\n\n    return _this;\n  }\n\n  _createClass(TrackedDataSection, [{\n    key: \"renderContent\",\n    value: function renderContent() {\n      var _this2 = this;\n\n      var customer = this.props.customer;\n      var isOnline = customer.isOnline,\n          sessionCount = customer.sessionCount,\n          lastSeenAt = customer.lastSeenAt;\n      var trackedData = customer.trackedData || [];\n\n      if (!trackedData) {\n        return React.createElement(EmptyState, {\n          icon: \"chat\",\n          text: \"Empty\",\n          size: \"small\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 32\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(SidebarList, {\n        className: \"no-link\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 36\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 37\n        },\n        __self: this\n      }, React.createElement(FieldStyle, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 38\n        },\n        __self: this\n      }, __('Status')), React.createElement(SidebarCounter, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 39\n        },\n        __self: this\n      }, isOnline ? React.createElement(Label, {\n        lblStyle: \"success\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41\n        },\n        __self: this\n      }, \"Online\") : React.createElement(Label, {\n        lblStyle: \"simple\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43\n        },\n        __self: this\n      }, \"Offline\"))), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47\n        },\n        __self: this\n      }, React.createElement(FieldStyle, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48\n        },\n        __self: this\n      }, __('Last online')), React.createElement(SidebarCounter, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      }, dayjs(lastSeenAt).format('lll'))), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, React.createElement(FieldStyle, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }, __('Session count')), React.createElement(SidebarCounter, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, sessionCount)), trackedData.map(function (data, index) {\n        return React.createElement(\"li\", {\n          key: index,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 56\n          },\n          __self: this\n        }, React.createElement(FieldStyle, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 57\n          },\n          __self: this\n        }, data.field), React.createElement(SidebarCounter, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 58\n          },\n          __self: this\n        }, _this2.renderCustomValue(data.value)));\n      }));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var collapseCallback = this.props.collapseCallback;\n      return React.createElement(Box, {\n        title: __('Tracked data'),\n        name: \"showTrackedData\",\n        callback: collapseCallback,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, this.renderContent());\n    }\n  }]);\n\n  return TrackedDataSection;\n}(React.Component);\n\nexport default TrackedDataSection;","map":{"version":3,"sources":["/home/anu-ujin/Works/open-source/erxes/ui/src/modules/customers/components/common/TrackedDataSection.tsx"],"names":["dayjs","Box","EmptyState","Label","__","isValidDate","FieldStyle","SidebarCounter","SidebarList","React","TrackedDataSection","renderCustomValue","value","format","customer","props","isOnline","sessionCount","lastSeenAt","trackedData","map","data","index","field","collapseCallback","renderContent","Component"],"mappings":"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","sourcesContent":["import dayjs from 'dayjs';\nimport Box from 'modules/common/components/Box';\nimport EmptyState from 'modules/common/components/EmptyState';\nimport Label from 'modules/common/components/Label';\nimport { __, isValidDate } from 'modules/common/utils';\nimport { FieldStyle, SidebarCounter, SidebarList } from 'modules/layout/styles';\nimport React from 'react';\nimport { ICustomer } from '../../types';\n\ntype Props = {\n  customer: ICustomer;\n  queryParams?: any;\n  collapseCallback?: () => void;\n};\n\nclass TrackedDataSection extends React.Component<Props> {\n  renderCustomValue = (value: string) => {\n    if (isValidDate(value)) {\n      return dayjs(value).format('lll');\n    }\n\n    return value;\n  };\n\n  renderContent() {\n    const { customer } = this.props;\n    const { isOnline, sessionCount, lastSeenAt } = customer;\n\n    const trackedData = customer.trackedData || [];\n\n    if (!trackedData) {\n      return <EmptyState icon=\"chat\" text=\"Empty\" size=\"small\" />;\n    }\n\n    return (\n      <SidebarList className=\"no-link\">\n        <li>\n          <FieldStyle>{__('Status')}</FieldStyle>\n          <SidebarCounter>\n            {isOnline ? (\n              <Label lblStyle=\"success\">Online</Label>\n            ) : (\n              <Label lblStyle=\"simple\">Offline</Label>\n            )}\n          </SidebarCounter>\n        </li>\n        <li>\n          <FieldStyle>{__('Last online')}</FieldStyle>\n          <SidebarCounter>{dayjs(lastSeenAt).format('lll')}</SidebarCounter>\n        </li>\n        <li>\n          <FieldStyle>{__('Session count')}</FieldStyle>\n          <SidebarCounter>{sessionCount}</SidebarCounter>\n        </li>\n        {trackedData.map((data, index) => (\n          <li key={index}>\n            <FieldStyle>{data.field}</FieldStyle>\n            <SidebarCounter>\n              {this.renderCustomValue(data.value)}\n            </SidebarCounter>\n          </li>\n        ))}\n      </SidebarList>\n    );\n  }\n\n  render() {\n    const { collapseCallback } = this.props;\n\n    return (\n      <Box\n        title={__('Tracked data')}\n        name=\"showTrackedData\"\n        callback={collapseCallback}\n      >\n        {this.renderContent()}\n      </Box>\n    );\n  }\n}\n\nexport default TrackedDataSection;\n"]},"metadata":{},"sourceType":"module"}