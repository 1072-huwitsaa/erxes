{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar react_1 = __importDefault(require(\"react\"));\n\nvar validator_1 = __importDefault(require(\"validator\"));\n\nvar helpers_1 = require(\"../helpers\");\n\nvar styles_1 = require(\"./styles\");\n\nvar Form =\n/** @class */\nfunction (_super) {\n  __extends(Form, _super);\n\n  function Form(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.formId = helpers_1.generateRandomString();\n    _this.children = [];\n\n    _this.registerChild = function (child) {\n      _this.children.push(child);\n    };\n\n    _this.resetSubmit = function () {\n      _this.setState({\n        isSubmitted: false\n      });\n    };\n\n    _this.runValidations = function () {\n      var errors = {};\n      var values = {};\n\n      for (var _i = 0, _a = _this.children; _i < _a.length; _i++) {\n        var child = _a[_i];\n        errors[child.props.name] = _this.validate(child);\n        values[child.props.name] = _this.getValue(child);\n      }\n\n      _this.setState({\n        errors: errors,\n        values: values\n      }, function () {\n        var hasErrors = Object.values(errors).some(function (error) {\n          return error !== null;\n        });\n\n        if (hasErrors) {\n          return;\n        }\n\n        if (_this.props.onSubmit) {\n          return _this.props.onSubmit(_this.state.values);\n        }\n\n        _this.setState({\n          isSubmitted: !_this.state.isSubmitted\n        });\n      });\n    };\n\n    _this.getSelector = function (name) {\n      return document.querySelector(\"#\" + _this.formId + \" [name='\" + name + \"']\");\n    };\n\n    _this.getValue = function (child) {\n      var element = _this.getSelector(child.props.name);\n\n      if (element) {\n        return element.value;\n      }\n\n      return '';\n    };\n\n    _this.onSubmit = function (e) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      _this.runValidations();\n    };\n\n    _this.validate = function (child) {\n      var props = child.props;\n\n      var element = _this.getSelector(props.name);\n\n      var value = element ? element.value : '';\n\n      if (props.required && !value) {\n        return react_1.default.createElement(styles_1.Error, null, \"Required field\");\n      }\n\n      if (props.type === 'email' && !validator_1.default.isEmail(value)) {\n        return react_1.default.createElement(styles_1.Error, null, \"Invalid email format! Please enter a valid email address\");\n      }\n\n      if (props.max && !validator_1.default.isLength('description', {\n        min: 0,\n        max: props.max\n      })) {\n        return react_1.default.createElement(styles_1.Error, null, \"Maximum length is \", props.max, \" characters\");\n      }\n\n      if (value && props.type === 'url' && !validator_1.default.isURL(value)) {\n        return react_1.default.createElement(styles_1.Error, null, \"Invalid link\");\n      }\n\n      if (value && props.type === 'number' && !validator_1.default.isFloat(value)) {\n        return react_1.default.createElement(styles_1.Error, null, \"Invalid number format! Please enter a valid number\");\n      }\n\n      if (value && props.name === 'username' && !helpers_1.isValidUsername(value)) {\n        return react_1.default.createElement(styles_1.Error, null, \"Invalid Username\");\n      }\n\n      return null;\n    };\n\n    _this.state = {\n      errors: {},\n      values: {},\n      isSubmitted: false\n    };\n    return _this;\n  }\n\n  Form.prototype.render = function () {\n    return react_1.default.createElement(\"form\", {\n      id: this.formId,\n      onSubmit: this.onSubmit,\n      noValidate: true,\n      autoComplete: this.props.autoComplete\n    }, this.props.renderContent({\n      errors: this.state.errors,\n      values: this.state.values,\n      registerChild: this.registerChild,\n      runValidations: this.runValidations,\n      isSubmitted: this.state.isSubmitted,\n      resetSubmit: this.resetSubmit\n    }));\n  };\n\n  return Form;\n}(react_1.default.Component);\n\nexports.default = Form;","map":null,"metadata":{},"sourceType":"script"}