{"ast":null,"code":"import _classCallCheck from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/anu-ujin/Works/open-source/erxes/ui/src/modules/inbox/components/conversationDetail/workarea/responseTemplate/ResponseTemplate.tsx\";\nimport Button from 'modules/common/components/Button';\nimport Icon from 'erxes-common-ui/lib/components/icon';\nimport Tip from 'modules/common/components/Tip';\nimport { __ } from 'modules/common/utils';\nimport Modal from 'modules/inbox/containers/conversationDetail/responseTemplate/Modal';\nimport PopoverContent from 'modules/inbox/containers/conversationDetail/responseTemplate/PopoverContent';\nimport { ResponseTemplateStyled } from 'modules/inbox/styles';\nimport React from 'react';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport Popover from 'react-bootstrap/Popover';\nimport strip from 'strip';\n\nvar ResponseTemplate =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ResponseTemplate, _React$Component);\n\n  function ResponseTemplate() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ResponseTemplate);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ResponseTemplate)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.overlayRef = void 0;\n\n    _this.hidePopover = function () {\n      _this.overlayRef.hide();\n    };\n\n    return _this;\n  }\n\n  _createClass(ResponseTemplate, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          brands = _this$props.brands,\n          content = _this$props.content,\n          brandId = _this$props.brandId,\n          attachments = _this$props.attachments;\n      var saveTrigger = React.createElement(Button, {\n        id: \"response-template-handler\",\n        btnStyle: \"link\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42\n        },\n        __self: this\n      }, React.createElement(Tip, {\n        text: __('Save as template'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        icon: \"file-upload-alt\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44\n        },\n        __self: this\n      })));\n      var popover = React.createElement(Popover, {\n        className: \"popover-template\",\n        id: \"templates-popover\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50\n        },\n        __self: this\n      }, React.createElement(Popover.Title, {\n        as: \"h3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, __('Response Templates')), React.createElement(Popover.Content, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }, React.createElement(PopoverContent, Object.assign({}, this.props, {\n        onSelectTemplate: this.hidePopover,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }))));\n      return React.createElement(ResponseTemplateStyled, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, React.createElement(OverlayTrigger, {\n        trigger: \"click\",\n        placement: \"top\",\n        overlay: popover,\n        rootClose: true,\n        ref: function ref(overlayTrigger) {\n          _this2.overlayRef = overlayTrigger;\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, React.createElement(Button, {\n        btnStyle: \"link\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, React.createElement(Tip, {\n        text: __('Response template'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        icon: \"file-bookmark-alt\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      })))), React.createElement(Modal, {\n        trigger: strip(content) ? saveTrigger : React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77\n          },\n          __self: this\n        }),\n        content: content,\n        files: attachments,\n        brands: brands,\n        brandId: brandId,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return ResponseTemplate;\n}(React.Component);\n\nexport default ResponseTemplate;","map":{"version":3,"sources":["/home/anu-ujin/Works/open-source/erxes/ui/src/modules/inbox/components/conversationDetail/workarea/responseTemplate/ResponseTemplate.tsx"],"names":["Button","Icon","Tip","__","Modal","PopoverContent","ResponseTemplateStyled","React","OverlayTrigger","Popover","strip","ResponseTemplate","overlayRef","hidePopover","hide","props","brands","content","brandId","attachments","saveTrigger","popover","overlayTrigger","Component"],"mappings":"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","sourcesContent":["import Button from 'modules/common/components/Button';\nimport Icon from 'erxes-common-ui/lib/components/icon';\nimport Tip from 'modules/common/components/Tip';\nimport { IAttachment } from 'modules/common/types';\nimport { __ } from 'modules/common/utils';\nimport Modal from 'modules/inbox/containers/conversationDetail/responseTemplate/Modal';\nimport PopoverContent from 'modules/inbox/containers/conversationDetail/responseTemplate/PopoverContent';\nimport { ResponseTemplateStyled } from 'modules/inbox/styles';\nimport { IBrand } from 'modules/settings/brands/types';\nimport { IResponseTemplate } from 'modules/settings/responseTemplates/types';\nimport React from 'react';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport Popover from 'react-bootstrap/Popover';\nimport strip from 'strip';\n\ntype Props = {\n  brandId?: string;\n  onSelect: (responseTemplate?: IResponseTemplate) => void;\n  brands: IBrand[];\n  attachments?: IAttachment[];\n  content?: string;\n};\n\ntype State = {\n  key?: string;\n  brandId?: string;\n  searchValue: string;\n  options: IResponseTemplate[];\n};\n\nclass ResponseTemplate extends React.Component<Props, State> {\n  private overlayRef;\n\n  hidePopover = () => {\n    this.overlayRef.hide();\n  };\n\n  render() {\n    const { brands, content, brandId, attachments } = this.props;\n\n    const saveTrigger = (\n      <Button id=\"response-template-handler\" btnStyle=\"link\">\n        <Tip text={__('Save as template')}>\n          <Icon icon=\"file-upload-alt\" />\n        </Tip>\n      </Button>\n    );\n\n    const popover = (\n      <Popover className=\"popover-template\" id=\"templates-popover\">\n        <Popover.Title as=\"h3\">{__('Response Templates')}</Popover.Title>\n        <Popover.Content>\n          <PopoverContent {...this.props} onSelectTemplate={this.hidePopover} />\n        </Popover.Content>\n      </Popover>\n    );\n\n    return (\n      <ResponseTemplateStyled>\n        <OverlayTrigger\n          trigger=\"click\"\n          placement=\"top\"\n          overlay={popover}\n          rootClose={true}\n          ref={overlayTrigger => {\n            this.overlayRef = overlayTrigger;\n          }}\n        >\n          <Button btnStyle=\"link\">\n            <Tip text={__('Response template')}>\n              <Icon icon=\"file-bookmark-alt\" />\n            </Tip>\n          </Button>\n        </OverlayTrigger>\n\n        <Modal\n          trigger={strip(content) ? saveTrigger : <span />}\n          content={content}\n          files={attachments}\n          brands={brands}\n          brandId={brandId}\n        />\n      </ResponseTemplateStyled>\n    );\n  }\n}\n\nexport default ResponseTemplate;\n"]},"metadata":{},"sourceType":"module"}