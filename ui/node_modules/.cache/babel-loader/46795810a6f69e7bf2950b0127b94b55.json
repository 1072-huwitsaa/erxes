{"ast":null,"code":"import { getEnv } from 'apolloClient';\nimport { uploadHandler } from 'modules/common/utils';\nexport var handleXlsUpload = function handleXlsUpload(_ref) {\n  var e = _ref.e,\n      type = _ref.type,\n      beforeUploadCallback = _ref.beforeUploadCallback,\n      afterUploadCallback = _ref.afterUploadCallback;\n  var xlsFile = e.target.files;\n\n  var _getEnv = getEnv(),\n      REACT_APP_API_URL = _getEnv.REACT_APP_API_URL;\n\n  uploadHandler({\n    files: xlsFile,\n    extraFormData: [{\n      key: 'type',\n      value: type\n    }],\n    url: \"\".concat(REACT_APP_API_URL, \"/import-file\"),\n    responseType: 'json',\n    beforeUpload: function beforeUpload() {\n      if (beforeUploadCallback) {\n        beforeUploadCallback();\n      }\n    },\n    afterUpload: function afterUpload(_ref2) {\n      var response = _ref2.response;\n\n      if (afterUploadCallback) {\n        afterUploadCallback(response);\n      }\n    }\n  });\n  e.target.value = null;\n};","map":{"version":3,"sources":["/home/anu-ujin/Works/open-source/erxes/ui/src/modules/settings/importHistory/utils.ts"],"names":["getEnv","uploadHandler","handleXlsUpload","e","type","beforeUploadCallback","afterUploadCallback","xlsFile","target","files","REACT_APP_API_URL","extraFormData","key","value","url","responseType","beforeUpload","afterUpload","response"],"mappings":"AAAA,SAASA,MAAT,QAAuB,cAAvB;AACA,SAASC,aAAT,QAA8B,sBAA9B;AAEA,OAAO,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,OAUzB;AAAA,MATJC,CASI,QATJA,CASI;AAAA,MARJC,IAQI,QARJA,IAQI;AAAA,MAPJC,oBAOI,QAPJA,oBAOI;AAAA,MANJC,mBAMI,QANJA,mBAMI;AACJ,MAAMC,OAAO,GAAGJ,CAAC,CAACK,MAAF,CAASC,KAAzB;;AADI,gBAG0BT,MAAM,EAHhC;AAAA,MAGIU,iBAHJ,WAGIA,iBAHJ;;AAKJT,EAAAA,aAAa,CAAC;AACZQ,IAAAA,KAAK,EAAEF,OADK;AAEZI,IAAAA,aAAa,EAAE,CAAC;AAAEC,MAAAA,GAAG,EAAE,MAAP;AAAeC,MAAAA,KAAK,EAAET;AAAtB,KAAD,CAFH;AAGZU,IAAAA,GAAG,YAAKJ,iBAAL,iBAHS;AAIZK,IAAAA,YAAY,EAAE,MAJF;AAKZC,IAAAA,YAAY,EAAE,wBAAM;AAClB,UAAIX,oBAAJ,EAA0B;AACxBA,QAAAA,oBAAoB;AACrB;AACF,KATW;AAWZY,IAAAA,WAAW,EAAE,4BAAkB;AAAA,UAAfC,QAAe,SAAfA,QAAe;;AAC7B,UAAIZ,mBAAJ,EAAyB;AACvBA,QAAAA,mBAAmB,CAACY,QAAD,CAAnB;AACD;AACF;AAfW,GAAD,CAAb;AAkBAf,EAAAA,CAAC,CAACK,MAAF,CAASK,KAAT,GAAiB,IAAjB;AACD,CAlCM","sourcesContent":["import { getEnv } from 'apolloClient';\nimport { uploadHandler } from 'modules/common/utils';\n\nexport const handleXlsUpload = ({\n  e,\n  type,\n  beforeUploadCallback,\n  afterUploadCallback\n}: {\n  e: any;\n  type: string;\n  beforeUploadCallback?: () => void;\n  afterUploadCallback?: (response) => void;\n}) => {\n  const xlsFile = e.target.files;\n\n  const { REACT_APP_API_URL } = getEnv();\n\n  uploadHandler({\n    files: xlsFile,\n    extraFormData: [{ key: 'type', value: type }],\n    url: `${REACT_APP_API_URL}/import-file`,\n    responseType: 'json',\n    beforeUpload: () => {\n      if (beforeUploadCallback) {\n        beforeUploadCallback();\n      }\n    },\n\n    afterUpload: ({ response }) => {\n      if (afterUploadCallback) {\n        afterUploadCallback(response);\n      }\n    }\n  });\n\n  e.target.value = null;\n};\n"]},"metadata":{},"sourceType":"module"}