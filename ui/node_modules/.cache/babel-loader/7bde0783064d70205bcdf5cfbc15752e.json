{"ast":null,"code":"import _classCallCheck from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/anu-ujin/Works/open-source/erxes/ui/src/modules/tasks/components/TaskItem.tsx\";\nimport dayjs from 'dayjs';\nimport Assignees from 'modules/boards/components/Assignees';\nimport Details from 'modules/boards/components/Details';\nimport DueDateLabel from 'modules/boards/components/DueDateLabel';\nimport Labels from 'modules/boards/components/label/Labels';\nimport EditForm from 'modules/boards/containers/editForm/EditForm';\nimport { ItemContainer, ItemDate } from 'modules/boards/styles/common';\nimport { Footer, PriceContainer, Right } from 'modules/boards/styles/item';\nimport { Content } from 'modules/boards/styles/stage';\nimport { renderPriority } from 'modules/boards/utils';\nimport { __ } from 'modules/common/utils';\nimport React from 'react';\n\nvar TaskItem =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  _inherits(TaskItem, _React$PureComponent);\n\n  function TaskItem() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, TaskItem);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(TaskItem)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.renderForm = function () {\n      var _this$props = _this.props,\n          item = _this$props.item,\n          isFormVisible = _this$props.isFormVisible,\n          stageId = _this$props.stageId;\n\n      if (!isFormVisible) {\n        return null;\n      }\n\n      return React.createElement(EditForm, Object.assign({}, _this.props, {\n        stageId: stageId || item.stageId,\n        itemId: item._id,\n        hideHeader: true,\n        isPopupVisible: isFormVisible,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45\n        },\n        __self: this\n      }));\n    };\n\n    return _this;\n  }\n\n  _createClass(TaskItem, [{\n    key: \"renderDate\",\n    value: function renderDate(date) {\n      if (!date) {\n        return null;\n      }\n\n      return React.createElement(ItemDate, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 34\n        },\n        __self: this\n      }, dayjs(date).format('lll'));\n    }\n  }, {\n    key: \"renderContent\",\n    value: function renderContent() {\n      var item = this.props.item;\n      var customers = item.customers,\n          companies = item.companies,\n          closeDate = item.closeDate,\n          isComplete = item.isComplete;\n      return React.createElement(React.Fragment, null, React.createElement(\"h5\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, renderPriority(item.priority), item.name), React.createElement(Details, {\n        color: \"#F7CE53\",\n        items: customers || [],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }), React.createElement(Details, {\n        color: \"#EA475D\",\n        items: companies || [],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }), React.createElement(PriceContainer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, React.createElement(Right, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(Assignees, {\n        users: item.assignedUsers,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }))), React.createElement(DueDateLabel, {\n        closeDate: closeDate,\n        isComplete: isComplete,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }), React.createElement(Footer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, __('Last updated'), \":\", React.createElement(Right, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, this.renderDate(item.modifiedAt))));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          item = _this$props2.item,\n          portable = _this$props2.portable,\n          onClick = _this$props2.onClick;\n\n      if (portable) {\n        return React.createElement(React.Fragment, null, React.createElement(ItemContainer, {\n          onClick: onClick,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90\n          },\n          __self: this\n        }, React.createElement(Content, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91\n          },\n          __self: this\n        }, this.renderContent())), this.renderForm());\n      }\n\n      return React.createElement(React.Fragment, null, React.createElement(Labels, {\n        labels: item.labels,\n        indicator: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }), React.createElement(Content, {\n        onClick: onClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, this.renderContent()), this.renderForm());\n    }\n  }]);\n\n  return TaskItem;\n}(React.PureComponent);\n\nexport default TaskItem;","map":{"version":3,"sources":["/home/anu-ujin/Works/open-source/erxes/ui/src/modules/tasks/components/TaskItem.tsx"],"names":["dayjs","Assignees","Details","DueDateLabel","Labels","EditForm","ItemContainer","ItemDate","Footer","PriceContainer","Right","Content","renderPriority","__","React","TaskItem","renderForm","props","item","isFormVisible","stageId","_id","date","format","customers","companies","closeDate","isComplete","priority","name","assignedUsers","renderDate","modifiedAt","portable","onClick","renderContent","labels","PureComponent"],"mappings":"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","sourcesContent":["import dayjs from 'dayjs';\nimport Assignees from 'modules/boards/components/Assignees';\nimport Details from 'modules/boards/components/Details';\nimport DueDateLabel from 'modules/boards/components/DueDateLabel';\nimport Labels from 'modules/boards/components/label/Labels';\nimport EditForm from 'modules/boards/containers/editForm/EditForm';\nimport { ItemContainer, ItemDate } from 'modules/boards/styles/common';\nimport { Footer, PriceContainer, Right } from 'modules/boards/styles/item';\nimport { Content } from 'modules/boards/styles/stage';\nimport { IItem, IOptions } from 'modules/boards/types';\nimport { renderPriority } from 'modules/boards/utils';\nimport { __ } from 'modules/common/utils';\nimport React from 'react';\n\ntype Props = {\n  stageId: string;\n  item: IItem;\n  onClick?: () => void;\n  isFormVisible?: boolean;\n  beforePopupClose?: () => void;\n  options?: IOptions;\n  portable?: boolean;\n  onAdd?: (stageId: string, item: IItem) => void;\n  onRemove?: (taskId: string, stageId: string) => void;\n  onUpdate?: (item: IItem) => void;\n};\n\nclass TaskItem extends React.PureComponent<Props> {\n  renderDate(date) {\n    if (!date) {\n      return null;\n    }\n\n    return <ItemDate>{dayjs(date).format('lll')}</ItemDate>;\n  }\n\n  renderForm = () => {\n    const { item, isFormVisible, stageId } = this.props;\n\n    if (!isFormVisible) {\n      return null;\n    }\n\n    return (\n      <EditForm\n        {...this.props}\n        stageId={stageId || item.stageId}\n        itemId={item._id}\n        hideHeader={true}\n        isPopupVisible={isFormVisible}\n      />\n    );\n  };\n\n  renderContent() {\n    const { item } = this.props;\n    const { customers, companies, closeDate, isComplete } = item;\n\n    return (\n      <>\n        <h5>\n          {renderPriority(item.priority)}\n          {item.name}\n        </h5>\n\n        <Details color=\"#F7CE53\" items={customers || []} />\n        <Details color=\"#EA475D\" items={companies || []} />\n\n        <PriceContainer>\n          <Right>\n            <Assignees users={item.assignedUsers} />\n          </Right>\n        </PriceContainer>\n\n        <DueDateLabel closeDate={closeDate} isComplete={isComplete} />\n\n        <Footer>\n          {__('Last updated')}:<Right>{this.renderDate(item.modifiedAt)}</Right>\n        </Footer>\n      </>\n    );\n  }\n\n  render() {\n    const { item, portable, onClick } = this.props;\n\n    if (portable) {\n      return (\n        <>\n          <ItemContainer onClick={onClick}>\n            <Content>{this.renderContent()}</Content>\n          </ItemContainer>\n          {this.renderForm()}\n        </>\n      );\n    }\n\n    return (\n      <>\n        <Labels labels={item.labels} indicator={true} />\n        <Content onClick={onClick}>{this.renderContent()}</Content>\n        {this.renderForm()}\n      </>\n    );\n  }\n}\n\nexport default TaskItem;\n"]},"metadata":{},"sourceType":"module"}