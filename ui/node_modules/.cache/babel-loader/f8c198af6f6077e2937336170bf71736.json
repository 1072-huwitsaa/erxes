{"ast":null,"code":"import _objectSpread from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _defineProperty from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/anu-ujin/Works/open-source/erxes/ui/src/modules/engage/components/VisitorForm.tsx\";\nimport Button from 'modules/common/components/Button';\nimport FormControl from 'modules/common/components/form/Control';\nimport ConditionsRule from 'modules/common/components/rule/ConditionsRule';\nimport { Step, Steps } from 'modules/common/components/step';\nimport { StepWrapper, TitleContainer } from 'modules/common/components/step/styles';\nimport { __ } from 'modules/common/utils';\nimport { MESSAGE_KINDS, METHODS } from 'modules/engage/constants';\nimport Wrapper from 'modules/layout/components/Wrapper';\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport MessengerForm from './MessengerForm';\n\nvar VisitorForm =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(VisitorForm, _React$Component);\n\n  function VisitorForm(props) {\n    var _this;\n\n    _classCallCheck(this, VisitorForm);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(VisitorForm).call(this, props));\n\n    _this.changeState = function (key, value) {\n      _this.setState(_defineProperty({}, key, value));\n    };\n\n    _this.handleSubmit = function (type) {\n      var messenger = _this.state.messenger || {};\n      var doc = {\n        kind: MESSAGE_KINDS.VISITOR_AUTO,\n        title: _this.state.title,\n        fromUserId: _this.state.fromUserId,\n        method: METHODS.MESSENGER,\n        messenger: {\n          rules: _this.state.rules,\n          brandId: messenger.brandId,\n          sentAs: messenger.sentAs,\n          content: _this.state.content\n        },\n        scheduleDate: _this.state.scheduleDate\n      };\n\n      var response = _this.props.validateDoc(type, doc);\n\n      if (response.status === 'ok' && response.doc) {\n        return _this.props.save(response.doc);\n      }\n    };\n\n    _this.renderSaveButton = function () {\n      var _this$props = _this.props,\n          isActionLoading = _this$props.isActionLoading,\n          kind = _this$props.kind;\n      var cancelButton = React.createElement(Link, {\n        to: \"/engage\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(Button, {\n        btnStyle: \"simple\",\n        uppercase: false,\n        icon: \"times-circle\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, \"Cancel\"));\n\n      var saveButton = function saveButton() {\n        if (kind === 'visitorAuto') {\n          return React.createElement(React.Fragment, null, React.createElement(Button, {\n            disabled: isActionLoading,\n            btnStyle: \"warning\",\n            uppercase: false,\n            icon: isActionLoading ? undefined : 'file-alt',\n            onClick: _this.handleSubmit.bind(_assertThisInitialized(_this), 'draft'),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 119\n            },\n            __self: this\n          }, \"Save & Draft\"), React.createElement(Button, {\n            disabled: isActionLoading,\n            btnStyle: \"success\",\n            uppercase: false,\n            icon: isActionLoading ? undefined : 'check-circle',\n            onClick: _this.handleSubmit.bind(_assertThisInitialized(_this), 'live'),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 128\n            },\n            __self: this\n          }, \"Save & Live\"));\n        }\n\n        return;\n      };\n\n      return React.createElement(Button.Group, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, cancelButton, saveButton());\n    };\n\n    var message = props.message || {};\n\n    var _messenger = message.messenger || {};\n\n    var rules = _messenger.rules ? _messenger.rules.map(function (rule) {\n      return _objectSpread({}, rule);\n    }) : [];\n    _this.state = {\n      maxStep: 2,\n      activeStep: 1,\n      method: METHODS.MESSENGER,\n      title: message.title || '',\n      content: _messenger.content || '',\n      fromUserId: message.fromUserId || '',\n      rules: rules,\n      messenger: message.messenger,\n      scheduleDate: message.scheduleDate\n    };\n    return _this;\n  }\n\n  _createClass(VisitorForm, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          activeStep = _this$state.activeStep,\n          maxStep = _this$state.maxStep,\n          messenger = _this$state.messenger,\n          fromUserId = _this$state.fromUserId,\n          content = _this$state.content,\n          scheduleDate = _this$state.scheduleDate;\n      var _this$props2 = this.props,\n          renderTitle = _this$props2.renderTitle,\n          breadcrumbs = _this$props2.breadcrumbs,\n          kind = _this$props2.kind,\n          users = _this$props2.users,\n          brands = _this$props2.brands;\n\n      var onChange = function onChange(e) {\n        return _this2.changeState('title', e.target.value);\n      };\n\n      return React.createElement(StepWrapper, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, React.createElement(Wrapper.Header, {\n        title: renderTitle(),\n        breadcrumb: breadcrumbs,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }), React.createElement(TitleContainer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, __('Title')), React.createElement(FormControl, {\n        required: true,\n        onChange: onChange,\n        defaultValue: this.state.title,\n        autoFocus: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }), this.renderSaveButton()), React.createElement(Steps, {\n        maxStep: maxStep,\n        active: activeStep,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, React.createElement(Step, {\n        img: \"/images/icons/erxes-02.svg\",\n        title: \"Who is this message for?\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, React.createElement(ConditionsRule, {\n        rules: this.state.rules,\n        onChange: this.changeState,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      })), React.createElement(Step, {\n        img: \"/images/icons/erxes-08.svg\",\n        title: \"Compose your message\",\n        noButton: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, React.createElement(MessengerForm, {\n        brands: brands,\n        onChange: this.changeState,\n        users: users,\n        messageKind: kind,\n        hasKind: false,\n        messenger: messenger || {},\n        fromUserId: fromUserId,\n        content: content,\n        scheduleDate: scheduleDate || {},\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return VisitorForm;\n}(React.Component);\n\nexport default VisitorForm;","map":{"version":3,"sources":["/home/anu-ujin/Works/open-source/erxes/ui/src/modules/engage/components/VisitorForm.tsx"],"names":["Button","FormControl","ConditionsRule","Step","Steps","StepWrapper","TitleContainer","__","MESSAGE_KINDS","METHODS","Wrapper","React","Link","MessengerForm","VisitorForm","props","changeState","key","value","setState","handleSubmit","type","messenger","state","doc","kind","VISITOR_AUTO","title","fromUserId","method","MESSENGER","rules","brandId","sentAs","content","scheduleDate","response","validateDoc","status","save","renderSaveButton","isActionLoading","cancelButton","saveButton","undefined","bind","message","map","rule","maxStep","activeStep","renderTitle","breadcrumbs","users","brands","onChange","e","target","Component"],"mappings":"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","sourcesContent":["import { IUser } from 'modules/auth/types';\nimport Button from 'modules/common/components/Button';\nimport FormControl from 'modules/common/components/form/Control';\nimport ConditionsRule from 'modules/common/components/rule/ConditionsRule';\nimport { Step, Steps } from 'modules/common/components/step';\nimport {\n  StepWrapper,\n  TitleContainer\n} from 'modules/common/components/step/styles';\nimport { __ } from 'modules/common/utils';\nimport { MESSAGE_KINDS, METHODS } from 'modules/engage/constants';\nimport {\n  IEngageMessage,\n  IEngageMessageDoc,\n  IEngageMessenger,\n  IEngageScheduleDate\n} from 'modules/engage/types';\nimport Wrapper from 'modules/layout/components/Wrapper';\nimport { IBrand } from 'modules/settings/brands/types';\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport { IBreadCrumbItem, IConditionsRule } from '../../common/types';\nimport MessengerForm from './MessengerForm';\n\ntype Props = {\n  kind: string;\n  message?: IEngageMessage;\n  brands: IBrand[];\n  users: IUser[];\n  handleSubmit?: (name: string, e: React.MouseEvent) => void;\n  save: (doc: IEngageMessageDoc) => Promise<any>;\n  validateDoc: (\n    type: string,\n    doc: IEngageMessageDoc\n  ) => { status: string; doc?: IEngageMessageDoc };\n  renderTitle: () => string;\n  breadcrumbs: IBreadCrumbItem[];\n  isActionLoading: boolean;\n};\n\ntype State = {\n  maxStep: number;\n  activeStep: number;\n  method: string;\n  title: string;\n  content: string;\n  fromUserId: string;\n  rules: IConditionsRule[];\n  messenger?: IEngageMessenger;\n  scheduleDate?: IEngageScheduleDate;\n};\n\nclass VisitorForm extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    const message = props.message || ({} as IEngageMessage);\n    const messenger = message.messenger || ({} as IEngageMessenger);\n    const rules = messenger.rules\n      ? messenger.rules.map(rule => ({ ...rule }))\n      : [];\n\n    this.state = {\n      maxStep: 2,\n      activeStep: 1,\n      method: METHODS.MESSENGER,\n      title: message.title || '',\n      content: messenger.content || '',\n      fromUserId: message.fromUserId || '',\n      rules,\n      messenger: message.messenger,\n      scheduleDate: message.scheduleDate\n    };\n  }\n\n  changeState = <T extends keyof State>(key: T, value: State[T]) => {\n    this.setState(({ [key]: value } as unknown) as Pick<State, keyof State>);\n  };\n\n  handleSubmit = (type: string): Promise<any> | void => {\n    const messenger = this.state.messenger || ({} as IEngageMessenger);\n\n    const doc = {\n      kind: MESSAGE_KINDS.VISITOR_AUTO,\n      title: this.state.title,\n      fromUserId: this.state.fromUserId,\n      method: METHODS.MESSENGER,\n      messenger: {\n        rules: this.state.rules,\n        brandId: messenger.brandId,\n        sentAs: messenger.sentAs,\n        content: this.state.content\n      },\n      scheduleDate: this.state.scheduleDate\n    };\n\n    const response = this.props.validateDoc(type, doc);\n\n    if (response.status === 'ok' && response.doc) {\n      return this.props.save(response.doc);\n    }\n  };\n\n  renderSaveButton = () => {\n    const { isActionLoading, kind } = this.props;\n\n    const cancelButton = (\n      <Link to=\"/engage\">\n        <Button btnStyle=\"simple\" uppercase={false} icon=\"times-circle\">\n          Cancel\n        </Button>\n      </Link>\n    );\n\n    const saveButton = () => {\n      if (kind === 'visitorAuto') {\n        return (\n          <>\n            <Button\n              disabled={isActionLoading}\n              btnStyle=\"warning\"\n              uppercase={false}\n              icon={isActionLoading ? undefined : 'file-alt'}\n              onClick={this.handleSubmit.bind(this, 'draft')}\n            >\n              Save & Draft\n            </Button>\n            <Button\n              disabled={isActionLoading}\n              btnStyle=\"success\"\n              uppercase={false}\n              icon={isActionLoading ? undefined : 'check-circle'}\n              onClick={this.handleSubmit.bind(this, 'live')}\n            >\n              Save & Live\n            </Button>\n          </>\n        );\n      }\n      return;\n    };\n\n    return (\n      <Button.Group>\n        {cancelButton}\n        {saveButton()}\n      </Button.Group>\n    );\n  };\n\n  render() {\n    const {\n      activeStep,\n      maxStep,\n      messenger,\n      fromUserId,\n      content,\n      scheduleDate\n    } = this.state;\n\n    const { renderTitle, breadcrumbs, kind, users, brands } = this.props;\n\n    const onChange = e =>\n      this.changeState('title', (e.target as HTMLInputElement).value);\n\n    return (\n      <StepWrapper>\n        <Wrapper.Header title={renderTitle()} breadcrumb={breadcrumbs} />\n\n        <TitleContainer>\n          <div>{__('Title')}</div>\n          <FormControl\n            required={true}\n            onChange={onChange}\n            defaultValue={this.state.title}\n            autoFocus={true}\n          />\n          {this.renderSaveButton()}\n        </TitleContainer>\n\n        <Steps maxStep={maxStep} active={activeStep}>\n          <Step\n            img=\"/images/icons/erxes-02.svg\"\n            title=\"Who is this message for?\"\n          >\n            <ConditionsRule\n              rules={this.state.rules}\n              onChange={this.changeState}\n            />\n          </Step>\n\n          <Step\n            img=\"/images/icons/erxes-08.svg\"\n            title=\"Compose your message\"\n            noButton={true}\n          >\n            <MessengerForm\n              brands={brands}\n              onChange={this.changeState}\n              users={users}\n              messageKind={kind}\n              hasKind={false}\n              messenger={messenger || ({} as IEngageMessenger)}\n              fromUserId={fromUserId}\n              content={content}\n              scheduleDate={scheduleDate || ({} as IEngageScheduleDate)}\n            />\n          </Step>\n        </Steps>\n      </StepWrapper>\n    );\n  }\n}\n\nexport default VisitorForm;\n"]},"metadata":{},"sourceType":"module"}