{"ast":null,"code":"import _classCallCheck from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _taggedTemplateLiteral from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/home/anu-ujin/Works/open-source/erxes/ui/src/modules/settings/email/components/Config.tsx\";\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  margin-top: 20px;\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport Button from 'modules/common/components/Button';\nimport Form from 'modules/common/components/form/Form';\nimport Info from 'modules/common/components/Info';\nimport { Tabs, TabTitle } from 'modules/common/components/tabs';\nimport EditorCK from 'modules/common/containers/EditorCK';\nimport { ModalFooter } from 'modules/common/styles/main';\nimport { __ } from 'modules/common/utils';\nimport React from 'react';\nimport styled from 'styled-components';\nvar ContentWrapper = styled.div(_templateObject());\n\nvar Config =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Config, _React$Component);\n\n  function Config(props) {\n    var _this;\n\n    _classCallCheck(this, Config);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Config).call(this, props));\n\n    _this.onTabClick = function (currentTab) {\n      _this.setState({\n        currentTab: currentTab\n      });\n    };\n\n    _this.onEditorChange = function (e) {\n      _this.setState({\n        template: e.editor.getData()\n      });\n    };\n\n    _this.generateDoc = function (values) {\n      var brand = _this.props.brand;\n      var finalValues = values;\n\n      if (brand) {\n        finalValues._id = brand._id;\n      }\n\n      return {\n        _id: finalValues._id,\n        emailConfig: {\n          type: _this.state.currentTab,\n          template: _this.state.template\n        }\n      };\n    };\n\n    _this.renderContent = function (formProps) {\n      var _this$props = _this.props,\n          renderButton = _this$props.renderButton,\n          closeModal = _this$props.closeModal;\n      var currentTab = _this.state.currentTab;\n      var values = formProps.values,\n          isSubmitted = formProps.isSubmitted;\n\n      var simpleOnClick = function simpleOnClick() {\n        return _this.onTabClick('simple');\n      };\n\n      var customOnClick = function customOnClick() {\n        return _this.onTabClick('custom');\n      };\n\n      return React.createElement(React.Fragment, null, React.createElement(Tabs, {\n        full: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, React.createElement(TabTitle, {\n        className: currentTab === 'simple' ? 'active' : '',\n        onClick: simpleOnClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, __('Simple')), React.createElement(TabTitle, {\n        className: currentTab === 'custom' ? 'active' : '',\n        onClick: customOnClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, __('Custom'))), _this.templateControl(), React.createElement(ModalFooter, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, React.createElement(Button, {\n        btnStyle: \"simple\",\n        onClick: closeModal,\n        icon: \"cancel-1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, \"Cancel\"), renderButton({\n        name: 'email appearance',\n        values: _this.generateDoc(values),\n        isSubmitted: isSubmitted,\n        callback: closeModal\n      })));\n    };\n\n    var _props$brand$emailCon = props.brand.emailConfig,\n        template = _props$brand$emailCon.template,\n        type = _props$brand$emailCon.type;\n    _this.state = {\n      template: template || props.defaultTemplate,\n      currentTab: type || 'simple'\n    };\n    return _this;\n  }\n\n  _createClass(Config, [{\n    key: \"templateControl\",\n    value: function templateControl() {\n      var currentTab = this.state.currentTab;\n\n      if (currentTab === 'custom') {\n        return React.createElement(ContentWrapper, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 75\n          },\n          __self: this\n        }, React.createElement(EditorCK, {\n          content: this.state.template,\n          onChange: this.onEditorChange,\n          autoGrow: true,\n          name: \"email_config_\".concat(this.props.brand._id),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 76\n          },\n          __self: this\n        }));\n      }\n\n      return React.createElement(ContentWrapper, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, React.createElement(Info, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, __('Your email will be sent with Erxes email template') + '.'));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(Form, {\n        renderContent: this.renderContent,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return Config;\n}(React.Component);\n\nexport default Config;","map":{"version":3,"sources":["/home/anu-ujin/Works/open-source/erxes/ui/src/modules/settings/email/components/Config.tsx"],"names":["Button","Form","Info","Tabs","TabTitle","EditorCK","ModalFooter","__","React","styled","ContentWrapper","div","Config","props","onTabClick","currentTab","setState","onEditorChange","e","template","editor","getData","generateDoc","values","brand","finalValues","_id","emailConfig","type","state","renderContent","formProps","renderButton","closeModal","isSubmitted","simpleOnClick","customOnClick","templateControl","name","callback","defaultTemplate","Component"],"mappings":"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","sourcesContent":["import Button from 'modules/common/components/Button';\nimport Form from 'modules/common/components/form/Form';\nimport Info from 'modules/common/components/Info';\nimport { Tabs, TabTitle } from 'modules/common/components/tabs';\nimport EditorCK from 'modules/common/containers/EditorCK';\nimport { ModalFooter } from 'modules/common/styles/main';\nimport { IButtonMutateProps, IFormProps } from 'modules/common/types';\nimport { __ } from 'modules/common/utils';\nimport React from 'react';\nimport styled from 'styled-components';\nimport { IBrand } from '../../brands/types';\n\nconst ContentWrapper = styled.div`\n  margin-top: 20px;\n`;\n\ntype Props = {\n  brand: IBrand;\n  defaultTemplate: string;\n  closeModal: () => void;\n  renderButton: (props: IButtonMutateProps) => JSX.Element;\n};\n\ntype State = {\n  template: string;\n  currentTab: string;\n};\n\nclass Config extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    const { template, type } = props.brand.emailConfig;\n\n    this.state = {\n      template: template || props.defaultTemplate,\n      currentTab: type || 'simple'\n    };\n  }\n\n  onTabClick = currentTab => {\n    this.setState({ currentTab });\n  };\n\n  onEditorChange = e => {\n    this.setState({ template: e.editor.getData() });\n  };\n\n  generateDoc = (values: {\n    _id?: string;\n    currentTab: string;\n    template: string;\n  }) => {\n    const { brand } = this.props;\n    const finalValues = values;\n\n    if (brand) {\n      finalValues._id = brand._id;\n    }\n\n    return {\n      _id: finalValues._id,\n      emailConfig: {\n        type: this.state.currentTab,\n        template: this.state.template\n      }\n    };\n  };\n\n  templateControl() {\n    const { currentTab } = this.state;\n\n    if (currentTab === 'custom') {\n      return (\n        <ContentWrapper>\n          <EditorCK\n            content={this.state.template}\n            onChange={this.onEditorChange}\n            autoGrow={true}\n            name={`email_config_${this.props.brand._id}`}\n          />\n        </ContentWrapper>\n      );\n    }\n\n    return (\n      <ContentWrapper>\n        <Info>\n          {__('Your email will be sent with Erxes email template') + '.'}\n        </Info>\n      </ContentWrapper>\n    );\n  }\n\n  renderContent = (formProps: IFormProps) => {\n    const { renderButton, closeModal } = this.props;\n    const { currentTab } = this.state;\n    const { values, isSubmitted } = formProps;\n\n    const simpleOnClick = () => this.onTabClick('simple');\n    const customOnClick = () => this.onTabClick('custom');\n\n    return (\n      <>\n        <Tabs full={true}>\n          <TabTitle\n            className={currentTab === 'simple' ? 'active' : ''}\n            onClick={simpleOnClick}\n          >\n            {__('Simple')}\n          </TabTitle>\n          <TabTitle\n            className={currentTab === 'custom' ? 'active' : ''}\n            onClick={customOnClick}\n          >\n            {__('Custom')}\n          </TabTitle>\n        </Tabs>\n        {this.templateControl()}\n\n        <ModalFooter>\n          <Button btnStyle=\"simple\" onClick={closeModal} icon=\"cancel-1\">\n            Cancel\n          </Button>\n\n          {renderButton({\n            name: 'email appearance',\n            values: this.generateDoc(values),\n            isSubmitted,\n            callback: closeModal\n          })}\n        </ModalFooter>\n      </>\n    );\n  };\n\n  render() {\n    return <Form renderContent={this.renderContent} />;\n  }\n}\n\nexport default Config;\n"]},"metadata":{},"sourceType":"module"}