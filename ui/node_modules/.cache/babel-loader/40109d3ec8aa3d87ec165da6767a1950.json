{"ast":null,"code":"import _classCallCheck from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/anu-ujin/Works/open-source/erxes/ui/src/modules/settings/importHistory/containers/DataImporter.tsx\";\nimport { AppConsumer } from 'appContext';\nimport { Alert } from 'modules/common/utils';\nimport React from 'react';\nimport DataImporter from '../components/DataImporter';\nimport { handleXlsUpload } from '../utils';\n\nvar DataImporterContainer =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(DataImporterContainer, _React$Component);\n\n  function DataImporterContainer(props) {\n    var _this;\n\n    _classCallCheck(this, DataImporterContainer);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(DataImporterContainer).call(this, props));\n    _this.state = {\n      uploadingXls: false\n    };\n    return _this;\n  }\n\n  _createClass(DataImporterContainer, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          showLoadingBar = _this$props.showLoadingBar,\n          type = _this$props.type,\n          closeLoadingBar = _this$props.closeLoadingBar;\n\n      var uploadXls = function uploadXls(e) {\n        closeLoadingBar();\n        handleXlsUpload({\n          e: e,\n          type: type,\n          beforeUploadCallback: function beforeUploadCallback() {\n            _this2.setState({\n              uploadingXls: true\n            });\n          },\n          afterUploadCallback: function afterUploadCallback(response) {\n            _this2.setState({\n              uploadingXls: false\n            });\n\n            if (response.status === 'error') {\n              return Alert.error(response.message);\n            }\n\n            if (response.id) {\n              localStorage.setItem('erxes_import_data', response.id);\n              showLoadingBar();\n            }\n          }\n        });\n      };\n\n      return React.createElement(DataImporter, Object.assign({}, this.props, {\n        uploadXls: uploadXls,\n        uploading: this.state.uploadingXls,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return DataImporterContainer;\n}(React.Component);\n\nvar WithConsumer = function WithConsumer(props) {\n  return React.createElement(AppConsumer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, function (_ref) {\n    var showLoadingBar = _ref.showLoadingBar,\n        closeLoadingBar = _ref.closeLoadingBar;\n    return React.createElement(DataImporterContainer, Object.assign({}, props, {\n      showLoadingBar: showLoadingBar,\n      closeLoadingBar: closeLoadingBar,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }));\n  });\n};\n\nexport default WithConsumer;","map":{"version":3,"sources":["/home/anu-ujin/Works/open-source/erxes/ui/src/modules/settings/importHistory/containers/DataImporter.tsx"],"names":["AppConsumer","Alert","React","DataImporter","handleXlsUpload","DataImporterContainer","props","state","uploadingXls","showLoadingBar","type","closeLoadingBar","uploadXls","e","beforeUploadCallback","setState","afterUploadCallback","response","status","error","message","id","localStorage","setItem","Component","WithConsumer"],"mappings":";;;;;;AAAA,SAASA,WAAT,QAA4B,YAA5B;AACA,SAASC,KAAT,QAAsB,sBAAtB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,YAAP,MAAyB,4BAAzB;AACA,SAASC,eAAT,QAAgC,UAAhC;;IAaMC,qB;;;;;AACJ,iCAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,+FAAMA,KAAN;AAEA,UAAKC,KAAL,GAAa;AACXC,MAAAA,YAAY,EAAE;AADH,KAAb;AAHiB;AAMlB;;;;6BAEQ;AAAA;;AAAA,wBAC2C,KAAKF,KADhD;AAAA,UACCG,cADD,eACCA,cADD;AAAA,UACiBC,IADjB,eACiBA,IADjB;AAAA,UACuBC,eADvB,eACuBA,eADvB;;AAGP,UAAMC,SAAS,GAAG,SAAZA,SAAY,CAAAC,CAAC,EAAI;AACrBF,QAAAA,eAAe;AAEfP,QAAAA,eAAe,CAAC;AACdS,UAAAA,CAAC,EAADA,CADc;AAEdH,UAAAA,IAAI,EAAJA,IAFc;AAGdI,UAAAA,oBAAoB,EAAE,gCAAM;AAC1B,YAAA,MAAI,CAACC,QAAL,CAAc;AAAEP,cAAAA,YAAY,EAAE;AAAhB,aAAd;AACD,WALa;AAMdQ,UAAAA,mBAAmB,EAAE,6BAAAC,QAAQ,EAAI;AAC/B,YAAA,MAAI,CAACF,QAAL,CAAc;AAAEP,cAAAA,YAAY,EAAE;AAAhB,aAAd;;AAEA,gBAAIS,QAAQ,CAACC,MAAT,KAAoB,OAAxB,EAAiC;AAC/B,qBAAOjB,KAAK,CAACkB,KAAN,CAAYF,QAAQ,CAACG,OAArB,CAAP;AACD;;AAED,gBAAIH,QAAQ,CAACI,EAAb,EAAiB;AACfC,cAAAA,YAAY,CAACC,OAAb,CAAqB,mBAArB,EAA0CN,QAAQ,CAACI,EAAnD;AACAZ,cAAAA,cAAc;AACf;AACF;AAjBa,SAAD,CAAf;AAmBD,OAtBD;;AAwBA,aACE,oBAAC,YAAD,oBACM,KAAKH,KADX;AAEE,QAAA,SAAS,EAAEM,SAFb;AAGE,QAAA,SAAS,EAAE,KAAKL,KAAL,CAAWC,YAHxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SADF;AAOD;;;;EA3CiCN,KAAK,CAACsB,S;;AA8C1C,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAAAnB,KAAK,EAAI;AAC5B,SACE,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG;AAAA,QAAGG,cAAH,QAAGA,cAAH;AAAA,QAAmBE,eAAnB,QAAmBA,eAAnB;AAAA,WACC,oBAAC,qBAAD,oBACML,KADN;AAEE,MAAA,cAAc,EAAEG,cAFlB;AAGE,MAAA,eAAe,EAAEE,eAHnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OADD;AAAA,GADH,CADF;AAWD,CAZD;;AAcA,eAAec,YAAf","sourcesContent":["import { AppConsumer } from 'appContext';\nimport { Alert } from 'modules/common/utils';\nimport React from 'react';\nimport DataImporter from '../components/DataImporter';\nimport { handleXlsUpload } from '../utils';\n\ntype Props = {\n  showLoadingBar: () => void;\n  closeLoadingBar: () => void;\n  type: string;\n  text: string;\n};\n\ntype State = {\n  uploadingXls: boolean;\n};\n\nclass DataImporterContainer extends React.Component<Props, State> {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      uploadingXls: false\n    };\n  }\n\n  render() {\n    const { showLoadingBar, type, closeLoadingBar } = this.props;\n\n    const uploadXls = e => {\n      closeLoadingBar();\n\n      handleXlsUpload({\n        e,\n        type,\n        beforeUploadCallback: () => {\n          this.setState({ uploadingXls: true });\n        },\n        afterUploadCallback: response => {\n          this.setState({ uploadingXls: false });\n\n          if (response.status === 'error') {\n            return Alert.error(response.message);\n          }\n\n          if (response.id) {\n            localStorage.setItem('erxes_import_data', response.id);\n            showLoadingBar();\n          }\n        }\n      });\n    };\n\n    return (\n      <DataImporter\n        {...this.props}\n        uploadXls={uploadXls}\n        uploading={this.state.uploadingXls}\n      />\n    );\n  }\n}\n\nconst WithConsumer = props => {\n  return (\n    <AppConsumer>\n      {({ showLoadingBar, closeLoadingBar }) => (\n        <DataImporterContainer\n          {...props}\n          showLoadingBar={showLoadingBar}\n          closeLoadingBar={closeLoadingBar}\n        />\n      )}\n    </AppConsumer>\n  );\n};\n\nexport default WithConsumer;\n"]},"metadata":{},"sourceType":"module"}