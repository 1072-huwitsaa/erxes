{"ast":null,"code":"import _objectSpread from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/anu-ujin/Works/open-source/erxes/ui/src/modules/engage/components/Scheduler.tsx\";\nimport FormControl from 'modules/common/components/form/Control';\nimport FormGroup from 'modules/common/components/form/Group';\nimport ControlLabel from 'modules/common/components/form/Label';\nimport { __ } from 'modules/common/utils';\nimport { SCHEDULE_TYPES } from 'modules/engage/constants';\nimport React from 'react';\nimport { SelectMonth } from '../styles';\n\nvar Scheduler =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Scheduler, _React$Component);\n\n  function Scheduler(props) {\n    var _this;\n\n    _classCallCheck(this, Scheduler);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Scheduler).call(this, props));\n\n    _this.changeSchedule = function (key, value) {\n      var scheduleDate = _this.state.scheduleDate ? _objectSpread({}, _this.state.scheduleDate) : null;\n\n      if (key === 'type' && !value) {\n        scheduleDate = null;\n      }\n\n      if (scheduleDate) {\n        scheduleDate[key] = value;\n      }\n\n      _this.setState({\n        scheduleDate: scheduleDate\n      });\n\n      _this.props.onChange('scheduleDate', scheduleDate);\n    };\n\n    _this.state = {\n      scheduleDate: props.scheduleDate\n    };\n    return _this;\n  }\n\n  _createClass(Scheduler, [{\n    key: \"generateOptions\",\n    value: function generateOptions(length) {\n      var options = [];\n\n      for (var i = 1; i <= length; i++) {\n        options.push(React.createElement(\"option\", {\n          key: i,\n          value: i,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 49\n          },\n          __self: this\n        }, i));\n      }\n\n      return options;\n    }\n  }, {\n    key: \"renderMonthSelector\",\n    value: function renderMonthSelector() {\n      var _this2 = this;\n\n      var _ref = this.state.scheduleDate || {\n        type: '',\n        month: ''\n      },\n          type = _ref.type,\n          month = _ref.month;\n\n      if (type !== 'year') {\n        return null;\n      }\n\n      var onChange = function onChange(e) {\n        return _this2.changeSchedule('month', e.target.value);\n      };\n\n      return React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, React.createElement(ControlLabel, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, \"Choose month:\"), React.createElement(FormControl, {\n        componentClass: \"select\",\n        value: month,\n        onChange: onChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }), \" \", this.generateOptions(12)));\n    }\n  }, {\n    key: \"renderDaySelector\",\n    value: function renderDaySelector() {\n      var _this3 = this;\n\n      var _ref2 = this.state.scheduleDate || {\n        type: '',\n        day: ''\n      },\n          type = _ref2.type,\n          day = _ref2.day;\n\n      if (type !== 'year' && type !== 'month') {\n        return null;\n      }\n\n      var onChange = function onChange(e) {\n        return _this3.changeSchedule('day', e.target.value);\n      };\n\n      return React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(ControlLabel, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, \"Choose day:\"), React.createElement(FormControl, {\n        componentClass: \"select\",\n        value: day,\n        onChange: onChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }), \" \", this.generateOptions(31)));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var _ref3 = this.state.scheduleDate || {\n        type: ''\n      },\n          type = _ref3.type;\n\n      var onChange = function onChange(e) {\n        return _this4.changeSchedule('type', e.target.value);\n      };\n\n      return React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, React.createElement(ControlLabel, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, \"Schedule:\"), React.createElement(FormControl, {\n        componentClass: \"select\",\n        value: type,\n        onChange: onChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }), ' ', SCHEDULE_TYPES.map(function (scheduleType) {\n        return React.createElement(\"option\", {\n          key: scheduleType.value,\n          value: scheduleType.value,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110\n          },\n          __self: this\n        }, __(scheduleType.label));\n      })), React.createElement(SelectMonth, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, this.renderMonthSelector(), this.renderDaySelector()));\n    }\n  }]);\n\n  return Scheduler;\n}(React.Component);\n\nexport default Scheduler;","map":{"version":3,"sources":["/home/anu-ujin/Works/open-source/erxes/ui/src/modules/engage/components/Scheduler.tsx"],"names":["FormControl","FormGroup","ControlLabel","__","SCHEDULE_TYPES","React","SelectMonth","Scheduler","props","changeSchedule","key","value","scheduleDate","state","setState","onChange","length","options","i","push","type","month","e","target","generateOptions","day","map","scheduleType","label","renderMonthSelector","renderDaySelector","Component"],"mappings":"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","sourcesContent":["import FormControl from 'modules/common/components/form/Control';\nimport FormGroup from 'modules/common/components/form/Group';\nimport ControlLabel from 'modules/common/components/form/Label';\nimport { __ } from 'modules/common/utils';\nimport { SCHEDULE_TYPES } from 'modules/engage/constants';\nimport React from 'react';\nimport { SelectMonth } from '../styles';\nimport { IEngageScheduleDate } from '../types';\n\ntype Props = {\n  scheduleDate: IEngageScheduleDate;\n  onChange: (name: 'scheduleDate', value?: IEngageScheduleDate) => void;\n};\n\ntype State = {\n  scheduleDate: IEngageScheduleDate;\n};\n\nclass Scheduler extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    this.state = { scheduleDate: props.scheduleDate };\n  }\n\n  changeSchedule = (key, value) => {\n    let scheduleDate = this.state.scheduleDate\n      ? { ...this.state.scheduleDate }\n      : null;\n\n    if (key === 'type' && !value) {\n      scheduleDate = null;\n    }\n\n    if (scheduleDate) {\n      scheduleDate[key] = value;\n    }\n\n    this.setState({ scheduleDate });\n\n    this.props.onChange('scheduleDate', scheduleDate);\n  };\n\n  generateOptions(length) {\n    const options: React.ReactNode[] = [];\n\n    for (let i = 1; i <= length; i++) {\n      options.push(\n        <option key={i} value={i}>\n          {i}\n        </option>\n      );\n    }\n\n    return options;\n  }\n\n  renderMonthSelector() {\n    const { type, month } = this.state.scheduleDate || { type: '', month: '' };\n\n    if (type !== 'year') {\n      return null;\n    }\n\n    const onChange = e =>\n      this.changeSchedule('month', (e.target as HTMLInputElement).value);\n\n    return (\n      <React.Fragment>\n        <ControlLabel>Choose month:</ControlLabel>\n        <FormControl componentClass=\"select\" value={month} onChange={onChange}>\n          <option /> {this.generateOptions(12)}\n        </FormControl>\n      </React.Fragment>\n    );\n  }\n\n  renderDaySelector() {\n    const { type, day } = this.state.scheduleDate || { type: '', day: '' };\n\n    if (type !== 'year' && type !== 'month') {\n      return null;\n    }\n\n    const onChange = e =>\n      this.changeSchedule('day', (e.target as HTMLInputElement).value);\n\n    return (\n      <React.Fragment>\n        <ControlLabel>Choose day:</ControlLabel>\n        <FormControl componentClass=\"select\" value={day} onChange={onChange}>\n          <option /> {this.generateOptions(31)}\n        </FormControl>\n      </React.Fragment>\n    );\n  }\n\n  render() {\n    const { type } = this.state.scheduleDate || { type: '' };\n\n    const onChange = e =>\n      this.changeSchedule('type', (e.target as HTMLInputElement).value);\n\n    return (\n      <FormGroup>\n        <ControlLabel>Schedule:</ControlLabel>\n        <FormControl componentClass=\"select\" value={type} onChange={onChange}>\n          <option />{' '}\n          {SCHEDULE_TYPES.map(scheduleType => (\n            <option key={scheduleType.value} value={scheduleType.value}>\n              {__(scheduleType.label)}\n            </option>\n          ))}\n        </FormControl>\n\n        <SelectMonth>\n          {this.renderMonthSelector()}\n          {this.renderDaySelector()}\n        </SelectMonth>\n      </FormGroup>\n    );\n  }\n}\n\nexport default Scheduler;\n"]},"metadata":{},"sourceType":"module"}