{"ast":null,"code":"import _toConsumableArray from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/anu-ujin/Works/open-source/erxes/ui/src/modules/engage/components/Targets.tsx\";\nimport EmptyState from 'modules/common/components/EmptyState';\nimport { SidebarCounter, SidebarList } from 'modules/layout/styles';\nimport React from 'react';\nimport { ListCounter, ListWrapper } from '../styles';\n\nvar Targets =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Targets, _React$Component);\n\n  function Targets(props) {\n    var _this;\n\n    _classCallCheck(this, Targets);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Targets).call(this, props));\n\n    _this.onClick = function (name, targetId) {\n      var selectedIds = _this.state.selectedIds;\n\n      if (!selectedIds.includes(targetId)) {\n        var updatedIds = [].concat(_toConsumableArray(selectedIds), [targetId]);\n\n        _this.setState({\n          selectedIds: updatedIds\n        }, function () {\n          _this.props.onChangeStep(name, updatedIds);\n        });\n      } else {\n        var filteredIds = selectedIds.filter(function (target) {\n          return target !== targetId;\n        });\n\n        _this.setState({\n          selectedIds: filteredIds\n        }, function () {\n          _this.props.onChangeStep(name, filteredIds);\n        });\n      }\n    };\n\n    _this.state = {\n      selectedIds: []\n    };\n    return _this;\n  }\n\n  _createClass(Targets, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var defaultValues = this.props.defaultValues;\n\n      if (defaultValues !== []) {\n        this.setState({\n          selectedIds: defaultValues\n        });\n      }\n    }\n  }, {\n    key: \"renderTarget\",\n    value: function renderTarget(targets) {\n      var _this2 = this;\n\n      var selectedIds = this.state.selectedIds;\n      var _this$props = this.props,\n          targetCount = _this$props.targetCount,\n          messageType = _this$props.messageType,\n          name = _this$props.name,\n          icons = _this$props.icons;\n\n      if (targets.length === 0) {\n        return React.createElement(EmptyState, {\n          icon: \"piechart\",\n          text: \"No \".concat(messageType),\n          size: \"small\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62\n          },\n          __self: this\n        });\n      }\n\n      return targets.map(function (target, index) {\n        var _target$_id = target._id,\n            _id = _target$_id === void 0 ? '' : _target$_id;\n\n        return React.createElement(ListCounter, {\n          key: _id,\n          chosen: selectedIds.includes(_id),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 70\n          },\n          __self: this\n        }, React.createElement(\"a\", {\n          href: \"#counter\",\n          tabIndex: 0,\n          onClick: _this2.onClick.bind(_this2, name, _id),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 71\n          },\n          __self: this\n        }, icons && icons[index], target.name, React.createElement(SidebarCounter, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 78\n          },\n          __self: this\n        }, targetCount[_id] || 0)));\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var targets = this.props.targets;\n      return React.createElement(ListWrapper, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(SidebarList, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, this.renderTarget(targets)));\n    }\n  }]);\n\n  return Targets;\n}(React.Component);\n\nexport default Targets;","map":{"version":3,"sources":["/home/anu-ujin/Works/open-source/erxes/ui/src/modules/engage/components/Targets.tsx"],"names":["EmptyState","SidebarCounter","SidebarList","React","ListCounter","ListWrapper","Targets","props","onClick","name","targetId","selectedIds","state","includes","updatedIds","setState","onChangeStep","filteredIds","filter","target","defaultValues","targets","targetCount","messageType","icons","length","map","index","_id","bind","renderTarget","Component"],"mappings":"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","sourcesContent":["import EmptyState from 'modules/common/components/EmptyState';\nimport { SidebarCounter, SidebarList } from 'modules/layout/styles';\nimport React from 'react';\nimport { ListCounter, ListWrapper } from '../styles';\nimport { TargetCount } from '../types';\n\ntype Props<Target> = {\n  messageType: string;\n  targets: Target[];\n  name: string;\n  targetCount: TargetCount;\n  defaultValues: string[];\n  onChangeStep: (name: string, targetIds: string[]) => void;\n  icons?: React.ReactNode[];\n};\n\ntype State = {\n  selectedIds: string[];\n};\n\nclass Targets<\n  Target extends { _id?: string; name?: string }\n> extends React.Component<Props<Target>, State> {\n  constructor(props) {\n    super(props);\n\n    this.state = { selectedIds: [] };\n  }\n\n  componentDidMount() {\n    const { defaultValues } = this.props;\n\n    if (defaultValues !== []) {\n      this.setState({ selectedIds: defaultValues });\n    }\n  }\n\n  onClick = (name: string, targetId: string) => {\n    const { selectedIds } = this.state;\n\n    if (!selectedIds.includes(targetId)) {\n      const updatedIds = [...selectedIds, targetId];\n\n      this.setState({ selectedIds: updatedIds }, () => {\n        this.props.onChangeStep(name, updatedIds);\n      });\n    } else {\n      const filteredIds = selectedIds.filter(target => target !== targetId);\n\n      this.setState({ selectedIds: filteredIds }, () => {\n        this.props.onChangeStep(name, filteredIds);\n      });\n    }\n  };\n\n  renderTarget(targets: Target[]) {\n    const { selectedIds } = this.state;\n    const { targetCount, messageType, name, icons } = this.props;\n\n    if (targets.length === 0) {\n      return (\n        <EmptyState icon=\"piechart\" text={`No ${messageType}`} size=\"small\" />\n      );\n    }\n\n    return targets.map((target, index) => {\n      const { _id = '' } = target;\n\n      return (\n        <ListCounter key={_id} chosen={selectedIds.includes(_id)}>\n          <a\n            href=\"#counter\"\n            tabIndex={0}\n            onClick={this.onClick.bind(this, name, _id)}\n          >\n            {icons && icons[index]}\n            {target.name}\n            <SidebarCounter>{targetCount[_id] || 0}</SidebarCounter>\n          </a>\n        </ListCounter>\n      );\n    });\n  }\n\n  render() {\n    const { targets } = this.props;\n\n    return (\n      <ListWrapper>\n        <SidebarList>{this.renderTarget(targets)}</SidebarList>\n      </ListWrapper>\n    );\n  }\n}\n\nexport default Targets;\n"]},"metadata":{},"sourceType":"module"}