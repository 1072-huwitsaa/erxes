{"ast":null,"code":"import _classCallCheck from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _taggedTemplateLiteral from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/home/anu-ujin/Works/open-source/erxes/ui/src/modules/common/components/SortHandler.tsx\";\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: row;\\n  position: relative;\\n  cursor: pointer;\\n\\n  .arrow {\\n    position: absolute;\\n    left: -13px;\\n    border-right: 4px solid transparent;\\n    border-left: 4px solid transparent;\\n\\n    &.up {\\n      border-bottom: 5px solid #bbb;\\n      top: 2px;\\n\\n      &.active {\\n        border-bottom-color: \", \";\\n      }\\n    }\\n\\n    &.down {\\n      border-top: 5px solid #bbb;\\n      top: 9px;\\n\\n      &.active {\\n        border-top-color: \", \";\\n      }\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport { colors } from 'modules/common/styles';\nimport { router } from 'modules/common/utils';\nimport React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport styled from 'styled-components';\nvar SortWrapper = styled.div(_templateObject(), colors.colorSecondary, colors.colorSecondary);\n\nvar SortHandler =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(SortHandler, _React$Component);\n\n  function SortHandler(props) {\n    var _this;\n\n    _classCallCheck(this, SortHandler);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SortHandler).call(this, props));\n\n    _this.onClickSort = function () {\n      var _this$props = _this.props,\n          sortField = _this$props.sortField,\n          history = _this$props.history;\n      var sortValue = _this.state.sortValue;\n\n      if (!sortValue) {\n        _this.setState({\n          sortValue: -1\n        });\n\n        return _this.sortHandle(sortField, -1);\n      }\n\n      if (sortValue < 0) {\n        _this.setState({\n          sortValue: 1\n        });\n\n        return _this.sortHandle(sortField, 1);\n      }\n\n      _this.setState({\n        sortValue: ''\n      });\n\n      return router.removeParams(history, 'sortDirection', 'sortField');\n    };\n\n    var _history = props.history;\n\n    var _sortValue = router.getParam(_history, 'sortDirection');\n\n    _this.state = {\n      sortValue: _sortValue\n    };\n    return _this;\n  }\n\n  _createClass(SortHandler, [{\n    key: \"sortHandle\",\n    value: function sortHandle(field, direction) {\n      var history = this.props.history;\n      router.setParams(history, {\n        sortField: field,\n        sortDirection: direction\n      });\n    }\n  }, {\n    key: \"checkSortActive\",\n    value: function checkSortActive(name, direction) {\n      var history = this.props.history;\n\n      if (router.getParam(history, 'sortField') === name && router.getParam(history, 'sortDirection') === direction.toString()) {\n        return 'active';\n      }\n\n      return '';\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          sortField = _this$props2.sortField,\n          label = _this$props2.label;\n      return React.createElement(SortWrapper, {\n        onClick: this.onClickSort,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"arrow up \".concat(this.checkSortActive(sortField, -1)),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        className: \"arrow down \".concat(this.checkSortActive(sortField, 1)),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      })), label);\n    }\n  }]);\n\n  return SortHandler;\n}(React.Component);\n\nexport default withRouter(SortHandler);","map":{"version":3,"sources":["/home/anu-ujin/Works/open-source/erxes/ui/src/modules/common/components/SortHandler.tsx"],"names":["colors","router","React","withRouter","styled","SortWrapper","div","colorSecondary","SortHandler","props","onClickSort","sortField","history","sortValue","state","setState","sortHandle","removeParams","getParam","field","direction","setParams","sortDirection","name","toString","label","checkSortActive","Component"],"mappings":"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","sourcesContent":["import { colors } from 'modules/common/styles';\nimport { IRouterProps } from 'modules/common/types';\nimport { router } from 'modules/common/utils';\nimport React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport styled from 'styled-components';\n\nconst SortWrapper = styled.div`\n  display: flex;\n  flex-direction: row;\n  position: relative;\n  cursor: pointer;\n\n  .arrow {\n    position: absolute;\n    left: -13px;\n    border-right: 4px solid transparent;\n    border-left: 4px solid transparent;\n\n    &.up {\n      border-bottom: 5px solid #bbb;\n      top: 2px;\n\n      &.active {\n        border-bottom-color: ${colors.colorSecondary};\n      }\n    }\n\n    &.down {\n      border-top: 5px solid #bbb;\n      top: 9px;\n\n      &.active {\n        border-top-color: ${colors.colorSecondary};\n      }\n    }\n  }\n`;\n\ninterface IProps extends IRouterProps {\n  sortField?: string;\n  label?: string;\n}\n\ntype State = {\n  sortValue: string | number;\n};\n\nclass SortHandler extends React.Component<IProps, State> {\n  constructor(props) {\n    super(props);\n    const { history } = props;\n    const sortValue = router.getParam(history, 'sortDirection');\n\n    this.state = { sortValue };\n  }\n\n  sortHandle(field, direction) {\n    const { history } = this.props;\n\n    router.setParams(history, { sortField: field, sortDirection: direction });\n  }\n\n  checkSortActive(name, direction) {\n    const { history } = this.props;\n\n    if (\n      router.getParam(history, 'sortField') === name &&\n      router.getParam(history, 'sortDirection') === direction.toString()\n    ) {\n      return 'active';\n    }\n\n    return '';\n  }\n\n  onClickSort = () => {\n    const { sortField, history } = this.props;\n    const { sortValue } = this.state;\n\n    if (!sortValue) {\n      this.setState({ sortValue: -1 });\n\n      return this.sortHandle(sortField, -1);\n    }\n\n    if (sortValue < 0) {\n      this.setState({ sortValue: 1 });\n\n      return this.sortHandle(sortField, 1);\n    }\n\n    this.setState({ sortValue: '' });\n\n    return router.removeParams(history, 'sortDirection', 'sortField');\n  };\n\n  render() {\n    const { sortField, label } = this.props;\n\n    return (\n      <SortWrapper onClick={this.onClickSort}>\n        <div>\n          <span className={`arrow up ${this.checkSortActive(sortField, -1)}`} />\n          <span\n            className={`arrow down ${this.checkSortActive(sortField, 1)}`}\n          />\n        </div>\n        {label}\n      </SortWrapper>\n    );\n  }\n}\n\nexport default withRouter<IProps>(SortHandler);\n"]},"metadata":{},"sourceType":"module"}