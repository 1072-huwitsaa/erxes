{"ast":null,"code":"import _classCallCheck from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _taggedTemplateLiteral from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/home/anu-ujin/Works/open-source/erxes/ui/src/modules/common/components/ImageWithPreview.tsx\";\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  cursor: zoom-in;\\n  transition: all 0.3s;\\n\\n  &:hover {\\n    opacity: 0.8;\\n  }\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  position: fixed;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  top: 0;\\n  background: rgba(48, 67, 92, 0.8);\\n  z-index: 1000;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  transition: all 0.3s;\\n  z-index: 50000;\\n  animation-name: \", \";\\n  animation-duration: 0.3s;\\n  animation-timing-function: ease;\\n  cursor: zoom-out;\\n\\n  img {\\n    width: auto;\\n    max-width: 80%;\\n    max-height: 80%;\\n    max-height: 80vh;\\n    box-shadow: 0 2px 10px -3px rgba(0, 0, 0, 0.5);\\n    transition: max-width 0.1s ease, max-height 0.1s ease;\\n    animation-name: \", \";\\n    animation-duration: 0.3s;\\n    animation-timing-function: ease;\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport { fadeIn, slideDown } from 'modules/common/utils/animations';\nimport React from 'react';\nimport styled from 'styled-components';\nimport { readFile } from '../utils';\nimport CommonPortal from './CommonPortal';\nvar PreviewWrapper = styled.div(_templateObject(), fadeIn, slideDown);\nvar Image = styled.img(_templateObject2());\nvar KEYCODES = {\n  ESCAPE: 27\n};\n\nvar ImageWithPreview =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ImageWithPreview, _React$Component);\n\n  function ImageWithPreview() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ImageWithPreview);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ImageWithPreview)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      visible: false\n    };\n\n    _this.toggleImage = function () {\n      _this.setState({\n        visible: !_this.state.visible\n      });\n    };\n\n    _this.handleKeydown = function (e) {\n      if (e.keyCode === KEYCODES.ESCAPE && _this.state.visible) {\n        _this.setState({\n          visible: false\n        });\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(ImageWithPreview, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      document.addEventListener('keydown', this.handleKeydown);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      document.removeEventListener('keydown', this.handleKeydown);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          src = _this$props.src,\n          alt = _this$props.alt,\n          onLoad = _this$props.onLoad;\n      return React.createElement(React.Fragment, null, React.createElement(Image, Object.assign({}, this.props, {\n        src: readFile(src || ''),\n        onLoad: onLoad,\n        onClick: this.toggleImage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      })), this.state.visible && React.createElement(CommonPortal, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, React.createElement(PreviewWrapper, {\n        onClick: this.toggleImage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        alt: alt,\n        src: readFile(src || ''),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return ImageWithPreview;\n}(React.Component);\n\nexport default ImageWithPreview;","map":{"version":3,"sources":["/home/anu-ujin/Works/open-source/erxes/ui/src/modules/common/components/ImageWithPreview.tsx"],"names":["fadeIn","slideDown","React","styled","readFile","CommonPortal","PreviewWrapper","div","Image","img","KEYCODES","ESCAPE","ImageWithPreview","state","visible","toggleImage","setState","handleKeydown","e","keyCode","document","addEventListener","removeEventListener","props","src","alt","onLoad","Component"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,SAASA,MAAT,EAAiBC,SAAjB,QAAkC,iCAAlC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,SAASC,QAAT,QAAyB,UAAzB;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AAEA,IAAMC,cAAc,GAAGH,MAAM,CAACI,GAAV,oBAaAP,MAbA,EAyBEC,SAzBF,CAApB;AA+BA,IAAMO,KAAK,GAAGL,MAAM,CAACM,GAAV,oBAAX;AASA,IAAMC,QAAQ,GAAG;AACfC,EAAAA,MAAM,EAAE;AADO,CAAjB;;IAeMC,gB;;;;;;;;;;;;;;;;;UACJC,K,GAAQ;AAAEC,MAAAA,OAAO,EAAE;AAAX,K;;UAERC,W,GAAc,YAAM;AAClB,YAAKC,QAAL,CAAc;AAAEF,QAAAA,OAAO,EAAE,CAAC,MAAKD,KAAL,CAAWC;AAAvB,OAAd;AACD,K;;UAUDG,a,GAAgB,UAAAC,CAAC,EAAI;AACnB,UAAIA,CAAC,CAACC,OAAF,KAAcT,QAAQ,CAACC,MAAvB,IAAiC,MAAKE,KAAL,CAAWC,OAAhD,EAAyD;AACvD,cAAKE,QAAL,CAAc;AAAEF,UAAAA,OAAO,EAAE;AAAX,SAAd;AACD;AACF,K;;;;;;;wCAZmB;AAClBM,MAAAA,QAAQ,CAACC,gBAAT,CAA0B,SAA1B,EAAqC,KAAKJ,aAA1C;AACD;;;2CAEsB;AACrBG,MAAAA,QAAQ,CAACE,mBAAT,CAA6B,SAA7B,EAAwC,KAAKL,aAA7C;AACD;;;6BAQQ;AAAA,wBACsB,KAAKM,KAD3B;AAAA,UACCC,GADD,eACCA,GADD;AAAA,UACMC,GADN,eACMA,GADN;AAAA,UACWC,MADX,eACWA,MADX;AAGP,aACE,0CACE,oBAAC,KAAD,oBACM,KAAKH,KADX;AAEE,QAAA,GAAG,EAAEnB,QAAQ,CAACoB,GAAG,IAAI,EAAR,CAFf;AAGE,QAAA,MAAM,EAAEE,MAHV;AAIE,QAAA,OAAO,EAAE,KAAKX,WAJhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SADF,EAOG,KAAKF,KAAL,CAAWC,OAAX,IACC,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,cAAD;AAAgB,QAAA,OAAO,EAAE,KAAKC,WAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,GAAG,EAAEU,GAAV;AAAe,QAAA,GAAG,EAAErB,QAAQ,CAACoB,GAAG,IAAI,EAAR,CAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADF,CARJ,CADF;AAiBD;;;;EAzC4BtB,KAAK,CAACyB,S;;AA4CrC,eAAef,gBAAf","sourcesContent":["import { fadeIn, slideDown } from 'modules/common/utils/animations';\nimport React from 'react';\nimport styled from 'styled-components';\nimport { readFile } from '../utils';\nimport CommonPortal from './CommonPortal';\n\nconst PreviewWrapper = styled.div`\n  position: fixed;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  top: 0;\n  background: rgba(48, 67, 92, 0.8);\n  z-index: 1000;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  transition: all 0.3s;\n  z-index: 50000;\n  animation-name: ${fadeIn};\n  animation-duration: 0.3s;\n  animation-timing-function: ease;\n  cursor: zoom-out;\n\n  img {\n    width: auto;\n    max-width: 80%;\n    max-height: 80%;\n    max-height: 80vh;\n    box-shadow: 0 2px 10px -3px rgba(0, 0, 0, 0.5);\n    transition: max-width 0.1s ease, max-height 0.1s ease;\n    animation-name: ${slideDown};\n    animation-duration: 0.3s;\n    animation-timing-function: ease;\n  }\n`;\n\nconst Image = styled.img`\n  cursor: zoom-in;\n  transition: all 0.3s;\n\n  &:hover {\n    opacity: 0.8;\n  }\n`;\n\nconst KEYCODES = {\n  ESCAPE: 27\n};\n\ntype Props = {\n  src?: string;\n  alt?: string;\n  onLoad?: () => void;\n  full?: boolean;\n};\n\ntype State = {\n  visible: boolean;\n};\n\nclass ImageWithPreview extends React.Component<Props, State> {\n  state = { visible: false };\n\n  toggleImage = () => {\n    this.setState({ visible: !this.state.visible });\n  };\n\n  componentDidMount() {\n    document.addEventListener('keydown', this.handleKeydown);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('keydown', this.handleKeydown);\n  }\n\n  handleKeydown = e => {\n    if (e.keyCode === KEYCODES.ESCAPE && this.state.visible) {\n      this.setState({ visible: false });\n    }\n  };\n\n  render() {\n    const { src, alt, onLoad } = this.props;\n\n    return (\n      <>\n        <Image\n          {...this.props}\n          src={readFile(src || '')}\n          onLoad={onLoad}\n          onClick={this.toggleImage}\n        />\n        {this.state.visible && (\n          <CommonPortal>\n            <PreviewWrapper onClick={this.toggleImage}>\n              <img alt={alt} src={readFile(src || '')} />\n            </PreviewWrapper>\n          </CommonPortal>\n        )}\n      </>\n    );\n  }\n}\n\nexport default ImageWithPreview;\n"]},"metadata":{},"sourceType":"module"}