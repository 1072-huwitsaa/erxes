{"ast":null,"code":"import _classCallCheck from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/anu-ujin/Works/open-source/erxes/ui/src/modules/boards/components/portable/Items.tsx\";\nimport { ItemsWrapper } from 'modules/boards/styles/item';\nimport Box from 'modules/common/components/Box';\nimport EmptyState from 'modules/common/components/EmptyState';\nimport Icon from 'erxes-common-ui/lib/components/icon';\nimport ModalTrigger from 'modules/common/components/ModalTrigger';\nimport { ButtonRelated } from 'modules/common/styles/main';\nimport { __ } from 'modules/common/utils';\nimport React from 'react';\nimport { ItemChooser } from '../../containers/portable/';\n\nvar Items =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Items, _React$Component);\n\n  function Items(props) {\n    var _this;\n\n    _classCallCheck(this, Items);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Items).call(this, props));\n\n    _this.onItemClick = function (item) {\n      _this.setState({\n        openItemId: item._id\n      });\n    };\n\n    _this.beforePopupClose = function () {\n      _this.setState({\n        openItemId: ''\n      });\n    };\n\n    _this.renderItems = function () {\n      var openItemId = _this.state.openItemId;\n      var _this$props = _this.props,\n          onChangeItem = _this$props.onChangeItem,\n          items = _this$props.items,\n          data = _this$props.data;\n\n      if (items.length === 0) {\n        return React.createElement(EmptyState, {\n          icon: \"folder-2\",\n          text: \"No \".concat(data.options.type),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 46\n          },\n          __self: this\n        });\n      }\n\n      var Item = data.options.Item;\n      return React.createElement(ItemsWrapper, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }, items.map(function (item, index) {\n        return React.createElement(Item, {\n          options: data.options,\n          key: index,\n          item: item,\n          beforePopupClose: _this.beforePopupClose,\n          isFormVisible: item._id === openItemId,\n          onClick: _this.onItemClick.bind(_assertThisInitialized(_this), item),\n          onAdd: onChangeItem,\n          onUpdate: onChangeItem,\n          onRemove: onChangeItem,\n          portable: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 54\n          },\n          __self: this\n        });\n      }));\n    };\n\n    _this.state = {\n      openItemId: ''\n    };\n    return _this;\n  }\n\n  _createClass(Items, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          mainType = _this$props2.mainType,\n          mainTypeId = _this$props2.mainTypeId,\n          data = _this$props2.data,\n          onChangeItem = _this$props2.onChangeItem,\n          items = _this$props2.items,\n          relType = _this$props2.relType;\n      var trigger = React.createElement(\"button\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        icon: \"plus-circle\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }));\n      var relTrigger = React.createElement(ButtonRelated, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, __('See related ' + data.options.title + '..')));\n\n      var content = function content(props) {\n        return React.createElement(ItemChooser, Object.assign({}, props, {\n          data: {\n            options: data.options,\n            mainType: mainType,\n            mainTypeId: mainTypeId,\n            items: items\n          },\n          callback: onChangeItem,\n          showSelect: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94\n          },\n          __self: this\n        }));\n      };\n\n      var relContent = function relContent(props) {\n        return React.createElement(ItemChooser, Object.assign({}, props, {\n          data: {\n            options: data.options,\n            mainType: mainType,\n            mainTypeId: mainTypeId,\n            items: items,\n            isRelated: true\n          },\n          callback: onChangeItem,\n          showSelect: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103\n          },\n          __self: this\n        }));\n      };\n\n      var quickButtons = React.createElement(ModalTrigger, {\n        title: data.options.texts.addText,\n        trigger: trigger,\n        content: content,\n        size: \"lg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      });\n      var relQuickButtons = React.createElement(ModalTrigger, {\n        title: \"Related Associate\",\n        trigger: relTrigger,\n        size: \"lg\",\n        content: relContent,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      });\n      var boxProps = {\n        extraButtons: quickButtons,\n        title: __(data.options.title),\n        name: relType && \"show\".concat(relType)\n      };\n      return React.createElement(Box, Object.assign({}, boxProps, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }), this.renderItems(), mainTypeId && mainType && relQuickButtons);\n    }\n  }]);\n\n  return Items;\n}(React.Component);\n\nexport default Items;","map":{"version":3,"sources":["/home/anu-ujin/Works/open-source/erxes/ui/src/modules/boards/components/portable/Items.tsx"],"names":["ItemsWrapper","Box","EmptyState","Icon","ModalTrigger","ButtonRelated","__","React","ItemChooser","Items","props","onItemClick","item","setState","openItemId","_id","beforePopupClose","renderItems","state","onChangeItem","items","data","length","options","type","Item","map","index","bind","mainType","mainTypeId","relType","trigger","relTrigger","title","content","relContent","isRelated","quickButtons","texts","addText","relQuickButtons","boxProps","extraButtons","name","Component"],"mappings":";;;;;;;AAAA,SAASA,YAAT,QAA6B,4BAA7B;AACA,OAAOC,GAAP,MAAgB,+BAAhB;AACA,OAAOC,UAAP,MAAuB,sCAAvB;AACA,OAAOC,IAAP,MAAiB,qCAAjB;AACA,OAAOC,YAAP,MAAyB,wCAAzB;AACA,SAASC,aAAT,QAA8B,4BAA9B;AACA,SAASC,EAAT,QAAmB,sBAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,QAA4B,4BAA5B;;IAeMC,K;;;;;AACJ,iBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,+EAAMA,KAAN;;AADiB,UAQnBC,WARmB,GAQL,UAACC,IAAD,EAAiB;AAC7B,YAAKC,QAAL,CAAc;AAAEC,QAAAA,UAAU,EAAEF,IAAI,CAACG;AAAnB,OAAd;AACD,KAVkB;;AAAA,UAYnBC,gBAZmB,GAYA,YAAM;AACvB,YAAKH,QAAL,CAAc;AAAEC,QAAAA,UAAU,EAAE;AAAd,OAAd;AACD,KAdkB;;AAAA,UAgBnBG,WAhBmB,GAgBL,YAAM;AAAA,UACVH,UADU,GACK,MAAKI,KADV,CACVJ,UADU;AAAA,wBAEoB,MAAKJ,KAFzB;AAAA,UAEVS,YAFU,eAEVA,YAFU;AAAA,UAEIC,KAFJ,eAEIA,KAFJ;AAAA,UAEWC,IAFX,eAEWA,IAFX;;AAIlB,UAAID,KAAK,CAACE,MAAN,KAAiB,CAArB,EAAwB;AACtB,eAAO,oBAAC,UAAD;AAAY,UAAA,IAAI,EAAC,UAAjB;AAA4B,UAAA,IAAI,eAAQD,IAAI,CAACE,OAAL,CAAaC,IAArB,CAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AACD;;AAED,UAAMC,IAAI,GAAGJ,IAAI,CAACE,OAAL,CAAaE,IAA1B;AAEA,aACE,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGL,KAAK,CAACM,GAAN,CAAU,UAACd,IAAD,EAAOe,KAAP;AAAA,eACT,oBAAC,IAAD;AACE,UAAA,OAAO,EAAEN,IAAI,CAACE,OADhB;AAEE,UAAA,GAAG,EAAEI,KAFP;AAGE,UAAA,IAAI,EAAEf,IAHR;AAIE,UAAA,gBAAgB,EAAE,MAAKI,gBAJzB;AAKE,UAAA,aAAa,EAAEJ,IAAI,CAACG,GAAL,KAAaD,UAL9B;AAME,UAAA,OAAO,EAAE,MAAKH,WAAL,CAAiBiB,IAAjB,gCAA4BhB,IAA5B,CANX;AAOE,UAAA,KAAK,EAAEO,YAPT;AAQE,UAAA,QAAQ,EAAEA,YARZ;AASE,UAAA,QAAQ,EAAEA,YATZ;AAUE,UAAA,QAAQ,EAAE,IAVZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADS;AAAA,OAAV,CADH,CADF;AAkBD,KA5CkB;;AAGjB,UAAKD,KAAL,GAAa;AACXJ,MAAAA,UAAU,EAAE;AADD,KAAb;AAHiB;AAMlB;;;;6BAwCQ;AAAA,yBAQH,KAAKJ,KARF;AAAA,UAELmB,QAFK,gBAELA,QAFK;AAAA,UAGLC,UAHK,gBAGLA,UAHK;AAAA,UAILT,IAJK,gBAILA,IAJK;AAAA,UAKLF,YALK,gBAKLA,YALK;AAAA,UAMLC,KANK,gBAMLA,KANK;AAAA,UAOLW,OAPK,gBAOLA,OAPK;AAUP,UAAMC,OAAO,GACX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,IAAD;AAAM,QAAA,IAAI,EAAC,aAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADF;AAMA,UAAMC,UAAU,GACd,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAO3B,EAAE,CAAC,iBAAiBe,IAAI,CAACE,OAAL,CAAaW,KAA9B,GAAsC,IAAvC,CAAT,CADF,CADF;;AAMA,UAAMC,OAAO,GAAG,SAAVA,OAAU,CAAAzB,KAAK;AAAA,eACnB,oBAAC,WAAD,oBACMA,KADN;AAEE,UAAA,IAAI,EAAE;AAAEa,YAAAA,OAAO,EAAEF,IAAI,CAACE,OAAhB;AAAyBM,YAAAA,QAAQ,EAARA,QAAzB;AAAmCC,YAAAA,UAAU,EAAVA,UAAnC;AAA+CV,YAAAA,KAAK,EAALA;AAA/C,WAFR;AAGE,UAAA,QAAQ,EAAED,YAHZ;AAIE,UAAA,UAAU,EAAE,IAJd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WADmB;AAAA,OAArB;;AASA,UAAMiB,UAAU,GAAG,SAAbA,UAAa,CAAA1B,KAAK;AAAA,eACtB,oBAAC,WAAD,oBACMA,KADN;AAEE,UAAA,IAAI,EAAE;AACJa,YAAAA,OAAO,EAAEF,IAAI,CAACE,OADV;AAEJM,YAAAA,QAAQ,EAARA,QAFI;AAGJC,YAAAA,UAAU,EAAVA,UAHI;AAIJV,YAAAA,KAAK,EAALA,KAJI;AAKJiB,YAAAA,SAAS,EAAE;AALP,WAFR;AASE,UAAA,QAAQ,EAAElB,YATZ;AAUE,UAAA,UAAU,EAAE,IAVd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WADsB;AAAA,OAAxB;;AAeA,UAAMmB,YAAY,GAChB,oBAAC,YAAD;AACE,QAAA,KAAK,EAAEjB,IAAI,CAACE,OAAL,CAAagB,KAAb,CAAmBC,OAD5B;AAEE,QAAA,OAAO,EAAER,OAFX;AAGE,QAAA,OAAO,EAAEG,OAHX;AAIE,QAAA,IAAI,EAAC,IAJP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF;AASA,UAAMM,eAAe,GACnB,oBAAC,YAAD;AACE,QAAA,KAAK,EAAC,mBADR;AAEE,QAAA,OAAO,EAAER,UAFX;AAGE,QAAA,IAAI,EAAC,IAHP;AAIE,QAAA,OAAO,EAAEG,UAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF;AASA,UAAMM,QAAQ,GAAG;AACfC,QAAAA,YAAY,EAAEL,YADC;AAEfJ,QAAAA,KAAK,EAAE5B,EAAE,CAACe,IAAI,CAACE,OAAL,CAAaW,KAAd,CAFM;AAGfU,QAAAA,IAAI,EAAEb,OAAO,kBAAWA,OAAX;AAHE,OAAjB;AAMA,aACE,oBAAC,GAAD,oBAASW,QAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UACG,KAAKzB,WAAL,EADH,EAEGa,UAAU,IAAID,QAAd,IAA0BY,eAF7B,CADF;AAMD;;;;EA3HiBlC,KAAK,CAACsC,S;;AA8H1B,eAAepC,KAAf","sourcesContent":["import { ItemsWrapper } from 'modules/boards/styles/item';\nimport Box from 'modules/common/components/Box';\nimport EmptyState from 'modules/common/components/EmptyState';\nimport Icon from 'erxes-common-ui/lib/components/icon';\nimport ModalTrigger from 'modules/common/components/ModalTrigger';\nimport { ButtonRelated } from 'modules/common/styles/main';\nimport { __ } from 'modules/common/utils';\nimport React from 'react';\nimport { ItemChooser } from '../../containers/portable/';\nimport { IItem, IOptions } from '../../types';\n\ntype IData = {\n  options: IOptions;\n};\ntype Props = {\n  data: IData;\n  items: IItem[];\n  mainType?: string;\n  mainTypeId?: string;\n  relType?: string;\n  onChangeItem: () => void;\n};\n\nclass Items extends React.Component<Props, { openItemId?: string }> {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      openItemId: ''\n    };\n  }\n\n  onItemClick = (item: IItem) => {\n    this.setState({ openItemId: item._id });\n  };\n\n  beforePopupClose = () => {\n    this.setState({ openItemId: '' });\n  };\n\n  renderItems = () => {\n    const { openItemId } = this.state;\n    const { onChangeItem, items, data } = this.props;\n\n    if (items.length === 0) {\n      return <EmptyState icon=\"folder-2\" text={`No ${data.options.type}`} />;\n    }\n\n    const Item = data.options.Item;\n\n    return (\n      <ItemsWrapper>\n        {items.map((item, index) => (\n          <Item\n            options={data.options}\n            key={index}\n            item={item}\n            beforePopupClose={this.beforePopupClose}\n            isFormVisible={item._id === openItemId}\n            onClick={this.onItemClick.bind(this, item)}\n            onAdd={onChangeItem}\n            onUpdate={onChangeItem}\n            onRemove={onChangeItem}\n            portable={true}\n          />\n        ))}\n      </ItemsWrapper>\n    );\n  };\n\n  render() {\n    const {\n      mainType,\n      mainTypeId,\n      data,\n      onChangeItem,\n      items,\n      relType\n    } = this.props;\n\n    const trigger = (\n      <button>\n        <Icon icon=\"plus-circle\" />\n      </button>\n    );\n\n    const relTrigger = (\n      <ButtonRelated>\n        <span>{__('See related ' + data.options.title + '..')}</span>\n      </ButtonRelated>\n    );\n\n    const content = props => (\n      <ItemChooser\n        {...props}\n        data={{ options: data.options, mainType, mainTypeId, items }}\n        callback={onChangeItem}\n        showSelect={true}\n      />\n    );\n\n    const relContent = props => (\n      <ItemChooser\n        {...props}\n        data={{\n          options: data.options,\n          mainType,\n          mainTypeId,\n          items,\n          isRelated: true\n        }}\n        callback={onChangeItem}\n        showSelect={true}\n      />\n    );\n\n    const quickButtons = (\n      <ModalTrigger\n        title={data.options.texts.addText}\n        trigger={trigger}\n        content={content}\n        size=\"lg\"\n      />\n    );\n\n    const relQuickButtons = (\n      <ModalTrigger\n        title=\"Related Associate\"\n        trigger={relTrigger}\n        size=\"lg\"\n        content={relContent}\n      />\n    );\n\n    const boxProps = {\n      extraButtons: quickButtons,\n      title: __(data.options.title),\n      name: relType && `show${relType}`\n    };\n\n    return (\n      <Box {...boxProps}>\n        {this.renderItems()}\n        {mainTypeId && mainType && relQuickButtons}\n      </Box>\n    );\n  }\n}\n\nexport default Items;\n"]},"metadata":{},"sourceType":"module"}