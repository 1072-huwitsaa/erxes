{"ast":null,"code":"import _objectSpread from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/anu-ujin/Works/open-source/erxes/ui/src/modules/engage/components/step/MessageTypeStep.tsx\";\nimport FormControl from 'modules/common/components/form/Control';\nimport FormGroup from 'modules/common/components/form/Group';\nimport ControlLabel from 'modules/common/components/form/Label';\nimport { FlexItem } from 'modules/common/components/step/styles';\nimport { MESSAGE_TYPES } from 'modules/engage/constants';\nimport { SelectMessageType } from 'modules/engage/styles';\nimport React from 'react';\nimport BrandStep from '../../containers/BrandStep';\nimport SegmentStep from '../../containers/SegmentStep';\nimport TagStep from '../../containers/TagStep';\n\nvar MessageTypeStep =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(MessageTypeStep, _React$Component);\n\n  function MessageTypeStep(props) {\n    var _this;\n\n    _classCallCheck(this, MessageTypeStep);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MessageTypeStep).call(this, props));\n\n    _this.onChange = function (e) {\n      _this.setState({\n        messageType: e.target.value\n      });\n\n      _this.props.clearState();\n    };\n\n    _this.renderContent = function (_ref) {\n      var actionSelector = _ref.actionSelector,\n          selectedComponent = _ref.selectedComponent,\n          customerCounts = _ref.customerCounts;\n      return React.createElement(FlexItem, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, React.createElement(FlexItem, {\n        direction: \"column\",\n        overflow: \"auto\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, _this.renderSelector(), actionSelector, selectedComponent), React.createElement(FlexItem, {\n        direction: \"column\",\n        v: \"center\",\n        h: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, customerCounts));\n    };\n\n    _this.state = {\n      messageType: 'segment'\n    };\n    return _this;\n  }\n\n  _createClass(MessageTypeStep, [{\n    key: \"renderSelector\",\n    value: function renderSelector() {\n      return React.createElement(SelectMessageType, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42\n        },\n        __self: this\n      }, React.createElement(ControlLabel, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43\n        },\n        __self: this\n      }, \"Choose a message type:\"), React.createElement(FormControl, {\n        id: \"messageType\",\n        value: this.state.messageType,\n        componentClass: \"select\",\n        options: MESSAGE_TYPES,\n        onChange: this.onChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44\n        },\n        __self: this\n      })));\n    }\n  }, {\n    key: \"stepComponent\",\n    value: function stepComponent() {\n      var Component;\n\n      switch (this.state.messageType) {\n        case 'brand':\n          Component = BrandStep;\n          break;\n\n        case 'tag':\n          Component = TagStep;\n          break;\n\n        default:\n          Component = SegmentStep;\n          break;\n      }\n\n      return Component;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var commonProps = _objectSpread({}, this.props, {\n        messageType: this.state.messageType,\n        renderContent: function renderContent(args) {\n          return _this2.renderContent(args);\n        }\n      });\n\n      var Component = this.stepComponent();\n      return React.createElement(Component, Object.assign({}, commonProps, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return MessageTypeStep;\n}(React.Component);\n\nexport default MessageTypeStep;","map":{"version":3,"sources":["/home/anu-ujin/Works/open-source/erxes/ui/src/modules/engage/components/step/MessageTypeStep.tsx"],"names":["FormControl","FormGroup","ControlLabel","FlexItem","MESSAGE_TYPES","SelectMessageType","React","BrandStep","SegmentStep","TagStep","MessageTypeStep","props","onChange","e","setState","messageType","target","value","clearState","renderContent","actionSelector","selectedComponent","customerCounts","renderSelector","state","Component","commonProps","args","stepComponent"],"mappings":"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","sourcesContent":["import FormControl from 'modules/common/components/form/Control';\nimport FormGroup from 'modules/common/components/form/Group';\nimport ControlLabel from 'modules/common/components/form/Label';\nimport { FlexItem } from 'modules/common/components/step/styles';\nimport { MESSAGE_TYPES } from 'modules/engage/constants';\nimport { SelectMessageType } from 'modules/engage/styles';\nimport React from 'react';\nimport BrandStep from '../../containers/BrandStep';\nimport SegmentStep from '../../containers/SegmentStep';\nimport TagStep from '../../containers/TagStep';\n\ntype Props = {\n  clearState: () => void;\n  onChange: (\n    name: 'brandIds' | 'tagIds' | 'segmentIds',\n    value: string[]\n  ) => void;\n  segmentIds: string[];\n  brandIds: string[];\n  tagIds: string[];\n};\n\ntype State = {\n  messageType: string;\n};\n\nclass MessageTypeStep extends React.Component<Props, State> {\n  constructor(props) {\n    super(props);\n\n    this.state = { messageType: 'segment' };\n  }\n\n  onChange = (e: React.FormEvent<HTMLElement>) => {\n    this.setState({ messageType: (e.target as HTMLInputElement).value });\n    this.props.clearState();\n  };\n\n  renderSelector() {\n    return (\n      <SelectMessageType>\n        <FormGroup>\n          <ControlLabel>Choose a message type:</ControlLabel>\n          <FormControl\n            id=\"messageType\"\n            value={this.state.messageType}\n            componentClass=\"select\"\n            options={MESSAGE_TYPES}\n            onChange={this.onChange}\n          />\n        </FormGroup>\n      </SelectMessageType>\n    );\n  }\n\n  renderContent = ({ actionSelector, selectedComponent, customerCounts }) => {\n    return (\n      <FlexItem>\n        <FlexItem direction=\"column\" overflow=\"auto\">\n          {this.renderSelector()}\n          {actionSelector}\n          {selectedComponent}\n        </FlexItem>\n        <FlexItem direction=\"column\" v=\"center\" h=\"center\">\n          {customerCounts}\n        </FlexItem>\n      </FlexItem>\n    );\n  };\n\n  stepComponent() {\n    let Component;\n\n    switch (this.state.messageType) {\n      case 'brand':\n        Component = BrandStep;\n        break;\n      case 'tag':\n        Component = TagStep;\n        break;\n      default:\n        Component = SegmentStep;\n        break;\n    }\n\n    return Component;\n  }\n\n  render() {\n    const commonProps = {\n      ...this.props,\n      messageType: this.state.messageType,\n      renderContent: args => this.renderContent(args)\n    };\n\n    const Component = this.stepComponent();\n\n    return <Component {...commonProps} />;\n  }\n}\n\nexport default MessageTypeStep;\n"]},"metadata":{},"sourceType":"module"}