{"ast":null,"code":"import _classCallCheck from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/anu-ujin/Works/open-source/erxes/ui/src/modules/settings/integrations/components/messenger/steps/OnlineHours.tsx\";\nimport Button from \"erxes-common-ui/lib/components/button\";\nimport FormGroup from \"modules/common/components/form/Group\";\nimport ControlLabel from \"modules/common/components/form/Label\";\nimport Icon from \"erxes-common-ui/lib/components/icon\";\nimport { days, hours } from \"modules/settings/integrations/constants\";\nimport { FlexRow } from \"modules/settings/integrations/styles\";\nimport React from \"react\";\nimport Select from \"react-select-plus\";\n\nvar OnlineHours =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(OnlineHours, _React$Component);\n\n  function OnlineHours(props) {\n    var _this;\n\n    _classCallCheck(this, OnlineHours);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(OnlineHours).call(this, props));\n\n    _this.addTime = function () {\n      var onlineHours = _this.state.onlineHours.slice();\n\n      onlineHours.push({\n        _id: Math.random().toString(),\n        day: days[0].value,\n        from: hours[0].value,\n        to: hours[0].value\n      });\n\n      _this.setState({\n        onlineHours: onlineHours\n      }); // notify as change to main component\n\n\n      _this.props.onChange(onlineHours);\n    };\n\n    _this.removeTime = function (onlineHourId) {\n      var onlineHours = _this.state.onlineHours;\n      onlineHours = onlineHours.filter(function (hour) {\n        return hour._id !== onlineHourId;\n      });\n\n      _this.setState({\n        onlineHours: onlineHours\n      }); // notify as change to main component\n\n\n      _this.props.onChange(onlineHours);\n    };\n\n    _this.state = {\n      onlineHours: props.prevOptions || []\n    };\n    return _this;\n  }\n\n  _createClass(OnlineHours, [{\n    key: \"onTimeItemChange\",\n    value: function onTimeItemChange(onlineHourId, name, value) {\n      var onlineHours = this.state.onlineHours; // find current editing one\n\n      var onlineHour = onlineHours.find(function (hour) {\n        return hour._id === onlineHourId;\n      }) || []; // set new value\n\n      onlineHour[name] = value;\n      this.setState({\n        onlineHours: onlineHours\n      }); // notify as change to main component\n\n      this.props.onChange(onlineHours);\n    }\n  }, {\n    key: \"renderOnlineHour\",\n    value: function renderOnlineHour(onlineHour) {\n      var _this2 = this;\n\n      var remove = function remove() {\n        _this2.removeTime(onlineHour._id);\n      };\n\n      var onDayChange = function onDayChange(e) {\n        _this2.onTimeItemChange(onlineHour._id, \"day\", e.value);\n      };\n\n      var onFromChange = function onFromChange(e) {\n        _this2.onTimeItemChange(onlineHour._id, \"from\", e.value);\n      };\n\n      var onToChange = function onToChange(e) {\n        _this2.onTimeItemChange(onlineHour._id, \"to\", e.value);\n      };\n\n      var _id = onlineHour._id,\n          day = onlineHour.day,\n          from = onlineHour.from,\n          to = onlineHour.to;\n      return React.createElement(FlexRow, {\n        key: _id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(Select, {\n        className: \"flex-item\",\n        value: day,\n        options: days,\n        onChange: onDayChange,\n        clearable: false,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, \"from\"), React.createElement(Select, {\n        className: \"flex-item\",\n        onChange: onFromChange,\n        value: from,\n        options: hours,\n        clearable: false,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, \"to\"), React.createElement(Select, {\n        className: \"flex-item\",\n        onChange: onToChange,\n        value: to,\n        options: hours,\n        clearable: false,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }), React.createElement(Button, {\n        size: \"small\",\n        btnStyle: \"danger\",\n        onClick: remove,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        icon: \"cancel-1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      })));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, React.createElement(ControlLabel, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, \"Online hours\"), this.state.onlineHours.map(function (onlineHour) {\n        return _this3.renderOnlineHour(onlineHour);\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }), React.createElement(Button, {\n        btnStyle: \"success\",\n        size: \"small\",\n        onClick: this.addTime,\n        icon: \"add\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, \"Add another time\"));\n    }\n  }]);\n\n  return OnlineHours;\n}(React.Component);\n\nexport default OnlineHours;","map":{"version":3,"sources":["/home/anu-ujin/Works/open-source/erxes/ui/src/modules/settings/integrations/components/messenger/steps/OnlineHours.tsx"],"names":["Button","FormGroup","ControlLabel","Icon","days","hours","FlexRow","React","Select","OnlineHours","props","addTime","onlineHours","state","slice","push","_id","Math","random","toString","day","value","from","to","setState","onChange","removeTime","onlineHourId","filter","hour","prevOptions","name","onlineHour","find","remove","onDayChange","e","onTimeItemChange","onFromChange","onToChange","map","renderOnlineHour","Component"],"mappings":"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","sourcesContent":["import Button from \"erxes-common-ui/lib/components/button\";\nimport FormGroup from \"modules/common/components/form/Group\";\nimport ControlLabel from \"modules/common/components/form/Label\";\nimport Icon from \"erxes-common-ui/lib/components/icon\";\nimport { days, hours } from \"modules/settings/integrations/constants\";\nimport { FlexRow } from \"modules/settings/integrations/styles\";\nimport React from \"react\";\nimport Select from \"react-select-plus\";\nimport { IOnlineHour } from \"../../../types\";\n\ntype Props = {\n  prevOptions: any[];\n  onChange: (onlineHours: IOnlineHour[]) => void;\n};\n\ntype State = {\n  onlineHours: IOnlineHour[];\n};\n\nclass OnlineHours extends React.Component<Props, State> {\n  constructor(props) {\n    super(props);\n\n    this.state = { onlineHours: props.prevOptions || [] };\n  }\n\n  onTimeItemChange(onlineHourId, name, value) {\n    const onlineHours = this.state.onlineHours;\n\n    // find current editing one\n    const onlineHour =\n      onlineHours.find((hour) => hour._id === onlineHourId) || [];\n\n    // set new value\n    onlineHour[name] = value;\n\n    this.setState({ onlineHours });\n\n    // notify as change to main component\n    this.props.onChange(onlineHours);\n  }\n\n  addTime = () => {\n    const onlineHours = this.state.onlineHours.slice();\n\n    onlineHours.push({\n      _id: Math.random().toString(),\n      day: days[0].value,\n      from: hours[0].value,\n      to: hours[0].value,\n    });\n\n    this.setState({ onlineHours });\n\n    // notify as change to main component\n    this.props.onChange(onlineHours);\n  };\n\n  removeTime = (onlineHourId) => {\n    let onlineHours = this.state.onlineHours;\n\n    onlineHours = onlineHours.filter((hour) => hour._id !== onlineHourId);\n\n    this.setState({ onlineHours });\n\n    // notify as change to main component\n    this.props.onChange(onlineHours);\n  };\n\n  renderOnlineHour(onlineHour) {\n    const remove = () => {\n      this.removeTime(onlineHour._id);\n    };\n\n    const onDayChange = (e) => {\n      this.onTimeItemChange(onlineHour._id, \"day\", e.value);\n    };\n\n    const onFromChange = (e) => {\n      this.onTimeItemChange(onlineHour._id, \"from\", e.value);\n    };\n\n    const onToChange = (e) => {\n      this.onTimeItemChange(onlineHour._id, \"to\", e.value);\n    };\n\n    const { _id, day, from, to } = onlineHour;\n    return (\n      <FlexRow key={_id}>\n        <Select\n          className=\"flex-item\"\n          value={day}\n          options={days}\n          onChange={onDayChange}\n          clearable={false}\n        />\n\n        <span>from</span>\n        <Select\n          className=\"flex-item\"\n          onChange={onFromChange}\n          value={from}\n          options={hours}\n          clearable={false}\n        />\n\n        <span>to</span>\n        <Select\n          className=\"flex-item\"\n          onChange={onToChange}\n          value={to}\n          options={hours}\n          clearable={false}\n        />\n\n        <Button size=\"small\" btnStyle=\"danger\" onClick={remove}>\n          <Icon icon=\"cancel-1\" />\n        </Button>\n      </FlexRow>\n    );\n  }\n\n  render() {\n    return (\n      <FormGroup>\n        <ControlLabel>Online hours</ControlLabel>\n\n        {this.state.onlineHours.map((onlineHour) =>\n          this.renderOnlineHour(onlineHour)\n        )}\n\n        <br />\n        <Button\n          btnStyle=\"success\"\n          size=\"small\"\n          onClick={this.addTime}\n          icon=\"add\"\n        >\n          Add another time\n        </Button>\n      </FormGroup>\n    );\n  }\n}\n\nexport default OnlineHours;\n"]},"metadata":{},"sourceType":"module"}