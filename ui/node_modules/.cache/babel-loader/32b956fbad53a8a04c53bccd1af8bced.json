{"ast":null,"code":"import _classCallCheck from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/anu-ujin/Works/open-source/erxes/ui/src/modules/notifications/components/Widget.tsx\";\nimport Icon from 'erxes-common-ui/lib/components/icon';\nimport Label from 'modules/common/components/Label';\nimport { Tabs, TabTitle } from 'modules/common/components/tabs';\nimport { __ } from 'modules/common/utils';\nimport React from 'react';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport Popover from 'react-bootstrap/Popover';\nimport NotificationsLatest from './NotificationsLatest';\nimport { NotifButton } from './styles';\n\nvar Widget =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Widget, _React$Component);\n\n  function Widget(props) {\n    var _this;\n\n    _classCallCheck(this, Widget);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Widget).call(this, props));\n\n    _this.onTabClick = function (currentTab) {\n      _this.setState({\n        currentTab: currentTab\n      });\n    };\n\n    _this.state = {\n      currentTab: 'Recent'\n    };\n    return _this;\n  }\n\n  _createClass(Widget, [{\n    key: \"renderUnreadCount\",\n    value: function renderUnreadCount() {\n      var unreadCount = this.props.unreadCount;\n\n      if (unreadCount && unreadCount !== 0) {\n        return React.createElement(Label, {\n          shake: true,\n          lblStyle: \"danger\",\n          ignoreTrans: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 38\n          },\n          __self: this\n        }, unreadCount);\n      }\n\n      return null;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          notifications = _this$props.notifications,\n          isLoading = _this$props.isLoading,\n          showNotifications = _this$props.showNotifications,\n          markAsRead = _this$props.markAsRead;\n      var currentTab = this.state.currentTab;\n      var popoverProps = {\n        notifications: notifications,\n        isLoading: isLoading,\n        markAsRead: markAsRead\n      };\n\n      var recentOnClick = function recentOnClick() {\n        _this2.onTabClick('Recent');\n\n        showNotifications(false);\n      };\n\n      var unreadOnClick = function unreadOnClick() {\n        _this2.onTabClick('Unread');\n\n        showNotifications(true);\n      };\n\n      var popoverNotification = React.createElement(Popover, {\n        id: \"npopover\",\n        className: \"notification-popover\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(Tabs, {\n        full: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(TabTitle, {\n        className: currentTab === 'Recent' ? 'active' : '',\n        onClick: recentOnClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, __('Recent')), React.createElement(TabTitle, {\n        className: currentTab === 'Unread' ? 'active' : '',\n        onClick: unreadOnClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, __('Unread'))), React.createElement(NotificationsLatest, Object.assign({}, popoverProps, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      })));\n      return React.createElement(OverlayTrigger, {\n        trigger: \"click\",\n        rootClose: true,\n        placement: \"bottom\",\n        overlay: popoverNotification,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, React.createElement(NotifButton, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        icon: \"bell\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }), this.renderUnreadCount()));\n    }\n  }]);\n\n  return Widget;\n}(React.Component);\n\nexport default Widget;","map":{"version":3,"sources":["/home/anu-ujin/Works/open-source/erxes/ui/src/modules/notifications/components/Widget.tsx"],"names":["Icon","Label","Tabs","TabTitle","__","React","OverlayTrigger","Popover","NotificationsLatest","NotifButton","Widget","props","onTabClick","currentTab","setState","state","unreadCount","notifications","isLoading","showNotifications","markAsRead","popoverProps","recentOnClick","unreadOnClick","popoverNotification","renderUnreadCount","Component"],"mappings":"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","sourcesContent":["import Icon from 'erxes-common-ui/lib/components/icon';\nimport Label from 'modules/common/components/Label';\nimport { Tabs, TabTitle } from 'modules/common/components/tabs';\nimport { __ } from 'modules/common/utils';\nimport React from 'react';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport Popover from 'react-bootstrap/Popover';\nimport { INotification } from '../types';\nimport NotificationsLatest from './NotificationsLatest';\nimport { NotifButton } from './styles';\n\ntype Props = {\n  unreadCount: number;\n  notifications: INotification[];\n  showNotifications: (requireRead: boolean) => void;\n  markAsRead: (notificationIds?: string[]) => void;\n  isLoading: boolean;\n};\n\ntype State = {\n  currentTab: string;\n};\n\nclass Widget extends React.Component<Props, State> {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      currentTab: 'Recent'\n    };\n  }\n\n  renderUnreadCount() {\n    const { unreadCount } = this.props;\n\n    if (unreadCount && unreadCount !== 0) {\n      return (\n        <Label shake={true} lblStyle=\"danger\" ignoreTrans={true}>\n          {unreadCount}\n        </Label>\n      );\n    }\n\n    return null;\n  }\n\n  onTabClick = currentTab => {\n    this.setState({ currentTab });\n  };\n\n  render() {\n    const {\n      notifications,\n      isLoading,\n      showNotifications,\n      markAsRead\n    } = this.props;\n\n    const { currentTab } = this.state;\n\n    const popoverProps = {\n      notifications,\n      isLoading,\n      markAsRead\n    };\n\n    const recentOnClick = () => {\n      this.onTabClick('Recent');\n      showNotifications(false);\n    };\n\n    const unreadOnClick = () => {\n      this.onTabClick('Unread');\n      showNotifications(true);\n    };\n\n    const popoverNotification = (\n      <Popover id=\"npopover\" className=\"notification-popover\">\n        <Tabs full={true}>\n          <TabTitle\n            className={currentTab === 'Recent' ? 'active' : ''}\n            onClick={recentOnClick}\n          >\n            {__('Recent')}\n          </TabTitle>\n          <TabTitle\n            className={currentTab === 'Unread' ? 'active' : ''}\n            onClick={unreadOnClick}\n          >\n            {__('Unread')}\n          </TabTitle>\n        </Tabs>\n        <NotificationsLatest {...popoverProps} />\n      </Popover>\n    );\n\n    return (\n      <OverlayTrigger\n        trigger=\"click\"\n        rootClose={true}\n        placement=\"bottom\"\n        overlay={popoverNotification}\n      >\n        <NotifButton>\n          <Icon icon=\"bell\" />\n          {this.renderUnreadCount()}\n        </NotifButton>\n      </OverlayTrigger>\n    );\n  }\n}\n\nexport default Widget;\n"]},"metadata":{},"sourceType":"module"}