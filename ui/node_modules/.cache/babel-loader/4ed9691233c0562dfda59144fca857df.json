{"ast":null,"code":"import _classCallCheck from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _taggedTemplateLiteral from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/home/anu-ujin/Works/open-source/erxes/ui/src/modules/layout/components/DetectBrowser.tsx\";\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  position: fixed;\\n  left: \", \"%;\\n  margin-left: -250px;\\n  width: 500px;\\n  transition: all 0.1s;\\n\\n  > div {\\n    margin-top: \", \"px;\\n    font-size: 12px;\\n  }\\n\\n  .icon-cancel {\\n    float: right;\\n    cursor: pointer;\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport { dimensions } from \"modules/common/styles\";\nimport { __ } from \"modules/common/utils\";\nimport { AlertItem } from \"modules/common/utils/Alert/Alert\";\nimport Icon from \"erxes-common-ui/lib/components/icon\";\nimport React from \"react\";\nimport RTG from \"react-transition-group\";\nimport styled from \"styled-components\";\nvar OldBrowserWarning = styled(AlertItem)(_templateObject(), dimensions.headerSpacing, dimensions.unitSpacing - 5);\n\nvar DetectBrowser =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  _inherits(DetectBrowser, _React$PureComponent);\n\n  function DetectBrowser(props) {\n    var _this;\n\n    _classCallCheck(this, DetectBrowser);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(DetectBrowser).call(this, props));\n\n    _this.closeAlert = function () {\n      _this.setState({\n        isVisible: false\n      });\n    };\n\n    _this.state = {\n      isVisible: true\n    };\n    return _this;\n  }\n\n  _createClass(DetectBrowser, [{\n    key: \"renderWarning\",\n    value: function renderWarning(name, minVersion) {\n      var _navigator = navigator,\n          userAgent = _navigator.userAgent;\n      var splittedVersion = userAgent.split(name)[1];\n      var browserVersion = splittedVersion.split(\".\")[0];\n\n      if (Number(browserVersion) < minVersion) {\n        return React.createElement(RTG.CSSTransition, {\n          in: this.state.isVisible,\n          appear: true,\n          timeout: 300,\n          classNames: \"slide-in-small\",\n          unmountOnExit: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 50\n          },\n          __self: this\n        }, React.createElement(OldBrowserWarning, {\n          type: \"error\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 57\n          },\n          __self: this\n        }, React.createElement(\"b\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 58\n          },\n          __self: this\n        }, __(\"Please upgrade your browser to use erxes!\"), React.createElement(Icon, {\n          icon: \"cancel\",\n          size: 10,\n          onClick: this.closeAlert,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62\n          },\n          __self: this\n        }, __(\"Unfortunately, You are running on a browser that may not be fully compatible with erxes\"), \" \", __(\"Please use recommended version\"), \" - \", name.replace(\"/\", \"\"), \" \", minVersion, \"+.\")));\n      }\n\n      return null;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _navigator2 = navigator,\n          userAgent = _navigator2.userAgent;\n\n      if (userAgent.indexOf(\"Chrome\") !== -1) {\n        return this.renderWarning(\"Chrome/\", 58);\n      }\n\n      if (userAgent.indexOf(\"Safari\") !== -1 && userAgent.indexOf(\"Chrome\") === -1) {\n        return this.renderWarning(\"Version/\", 11);\n      }\n\n      if (userAgent.indexOf(\"Firefox\") !== -1) {\n        return this.renderWarning(\"Firefox/\", 59);\n      }\n\n      if (userAgent.indexOf(\"Opera\") !== -1 || userAgent.indexOf(\"OPR\") !== -1) {\n        return this.renderWarning(\"Opera/\", 45);\n      }\n\n      if (userAgent.indexOf(\"Edge\") !== -1) {\n        return this.renderWarning(\"Edge/\", 16);\n      }\n\n      return null;\n    }\n  }]);\n\n  return DetectBrowser;\n}(React.PureComponent);\n\nexport default DetectBrowser;","map":{"version":3,"sources":["/home/anu-ujin/Works/open-source/erxes/ui/src/modules/layout/components/DetectBrowser.tsx"],"names":["dimensions","__","AlertItem","Icon","React","RTG","styled","OldBrowserWarning","headerSpacing","unitSpacing","DetectBrowser","props","closeAlert","setState","isVisible","state","name","minVersion","navigator","userAgent","splittedVersion","split","browserVersion","Number","replace","indexOf","renderWarning","PureComponent"],"mappings":"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","sourcesContent":["import { dimensions } from \"modules/common/styles\";\nimport { __ } from \"modules/common/utils\";\nimport { AlertItem } from \"modules/common/utils/Alert/Alert\";\nimport Icon from \"erxes-common-ui/lib/components/icon\";\nimport React from \"react\";\nimport RTG from \"react-transition-group\";\nimport styled from \"styled-components\";\n\nconst OldBrowserWarning = styled(AlertItem)`\n  position: fixed;\n  left: ${dimensions.headerSpacing}%;\n  margin-left: -250px;\n  width: 500px;\n  transition: all 0.1s;\n\n  > div {\n    margin-top: ${dimensions.unitSpacing - 5}px;\n    font-size: 12px;\n  }\n\n  .icon-cancel {\n    float: right;\n    cursor: pointer;\n  }\n`;\n\ntype State = {\n  isVisible: boolean;\n};\n\nclass DetectBrowser extends React.PureComponent<{}, State> {\n  constructor(props: {}) {\n    super(props);\n\n    this.state = { isVisible: true };\n  }\n\n  closeAlert = () => {\n    this.setState({ isVisible: false });\n  };\n\n  renderWarning(name: string, minVersion: number) {\n    const { userAgent } = navigator;\n\n    const splittedVersion = userAgent.split(name)[1];\n    const browserVersion = splittedVersion.split(\".\")[0];\n\n    if (Number(browserVersion) < minVersion) {\n      return (\n        <RTG.CSSTransition\n          in={this.state.isVisible}\n          appear={true}\n          timeout={300}\n          classNames=\"slide-in-small\"\n          unmountOnExit={true}\n        >\n          <OldBrowserWarning type=\"error\">\n            <b>\n              {__(\"Please upgrade your browser to use erxes!\")}\n              <Icon icon=\"cancel\" size={10} onClick={this.closeAlert} />\n            </b>\n            <div>\n              {__(\n                \"Unfortunately, You are running on a browser that may not be fully compatible with erxes\"\n              )}{\" \"}\n              {__(`Please use recommended version`)} - {name.replace(\"/\", \"\")}{\" \"}\n              {minVersion}+.\n            </div>\n          </OldBrowserWarning>\n        </RTG.CSSTransition>\n      );\n    }\n\n    return null;\n  }\n\n  render() {\n    const { userAgent } = navigator;\n\n    if (userAgent.indexOf(\"Chrome\") !== -1) {\n      return this.renderWarning(\"Chrome/\", 58);\n    }\n\n    if (\n      userAgent.indexOf(\"Safari\") !== -1 &&\n      userAgent.indexOf(\"Chrome\") === -1\n    ) {\n      return this.renderWarning(\"Version/\", 11);\n    }\n\n    if (userAgent.indexOf(\"Firefox\") !== -1) {\n      return this.renderWarning(\"Firefox/\", 59);\n    }\n\n    if (userAgent.indexOf(\"Opera\") !== -1 || userAgent.indexOf(\"OPR\") !== -1) {\n      return this.renderWarning(\"Opera/\", 45);\n    }\n\n    if (userAgent.indexOf(\"Edge\") !== -1) {\n      return this.renderWarning(\"Edge/\", 16);\n    }\n\n    return null;\n  }\n}\n\nexport default DetectBrowser;\n"]},"metadata":{},"sourceType":"module"}