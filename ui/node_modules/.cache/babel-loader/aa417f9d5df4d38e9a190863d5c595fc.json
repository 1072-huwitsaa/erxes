{"ast":null,"code":"import _defineProperty from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/anu-ujin/Works/open-source/erxes/ui/src/modules/activityLogs/components/ActivityList.tsx\";\nimport dayjs from 'dayjs';\nimport EmptyState from 'modules/common/components/EmptyState';\nimport React from 'react';\nimport { ActivityTitle, Timeline } from '../styles';\nimport ActivityItem from './ActivityItem';\n\nvar ActivityList =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ActivityList, _React$Component);\n\n  function ActivityList() {\n    _classCallCheck(this, ActivityList);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ActivityList).apply(this, arguments));\n  }\n\n  _createClass(ActivityList, [{\n    key: \"renderItem\",\n    value: function renderItem(data) {\n      var _this = this;\n\n      return data.map(function (item, index) {\n        return React.createElement(ActivityItem, {\n          key: index,\n          activity: item,\n          currentUser: _this.props.user,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 19\n          },\n          __self: this\n        });\n      });\n    }\n  }, {\n    key: \"renderList\",\n    value: function renderList(activity, index) {\n      var _this2 = this;\n\n      var data = Object.keys(activity);\n      return React.createElement(\"div\", {\n        key: index,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 27\n        },\n        __self: this\n      }, React.createElement(ActivityTitle, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 28\n        },\n        __self: this\n      }, data), data.map(function (key) {\n        return _this2.renderItem(activity[key]);\n      }));\n    }\n  }, {\n    key: \"renderTimeLine\",\n    value: function renderTimeLine(activities) {\n      var _this3 = this;\n\n      var result = activities.reduce(function (item, activity) {\n        var contentType = activity.contentType;\n        var createdDate = dayjs(activity.createdAt).format('MMMM YYYY');\n\n        if (contentType === 'taskDetail' && dayjs(activity.createdAt) >= dayjs()) {\n          item.Upcoming = item.Upcoming || [];\n          item.Upcoming.push(activity);\n        } else {\n          item[createdDate] = item[createdDate] || [];\n          item[createdDate].push(activity);\n        }\n\n        return item;\n      }, {});\n      return React.createElement(Timeline, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }, Object.keys(result).map(function (key, index) {\n        return _this3.renderList(_defineProperty({}, key, result[key]), index);\n      }));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var activities = this.props.activities;\n\n      if (!activities || activities.length < 1) {\n        return React.createElement(EmptyState, {\n          text: \"There aren\\u2019t any activities at the moment.\",\n          icon: \"clock\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 67\n          },\n          __self: this\n        });\n      }\n\n      return this.renderTimeLine(activities);\n    }\n  }]);\n\n  return ActivityList;\n}(React.Component);\n\nexport default ActivityList;","map":{"version":3,"sources":["/home/anu-ujin/Works/open-source/erxes/ui/src/modules/activityLogs/components/ActivityList.tsx"],"names":["dayjs","EmptyState","React","ActivityTitle","Timeline","ActivityItem","ActivityList","data","map","item","index","props","user","activity","Object","keys","key","renderItem","activities","result","reduce","contentType","createdDate","createdAt","format","Upcoming","push","renderList","length","renderTimeLine","Component"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,UAAP,MAAuB,sCAAvB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,SAASC,aAAT,EAAwBC,QAAxB,QAAwC,WAAxC;AAEA,OAAOC,YAAP,MAAyB,gBAAzB;;IASMC,Y;;;;;;;;;;;;;+BACOC,I,EAAM;AAAA;;AACf,aAAOA,IAAI,CAACC,GAAL,CAAS,UAACC,IAAD,EAAOC,KAAP;AAAA,eACd,oBAAC,YAAD;AAAc,UAAA,GAAG,EAAEA,KAAnB;AAA0B,UAAA,QAAQ,EAAED,IAApC;AAA0C,UAAA,WAAW,EAAE,KAAI,CAACE,KAAL,CAAWC,IAAlE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADc;AAAA,OAAT,CAAP;AAGD;;;+BAEUC,Q,EAAUH,K,EAAO;AAAA;;AAC1B,UAAMH,IAAI,GAAGO,MAAM,CAACC,IAAP,CAAYF,QAAZ,CAAb;AAEA,aACE;AAAK,QAAA,GAAG,EAAEH,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAgBH,IAAhB,CADF,EAEGA,IAAI,CAACC,GAAL,CAAS,UAAAQ,GAAG;AAAA,eAAI,MAAI,CAACC,UAAL,CAAgBJ,QAAQ,CAACG,GAAD,CAAxB,CAAJ;AAAA,OAAZ,CAFH,CADF;AAMD;;;mCAEcE,U,EAAY;AAAA;;AACzB,UAAMC,MAAM,GAAGD,UAAU,CAACE,MAAX,CAAkB,UAACX,IAAD,EAAOI,QAAP,EAAoB;AAAA,YAC3CQ,WAD2C,GAC3BR,QAD2B,CAC3CQ,WAD2C;AAEnD,YAAMC,WAAW,GAAGtB,KAAK,CAACa,QAAQ,CAACU,SAAV,CAAL,CAA0BC,MAA1B,CAAiC,WAAjC,CAApB;;AAEA,YACEH,WAAW,KAAK,YAAhB,IACArB,KAAK,CAACa,QAAQ,CAACU,SAAV,CAAL,IAA6BvB,KAAK,EAFpC,EAGE;AACAS,UAAAA,IAAI,CAACgB,QAAL,GAAgBhB,IAAI,CAACgB,QAAL,IAAiB,EAAjC;AACAhB,UAAAA,IAAI,CAACgB,QAAL,CAAcC,IAAd,CAAmBb,QAAnB;AACD,SAND,MAMO;AACLJ,UAAAA,IAAI,CAACa,WAAD,CAAJ,GAAoBb,IAAI,CAACa,WAAD,CAAJ,IAAqB,EAAzC;AACAb,UAAAA,IAAI,CAACa,WAAD,CAAJ,CAAkBI,IAAlB,CAAuBb,QAAvB;AACD;;AAED,eAAOJ,IAAP;AACD,OAhBc,EAgBZ,EAhBY,CAAf;AAkBA,aACE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGK,MAAM,CAACC,IAAP,CAAYI,MAAZ,EAAoBX,GAApB,CAAwB,UAACQ,GAAD,EAAMN,KAAN,EAAgB;AACvC,eAAO,MAAI,CAACiB,UAAL,qBAAmBX,GAAnB,EAAyBG,MAAM,CAACH,GAAD,CAA/B,GAAwCN,KAAxC,CAAP;AACD,OAFA,CADH,CADF;AAOD;;;6BAEQ;AAAA,UACCQ,UADD,GACgB,KAAKP,KADrB,CACCO,UADD;;AAGP,UAAI,CAACA,UAAD,IAAeA,UAAU,CAACU,MAAX,GAAoB,CAAvC,EAA0C;AACxC,eACE,oBAAC,UAAD;AACE,UAAA,IAAI,EAAC,iDADP;AAEE,UAAA,IAAI,EAAC,OAFP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAMD;;AAED,aAAO,KAAKC,cAAL,CAAoBX,UAApB,CAAP;AACD;;;;EA3DwBhB,KAAK,CAAC4B,S;;AA8DjC,eAAexB,YAAf","sourcesContent":["import dayjs from 'dayjs';\nimport EmptyState from 'modules/common/components/EmptyState';\nimport React from 'react';\nimport { IUser } from '../../auth/types';\nimport { ActivityTitle, Timeline } from '../styles';\nimport { IActivityLog } from '../types';\nimport ActivityItem from './ActivityItem';\n\ntype Props = {\n  activities: IActivityLog[];\n  user: IUser;\n  target?: string;\n  type: string;\n};\n\nclass ActivityList extends React.Component<Props> {\n  renderItem(data) {\n    return data.map((item, index) => (\n      <ActivityItem key={index} activity={item} currentUser={this.props.user} />\n    ));\n  }\n\n  renderList(activity, index) {\n    const data = Object.keys(activity);\n\n    return (\n      <div key={index}>\n        <ActivityTitle>{data}</ActivityTitle>\n        {data.map(key => this.renderItem(activity[key]))}\n      </div>\n    );\n  }\n\n  renderTimeLine(activities) {\n    const result = activities.reduce((item, activity) => {\n      const { contentType } = activity;\n      const createdDate = dayjs(activity.createdAt).format('MMMM YYYY');\n\n      if (\n        contentType === 'taskDetail' &&\n        dayjs(activity.createdAt) >= dayjs()\n      ) {\n        item.Upcoming = item.Upcoming || [];\n        item.Upcoming.push(activity);\n      } else {\n        item[createdDate] = item[createdDate] || [];\n        item[createdDate].push(activity);\n      }\n\n      return item;\n    }, {});\n\n    return (\n      <Timeline>\n        {Object.keys(result).map((key, index) => {\n          return this.renderList({ [key]: result[key] }, index);\n        })}\n      </Timeline>\n    );\n  }\n\n  render() {\n    const { activities } = this.props;\n\n    if (!activities || activities.length < 1) {\n      return (\n        <EmptyState\n          text=\"There arenâ€™t any activities at the moment.\"\n          icon=\"clock\"\n        />\n      );\n    }\n\n    return this.renderTimeLine(activities);\n  }\n}\n\nexport default ActivityList;\n"]},"metadata":{},"sourceType":"module"}