{"ast":null,"code":"import _classCallCheck from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/anu-ujin/Works/open-source/erxes/ui/src/modules/settings/boards/components/Stages.tsx\";\nimport Icon from 'erxes-common-ui/lib/components/icon';\nimport SortableList from 'modules/common/components/SortableList';\nimport { __ } from 'modules/common/utils';\nimport { LinkButton } from 'modules/settings/team/styles';\nimport React from 'react';\nimport { StageList } from '../styles';\nimport StageItem from './StageItem';\n\nvar Stages =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Stages, _React$Component);\n\n  function Stages() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Stages);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Stages)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.onChange = function (stageId, name, value) {\n      var _this$props = _this.props,\n          stages = _this$props.stages,\n          onChangeStages = _this$props.onChangeStages;\n      var stage = stages.find(function (s) {\n        return s._id === stageId;\n      });\n      stage[name] = value;\n      onChangeStages(stages);\n    };\n\n    _this.add = function () {\n      var _this$props2 = _this.props,\n          stages = _this$props2.stages,\n          onChangeStages = _this$props2.onChangeStages,\n          type = _this$props2.type;\n      stages.push({\n        _id: Math.random().toString(),\n        name: '',\n        type: type\n      });\n      onChangeStages(stages);\n    };\n\n    _this.remove = function (stageId) {\n      var _this$props3 = _this.props,\n          stages = _this$props3.stages,\n          onChangeStages = _this$props3.onChangeStages;\n      var remainedStages = stages.filter(function (stage) {\n        return stage._id !== stageId;\n      });\n      onChangeStages(remainedStages);\n    };\n\n    _this.onStageInputKeyPress = function (e) {\n      if (e.key === 'Enter') {\n        _this.add();\n\n        e.preventDefault();\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(Stages, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.stages.length === 0) {\n        this.add();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props4 = this.props,\n          options = _this$props4.options,\n          type = _this$props4.type;\n      var Item = options ? options.StageItem : StageItem;\n\n      var child = function child(stage) {\n        return React.createElement(Item, {\n          stage: stage,\n          type: type,\n          onChange: _this2.onChange,\n          remove: _this2.remove,\n          onKeyPress: _this2.onStageInputKeyPress,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66\n          },\n          __self: this\n        });\n      };\n\n      return React.createElement(StageList, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(SortableList, {\n        fields: this.props.stages,\n        child: child,\n        onChangeFields: this.props.onChangeStages,\n        isModal: true,\n        droppableId: \"stages\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }), React.createElement(LinkButton, {\n        onClick: this.add,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        icon: \"plus-1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }), \" \", __('Add another stage')));\n    }\n  }]);\n\n  return Stages;\n}(React.Component);\n\nexport default Stages;","map":{"version":3,"sources":["/home/anu-ujin/Works/open-source/erxes/ui/src/modules/settings/boards/components/Stages.tsx"],"names":["Icon","SortableList","__","LinkButton","React","StageList","StageItem","Stages","onChange","stageId","name","value","props","stages","onChangeStages","stage","find","s","_id","add","type","push","Math","random","toString","remove","remainedStages","filter","onStageInputKeyPress","e","key","preventDefault","length","options","Item","child","Component"],"mappings":"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","sourcesContent":["import { IStage } from 'modules/boards/types';\nimport Icon from 'erxes-common-ui/lib/components/icon';\nimport SortableList from 'modules/common/components/SortableList';\nimport { __ } from 'modules/common/utils';\nimport { LinkButton } from 'modules/settings/team/styles';\nimport React from 'react';\nimport { StageList } from '../styles';\nimport { IOption } from '../types';\nimport StageItem from './StageItem';\n\ntype Props = {\n  onChangeStages: (stages: IStage[]) => void;\n  stages: any;\n  type?: string;\n  options?: IOption;\n};\n\nclass Stages extends React.Component<Props, {}> {\n  componentDidMount() {\n    if (this.props.stages.length === 0) {\n      this.add();\n    }\n  }\n\n  onChange = (stageId: string, name: string, value: string) => {\n    const { stages, onChangeStages } = this.props;\n\n    const stage = stages.find(s => s._id === stageId);\n    stage[name] = value;\n\n    onChangeStages(stages);\n  };\n\n  add = () => {\n    const { stages, onChangeStages, type } = this.props;\n\n    stages.push({\n      _id: Math.random().toString(),\n      name: '',\n      type\n    });\n\n    onChangeStages(stages);\n  };\n\n  remove = stageId => {\n    const { stages, onChangeStages } = this.props;\n\n    const remainedStages = stages.filter(stage => stage._id !== stageId);\n\n    onChangeStages(remainedStages);\n  };\n\n  onStageInputKeyPress = e => {\n    if (e.key === 'Enter') {\n      this.add();\n      e.preventDefault();\n    }\n  };\n\n  render() {\n    const { options, type } = this.props;\n    const Item = options ? options.StageItem : StageItem;\n\n    const child = stage => (\n      <Item\n        stage={stage}\n        type={type}\n        onChange={this.onChange}\n        remove={this.remove}\n        onKeyPress={this.onStageInputKeyPress}\n      />\n    );\n\n    return (\n      <StageList>\n        <SortableList\n          fields={this.props.stages}\n          child={child}\n          onChangeFields={this.props.onChangeStages}\n          isModal={true}\n          droppableId=\"stages\"\n        />\n\n        <LinkButton onClick={this.add}>\n          <Icon icon=\"plus-1\" /> {__('Add another stage')}\n        </LinkButton>\n      </StageList>\n    );\n  }\n}\n\nexport default Stages;\n"]},"metadata":{},"sourceType":"module"}