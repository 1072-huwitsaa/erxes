{"ast":null,"code":"import _classCallCheck from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/anu-ujin/Works/open-source/erxes/ui/src/modules/leads/components/Row.tsx\";\nimport dayjs from 'dayjs';\nimport Button from 'erxes-common-ui/lib/components/button';\nimport FormControl from 'modules/common/components/form/Control';\nimport ActionButtons from 'erxes-common-ui/lib/components/actionButtons';\nimport Icon from 'erxes-common-ui/lib/components/icon';\nimport Label from 'modules/common/components/Label';\nimport ModalTrigger from 'modules/common/components/ModalTrigger';\nimport Tags from 'modules/common/components/Tags';\nimport Tip from 'modules/common/components/Tip';\nimport WithPermission from 'modules/common/components/WithPermission';\nimport { DateWrapper } from 'modules/common/styles/main';\nimport { __ } from 'modules/common/utils';\nimport { RowTitle } from 'modules/engage/styles';\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport Manage from './Manage';\n\nvar Row =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Row, _React$Component);\n\n  function Row() {\n    _classCallCheck(this, Row);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Row).apply(this, arguments));\n  }\n\n  _createClass(Row, [{\n    key: \"manageAction\",\n    value: function manageAction(integration) {\n      var formId = integration.formId;\n      return React.createElement(Link, {\n        to: \"/leads/edit/\".concat(integration._id, \"/\").concat(formId),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 33\n        },\n        __self: this\n      }, React.createElement(Button, {\n        btnStyle: \"link\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 34\n        },\n        __self: this\n      }, React.createElement(Tip, {\n        text: __('Manage'),\n        placement: \"top\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 35\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        icon: \"edit-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 36\n        },\n        __self: this\n      }))));\n    }\n  }, {\n    key: \"renderEditAction\",\n    value: function renderEditAction(integration) {\n      var trigger = React.createElement(Button, {\n        btnStyle: \"link\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45\n        },\n        __self: this\n      }, React.createElement(Tip, {\n        text: __('Install code'),\n        placement: \"top\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        icon: \"code\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47\n        },\n        __self: this\n      })));\n\n      var content = function content(props) {\n        return React.createElement(Manage, Object.assign({\n          integration: integration\n        }, props, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 52\n          },\n          __self: this\n        }));\n      };\n\n      return React.createElement(ModalTrigger, {\n        title: \"Install code of \".concat(integration.name),\n        size: \"lg\",\n        trigger: trigger,\n        content: content,\n        isOpen: this.props.showCode,\n        isAnimate: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      });\n    }\n  }, {\n    key: \"renderArchiveAction\",\n    value: function renderArchiveAction() {\n      var _this$props = this.props,\n          integration = _this$props.integration,\n          archive = _this$props.archive;\n\n      var onClick = function onClick() {\n        return archive(integration._id, true);\n      };\n\n      if (!archive || !integration.isActive) {\n        return null;\n      }\n\n      return React.createElement(WithPermission, {\n        action: \"integrationsArchive\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(Tip, {\n        text: __('Archive'),\n        placement: \"top\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, React.createElement(Button, {\n        btnStyle: \"link\",\n        onClick: onClick,\n        icon: \"archive-alt\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      })));\n    }\n  }, {\n    key: \"renderUnarchiveAction\",\n    value: function renderUnarchiveAction() {\n      var _this$props2 = this.props,\n          integration = _this$props2.integration,\n          archive = _this$props2.archive;\n\n      var onClick = function onClick() {\n        return archive(integration._id, false);\n      };\n\n      if (!archive || integration.isActive) {\n        return null;\n      }\n\n      return React.createElement(WithPermission, {\n        action: \"integrationsArchive\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, React.createElement(Tip, {\n        text: __('Unarchive'),\n        placement: \"top\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, React.createElement(Button, {\n        btnStyle: \"link\",\n        onClick: onClick,\n        icon: \"redo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      })));\n    }\n  }, {\n    key: \"renderRemoveAction\",\n    value: function renderRemoveAction() {\n      var _this$props3 = this.props,\n          integration = _this$props3.integration,\n          remove = _this$props3.remove;\n\n      var onClick = function onClick() {\n        return remove(integration._id);\n      };\n\n      return React.createElement(WithPermission, {\n        action: \"integrationsRemove\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(Tip, {\n        text: __('Delete'),\n        placement: \"top\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, React.createElement(Button, {\n        id: \"integrationDelete\",\n        btnStyle: \"link\",\n        onClick: onClick,\n        icon: \"times-circle\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      })));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props4 = this.props,\n          integration = _this$props4.integration,\n          isChecked = _this$props4.isChecked,\n          toggleBulk = _this$props4.toggleBulk;\n      var form = integration.form || {};\n      var lead = integration.leadData || {};\n      var createdUser = form.createdUser || {\n        _id: '',\n        details: {\n          fullName: ''\n        }\n      };\n      var tags = integration.tags;\n      var percentage = '0.00';\n\n      if (lead.contactsGathered && lead.viewCount) {\n        percentage = lead.contactsGathered / lead.viewCount * 100;\n        percentage = percentage.toString();\n      }\n\n      var onChange = function onChange(e) {\n        if (toggleBulk) {\n          toggleBulk(integration, e.target.checked);\n        }\n      };\n\n      var labelStyle = integration.isActive ? 'success' : 'warning';\n      var status = integration.isActive ? __('Active') : __('Archived');\n      return React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(FormControl, {\n        checked: isChecked,\n        componentClass: \"checkbox\",\n        onChange: onChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      })), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, React.createElement(RowTitle, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/leads/edit/\".concat(integration._id, \"/\").concat(integration.formId),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, integration.name))), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, integration.brand ? integration.brand.name : ''), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, lead.viewCount || 0), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, percentage.substring(0, 4), \" %\"), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, lead.contactsGathered || 0), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, React.createElement(DateWrapper, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, dayjs(form.createdDate).format('ll'))), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        key: createdUser._id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, createdUser.details && createdUser.details.fullName)), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, React.createElement(Tags, {\n        tags: tags,\n        limit: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      })), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, React.createElement(Label, {\n        lblStyle: labelStyle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, status)), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, React.createElement(ActionButtons, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }, this.manageAction(integration), this.renderEditAction(integration), this.renderArchiveAction(), this.renderUnarchiveAction(), this.renderRemoveAction())));\n    }\n  }]);\n\n  return Row;\n}(React.Component);\n\nexport default Row;","map":{"version":3,"sources":["/home/anu-ujin/Works/open-source/erxes/ui/src/modules/leads/components/Row.tsx"],"names":["dayjs","Button","FormControl","ActionButtons","Icon","Label","ModalTrigger","Tags","Tip","WithPermission","DateWrapper","__","RowTitle","React","Link","Manage","Row","integration","formId","_id","trigger","content","props","name","showCode","archive","onClick","isActive","remove","isChecked","toggleBulk","form","lead","leadData","createdUser","details","fullName","tags","percentage","contactsGathered","viewCount","toString","onChange","e","target","checked","labelStyle","status","brand","substring","createdDate","format","manageAction","renderEditAction","renderArchiveAction","renderUnarchiveAction","renderRemoveAction","Component"],"mappings":"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","sourcesContent":["import dayjs from 'dayjs';\nimport Button from 'erxes-common-ui/lib/components/button';\nimport FormControl from 'modules/common/components/form/Control';\nimport ActionButtons from 'erxes-common-ui/lib/components/actionButtons';\nimport Icon from 'erxes-common-ui/lib/components/icon';\nimport Label from 'modules/common/components/Label';\nimport ModalTrigger from 'modules/common/components/ModalTrigger';\nimport Tags from 'modules/common/components/Tags';\nimport Tip from 'modules/common/components/Tip';\nimport WithPermission from 'modules/common/components/WithPermission';\nimport { DateWrapper } from 'modules/common/styles/main';\nimport { __ } from 'modules/common/utils';\nimport { RowTitle } from 'modules/engage/styles';\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport { ILeadIntegration } from '../types';\nimport Manage from './Manage';\n\ntype Props = {\n  integration: ILeadIntegration;\n  isChecked: boolean;\n  toggleBulk: (integration: ILeadIntegration, checked: boolean) => void;\n  remove: (integrationId: string) => void;\n  archive: (integrationId: string, status: boolean) => void;\n  showCode?: boolean;\n};\n\nclass Row extends React.Component<Props> {\n  manageAction(integration) {\n    const { formId } = integration;\n\n    return (\n      <Link to={`/leads/edit/${integration._id}/${formId}`}>\n        <Button btnStyle=\"link\">\n          <Tip text={__('Manage')} placement=\"top\">\n            <Icon icon=\"edit-3\" />\n          </Tip>\n        </Button>\n      </Link>\n    );\n  }\n\n  renderEditAction(integration) {\n    const trigger = (\n      <Button btnStyle=\"link\">\n        <Tip text={__('Install code')} placement=\"top\">\n          <Icon icon=\"code\" />\n        </Tip>\n      </Button>\n    );\n\n    const content = props => <Manage integration={integration} {...props} />;\n\n    return (\n      <ModalTrigger\n        title={`Install code of ${integration.name}`}\n        size=\"lg\"\n        trigger={trigger}\n        content={content}\n        isOpen={this.props.showCode}\n        isAnimate={true}\n      />\n    );\n  }\n\n  renderArchiveAction() {\n    const { integration, archive } = this.props;\n\n    const onClick = () => archive(integration._id, true);\n\n    if (!archive || !integration.isActive) {\n      return null;\n    }\n\n    return (\n      <WithPermission action=\"integrationsArchive\">\n        <Tip text={__('Archive')} placement=\"top\">\n          <Button btnStyle=\"link\" onClick={onClick} icon=\"archive-alt\" />\n        </Tip>\n      </WithPermission>\n    );\n  }\n\n  renderUnarchiveAction() {\n    const { integration, archive } = this.props;\n\n    const onClick = () => archive(integration._id, false);\n\n    if (!archive || integration.isActive) {\n      return null;\n    }\n\n    return (\n      <WithPermission action=\"integrationsArchive\">\n        <Tip text={__('Unarchive')} placement=\"top\">\n          <Button btnStyle=\"link\" onClick={onClick} icon=\"redo\" />\n        </Tip>\n      </WithPermission>\n    );\n  }\n\n  renderRemoveAction() {\n    const { integration, remove } = this.props;\n\n    const onClick = () => remove(integration._id);\n\n    return (\n      <WithPermission action=\"integrationsRemove\">\n        <Tip text={__('Delete')} placement=\"top\">\n          <Button\n            id=\"integrationDelete\"\n            btnStyle=\"link\"\n            onClick={onClick}\n            icon=\"times-circle\"\n          />\n        </Tip>\n      </WithPermission>\n    );\n  }\n\n  render() {\n    const { integration, isChecked, toggleBulk } = this.props;\n    const form = integration.form || {};\n    const lead = integration.leadData || {};\n\n    const createdUser = form.createdUser || {\n      _id: '',\n      details: { fullName: '' }\n    };\n    const tags = integration.tags;\n\n    let percentage: string | number = '0.00';\n\n    if (lead.contactsGathered && lead.viewCount) {\n      percentage = (lead.contactsGathered / lead.viewCount) * 100;\n      percentage = percentage.toString();\n    }\n\n    const onChange = e => {\n      if (toggleBulk) {\n        toggleBulk(integration, e.target.checked);\n      }\n    };\n\n    const labelStyle = integration.isActive ? 'success' : 'warning';\n    const status = integration.isActive ? __('Active') : __('Archived');\n\n    return (\n      <tr>\n        <td>\n          <FormControl\n            checked={isChecked}\n            componentClass=\"checkbox\"\n            onChange={onChange}\n          />\n        </td>\n        <td>\n          <RowTitle>\n            <Link to={`/leads/edit/${integration._id}/${integration.formId}`}>\n              {integration.name}\n            </Link>\n          </RowTitle>\n        </td>\n        <td>{integration.brand ? integration.brand.name : ''}</td>\n        <td>{lead.viewCount || 0}</td>\n        <td>{percentage.substring(0, 4)} %</td>\n        <td>{lead.contactsGathered || 0}</td>\n        <td>\n          <DateWrapper>{dayjs(form.createdDate).format('ll')}</DateWrapper>\n        </td>\n        <td>\n          <div key={createdUser._id}>\n            {createdUser.details && createdUser.details.fullName}\n          </div>\n        </td>\n        <td>\n          <Tags tags={tags} limit={2} />\n        </td>\n        <td>\n          <Label lblStyle={labelStyle}>{status}</Label>\n        </td>\n        <td>\n          <ActionButtons>\n            {this.manageAction(integration)}\n            {this.renderEditAction(integration)}\n            {this.renderArchiveAction()}\n            {this.renderUnarchiveAction()}\n            {this.renderRemoveAction()}\n          </ActionButtons>\n        </td>\n      </tr>\n    );\n  }\n}\n\nexport default Row;\n"]},"metadata":{},"sourceType":"module"}