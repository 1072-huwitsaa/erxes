{"ast":null,"code":"import _classCallCheck from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/anu-ujin/Works/open-source/erxes/ui/src/modules/settings/integrations/components/Accounts.tsx\";\nimport Button from \"erxes-common-ui/lib/components/button\";\nimport Icon from \"erxes-common-ui/lib/components/icon\";\nimport { CenterText } from \"modules/activityLogs/styles\";\nimport EmptyState from \"modules/common/components/EmptyState\";\nimport { __, confirm } from \"modules/common/utils\";\nimport React from \"react\";\nimport { AccountBox, AccountItem, AccountTitle, FacebookButton, GoogleButton } from \"../styles\";\n\nvar Accounts =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Accounts, _React$Component);\n\n  function Accounts(props) {\n    var _this;\n\n    _classCallCheck(this, Accounts);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Accounts).call(this, props));\n\n    _this.componentDidMount = function () {\n      var accounts = _this.props.accounts;\n\n      if (accounts && accounts.length > 0) {\n        _this.onSelectAccount(accounts[0]._id);\n      }\n    };\n\n    _this.onSelectAccount = function (accountId) {\n      _this.props.onSelect(accountId);\n\n      _this.setState({\n        accountId: accountId || \"\"\n      });\n    };\n\n    _this.state = {};\n    return _this;\n  }\n\n  _createClass(Accounts, [{\n    key: \"onRemove\",\n    value: function onRemove(accountId) {\n      var _this2 = this;\n\n      var removeAccount = this.props.removeAccount;\n      confirm().then(function () {\n        removeAccount(accountId);\n\n        _this2.setState({\n          accountId: \"\"\n        });\n      });\n    }\n  }, {\n    key: \"renderButton\",\n    value: function renderButton() {\n      var _this$props = this.props,\n          onAdd = _this$props.onAdd,\n          kind = _this$props.kind;\n\n      if (kind === \"gmail\" || kind === \"nylas-gmail\") {\n        return React.createElement(GoogleButton, {\n          href: \"#add\",\n          onClick: onAdd,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61\n          },\n          __self: this\n        });\n      }\n\n      if (kind === \"facebook\") {\n        return React.createElement(FacebookButton, {\n          onClick: onAdd,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66\n          },\n          __self: this\n        }, React.createElement(Icon, {\n          icon: \"facebook-official\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 67\n          },\n          __self: this\n        }), __(\"Continue with Facebook\"));\n      }\n\n      return React.createElement(Button, {\n        uppercase: false,\n        btnStyle: \"primary\",\n        icon: \"plus-circle\",\n        onClick: onAdd,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, \"Add Account\");\n    }\n  }, {\n    key: \"renderAccountAction\",\n    value: function renderAccountAction() {\n      var accountId = this.state.accountId;\n      var renderForm = this.props.renderForm;\n\n      if (!accountId && renderForm) {\n        return renderForm();\n      }\n\n      return this.renderButton();\n    }\n  }, {\n    key: \"renderAccounts\",\n    value: function renderAccounts() {\n      var _this3 = this;\n\n      var accounts = this.props.accounts;\n\n      if (accounts.length === 0) {\n        return React.createElement(EmptyState, {\n          icon: \"user-6\",\n          text: __(\"There is no linked accounts\"),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101\n          },\n          __self: this\n        });\n      }\n\n      return accounts.map(function (account) {\n        return React.createElement(AccountItem, {\n          key: account._id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 106\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107\n          },\n          __self: this\n        }, account.name), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 109\n          },\n          __self: this\n        }, React.createElement(Button, {\n          onClick: _this3.onSelectAccount.bind(_this3, account._id),\n          uppercase: false,\n          btnStyle: _this3.state.accountId === account._id ? \"primary\" : \"simple\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110\n          },\n          __self: this\n        }, _this3.state.accountId === account._id ? __(\"Selected\") : __(\"Select This Account\")), React.createElement(Button, {\n          onClick: _this3.onRemove.bind(_this3, account._id),\n          btnStyle: \"danger\",\n          uppercase: false,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 122\n          },\n          __self: this\n        }, __(\"Remove\"))));\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(React.Fragment, null, React.createElement(AccountBox, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, React.createElement(AccountTitle, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, __(\"Linked Accounts\")), this.renderAccounts()), React.createElement(CenterText, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, __(\"OR\")), React.createElement(CenterText, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, this.renderAccountAction()));\n    }\n  }]);\n\n  return Accounts;\n}(React.Component);\n\nexport default Accounts;","map":{"version":3,"sources":["/home/anu-ujin/Works/open-source/erxes/ui/src/modules/settings/integrations/components/Accounts.tsx"],"names":["Button","Icon","CenterText","EmptyState","__","confirm","React","AccountBox","AccountItem","AccountTitle","FacebookButton","GoogleButton","Accounts","props","componentDidMount","accounts","length","onSelectAccount","_id","accountId","onSelect","setState","state","removeAccount","then","onAdd","kind","renderForm","renderButton","map","account","name","bind","onRemove","renderAccounts","renderAccountAction","Component"],"mappings":"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","sourcesContent":["import Button from \"erxes-common-ui/lib/components/button\";\nimport Icon from \"erxes-common-ui/lib/components/icon\";\nimport { CenterText } from \"modules/activityLogs/styles\";\nimport EmptyState from \"modules/common/components/EmptyState\";\nimport { IFormProps } from \"modules/common/types\";\nimport { __, confirm } from \"modules/common/utils\";\nimport React from \"react\";\nimport {\n  AccountBox,\n  AccountItem,\n  AccountTitle,\n  FacebookButton,\n  GoogleButton,\n} from \"../styles\";\nimport { IAccount, IntegrationTypes } from \"../types\";\n\ntype Props = {\n  onSelect: (accountId?: string) => void;\n  accounts: IAccount[];\n  formProps?: IFormProps;\n  onAdd: () => void;\n  kind: IntegrationTypes;\n  renderForm?: () => JSX.Element;\n  removeAccount: (accountId: string) => void;\n};\n\nclass Accounts extends React.Component<Props, { accountId?: string }> {\n  constructor(props) {\n    super(props);\n\n    this.state = {};\n  }\n\n  componentDidMount = () => {\n    const accounts = this.props.accounts;\n\n    if (accounts && accounts.length > 0) {\n      this.onSelectAccount(accounts[0]._id);\n    }\n  };\n\n  onSelectAccount = (accountId: string) => {\n    this.props.onSelect(accountId);\n\n    this.setState({ accountId: accountId || \"\" });\n  };\n\n  onRemove(accountId: string) {\n    const { removeAccount } = this.props;\n\n    confirm().then(() => {\n      removeAccount(accountId);\n      this.setState({ accountId: \"\" });\n    });\n  }\n\n  renderButton() {\n    const { onAdd, kind } = this.props;\n\n    if (kind === \"gmail\" || kind === \"nylas-gmail\") {\n      return <GoogleButton href=\"#add\" onClick={onAdd} />;\n    }\n\n    if (kind === \"facebook\") {\n      return (\n        <FacebookButton onClick={onAdd}>\n          <Icon icon=\"facebook-official\" />\n          {__(\"Continue with Facebook\")}\n        </FacebookButton>\n      );\n    }\n\n    return (\n      <Button\n        uppercase={false}\n        btnStyle=\"primary\"\n        icon=\"plus-circle\"\n        onClick={onAdd}\n      >\n        Add Account\n      </Button>\n    );\n  }\n\n  renderAccountAction() {\n    const { accountId } = this.state;\n    const { renderForm } = this.props;\n\n    if (!accountId && renderForm) {\n      return renderForm();\n    }\n\n    return this.renderButton();\n  }\n\n  renderAccounts() {\n    const { accounts } = this.props;\n\n    if (accounts.length === 0) {\n      return (\n        <EmptyState icon=\"user-6\" text={__(\"There is no linked accounts\")} />\n      );\n    }\n\n    return accounts.map((account) => (\n      <AccountItem key={account._id}>\n        <span>{account.name}</span>\n\n        <div>\n          <Button\n            onClick={this.onSelectAccount.bind(this, account._id)}\n            uppercase={false}\n            btnStyle={\n              this.state.accountId === account._id ? \"primary\" : \"simple\"\n            }\n          >\n            {this.state.accountId === account._id\n              ? __(\"Selected\")\n              : __(\"Select This Account\")}\n          </Button>\n\n          <Button\n            onClick={this.onRemove.bind(this, account._id)}\n            btnStyle=\"danger\"\n            uppercase={false}\n          >\n            {__(\"Remove\")}\n          </Button>\n        </div>\n      </AccountItem>\n    ));\n  }\n  render() {\n    return (\n      <>\n        <AccountBox>\n          <AccountTitle>{__(\"Linked Accounts\")}</AccountTitle>\n          {this.renderAccounts()}\n        </AccountBox>\n        <CenterText>{__(\"OR\")}</CenterText>\n        <CenterText>{this.renderAccountAction()}</CenterText>\n      </>\n    );\n  }\n}\n\nexport default Accounts;\n"]},"metadata":{},"sourceType":"module"}