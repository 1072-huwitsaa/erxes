{"ast":null,"code":"import _defineProperty from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _taggedTemplateLiteral from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/home/anu-ujin/Works/open-source/erxes/ui/src/modules/common/components/FilterByParams.tsx\";\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  > input {\\n    padding: 10px 20px;\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport DataWithLoader from 'modules/common/components/DataWithLoader';\nimport EmptyState from 'modules/common/components/EmptyState';\nimport { router } from 'modules/common/utils';\nimport Icon from 'erxes-common-ui/lib/components/icon';\nimport { FieldStyle, SidebarCounter, SidebarList } from 'modules/layout/styles';\nimport React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport styled from 'styled-components';\nimport Filter from './filterableList/Filter';\nvar PopoverContent = styled.div(_templateObject());\n\nvar FilterByParams =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(FilterByParams, _React$Component);\n\n  function FilterByParams(props) {\n    var _this;\n\n    _classCallCheck(this, FilterByParams);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(FilterByParams).call(this, props));\n\n    _this.filterItems = function (e) {\n      _this.setState({\n        key: e.target.value\n      });\n\n      var update = _this.props.update;\n\n      if (update) {\n        update();\n      }\n    };\n\n    _this.state = {\n      key: ''\n    };\n    return _this;\n  }\n\n  _createClass(FilterByParams, [{\n    key: \"renderItems\",\n    value: function renderItems() {\n      var _this$props = this.props,\n          history = _this$props.history,\n          fields = _this$props.fields,\n          counts = _this$props.counts,\n          paramKey = _this$props.paramKey,\n          icon = _this$props.icon,\n          searchable = _this$props.searchable;\n      var key = this.state.key;\n\n      if (fields.length === 0) {\n        return React.createElement(EmptyState, {\n          icon: icon,\n          text: \"No templates\",\n          size: \"full\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 56\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(PopoverContent, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, searchable && React.createElement(Filter, {\n        onChange: this.filterItems,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }), React.createElement(SidebarList, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, fields.map(function (field) {\n        // filter items by key\n        if (key && field.name.toLowerCase().indexOf(key) < 0) {\n          return false;\n        }\n\n        var onClick = function onClick() {\n          router.setParams(history, _defineProperty({}, paramKey, field._id));\n          router.removeParams(history, 'page');\n        };\n\n        return React.createElement(\"li\", {\n          key: field._id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 75\n          },\n          __self: this\n        }, React.createElement(\"a\", {\n          href: \"#param\",\n          tabIndex: 0,\n          className: router.getParam(history, [paramKey]) === field._id ? 'active' : '',\n          onClick: onClick,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 76\n          },\n          __self: this\n        }, icon ? React.createElement(Icon, {\n          icon: icon,\n          style: {\n            color: field.colorCode\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87\n          },\n          __self: this\n        }) : null, ' ', React.createElement(FieldStyle, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89\n          },\n          __self: this\n        }, field.name), React.createElement(SidebarCounter, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90\n          },\n          __self: this\n        }, counts[field._id])));\n      })));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          fields = _this$props2.fields,\n          loading = _this$props2.loading;\n      return React.createElement(DataWithLoader, {\n        loading: loading,\n        count: fields.length,\n        data: this.renderItems(),\n        emptyText: \"Empty\",\n        emptyIcon: \"folder-2\",\n        size: \"small\",\n        objective: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return FilterByParams;\n}(React.Component);\n\nexport default withRouter(FilterByParams);","map":{"version":3,"sources":["/home/anu-ujin/Works/open-source/erxes/ui/src/modules/common/components/FilterByParams.tsx"],"names":["DataWithLoader","EmptyState","router","Icon","FieldStyle","SidebarCounter","SidebarList","React","withRouter","styled","Filter","PopoverContent","div","FilterByParams","props","filterItems","e","setState","key","target","value","update","state","history","fields","counts","paramKey","icon","searchable","length","map","field","name","toLowerCase","indexOf","onClick","setParams","_id","removeParams","getParam","color","colorCode","loading","renderItems","Component"],"mappings":"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","sourcesContent":["import DataWithLoader from 'modules/common/components/DataWithLoader';\nimport EmptyState from 'modules/common/components/EmptyState';\nimport { router } from 'modules/common/utils';\nimport Icon from 'erxes-common-ui/lib/components/icon';\nimport { FieldStyle, SidebarCounter, SidebarList } from 'modules/layout/styles';\nimport React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport styled from 'styled-components';\nimport { IRouterProps } from '../types';\nimport Filter from './filterableList/Filter';\n\ninterface IProps extends IRouterProps {\n  fields: any[];\n  counts: any;\n  paramKey: string;\n  icon?: string;\n  loading: boolean;\n  searchable?: boolean;\n  update?: () => void;\n}\n\ntype State = {\n  key: string;\n};\n\nconst PopoverContent = styled.div`\n  > input {\n    padding: 10px 20px;\n  }\n`;\n\nclass FilterByParams extends React.Component<IProps, State> {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      key: ''\n    };\n  }\n\n  filterItems = e => {\n    this.setState({ key: e.target.value });\n\n    const { update } = this.props;\n\n    if (update) {\n      update();\n    }\n  };\n\n  renderItems() {\n    const { history, fields, counts, paramKey, icon, searchable } = this.props;\n    const { key } = this.state;\n\n    if (fields.length === 0) {\n      return <EmptyState icon={icon} text=\"No templates\" size=\"full\" />;\n    }\n\n    return (\n      <PopoverContent>\n        {searchable && <Filter onChange={this.filterItems} />}\n        <SidebarList>\n          {fields.map(field => {\n            // filter items by key\n            if (key && field.name.toLowerCase().indexOf(key) < 0) {\n              return false;\n            }\n\n            const onClick = () => {\n              router.setParams(history, { [paramKey]: field._id });\n              router.removeParams(history, 'page');\n            };\n\n            return (\n              <li key={field._id}>\n                <a\n                  href=\"#param\"\n                  tabIndex={0}\n                  className={\n                    router.getParam(history, [paramKey]) === field._id\n                      ? 'active'\n                      : ''\n                  }\n                  onClick={onClick}\n                >\n                  {icon ? (\n                    <Icon icon={icon} style={{ color: field.colorCode }} />\n                  ) : null}{' '}\n                  <FieldStyle>{field.name}</FieldStyle>\n                  <SidebarCounter>{counts[field._id]}</SidebarCounter>\n                </a>\n              </li>\n            );\n          })}\n        </SidebarList>\n      </PopoverContent>\n    );\n  }\n\n  render() {\n    const { fields, loading } = this.props;\n\n    return (\n      <DataWithLoader\n        loading={loading}\n        count={fields.length}\n        data={this.renderItems()}\n        emptyText=\"Empty\"\n        emptyIcon=\"folder-2\"\n        size=\"small\"\n        objective={true}\n      />\n    );\n  }\n}\n\nexport default withRouter<IProps>(FilterByParams);\n"]},"metadata":{},"sourceType":"module"}