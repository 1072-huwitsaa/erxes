{"ast":null,"code":"import _classCallCheck from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _taggedTemplateLiteral from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/home/anu-ujin/Works/open-source/erxes/ui/src/modules/deals/components/calendar/DealColumn.tsx\";\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\n  list-style: none;\\n  overflow: hidden;\\n  margin: 0 0 5px;\\n  padding: 0 16px;\\n\\n  li {\\n    padding-right: 5px;\\n    font-size: 12px;\\n\\n    span {\\n      font-weight: bold;\\n      font-size: 10px;\\n    }\\n\\n    &:after {\\n      margin-left: 5px;\\n    }\\n\\n    &:last-child:after {\\n      content: '';\\n    }\\n  }\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n  position: absolute;\\n  z-index: 2;\\n  bottom: 31px;\\n  left: 0;\\n  right: 0;\\n  text-align: center;\\n  background: \", \";\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  position: relative;\\n  z-index: 1;\\n  height: 100%;\\n  padding: 0 4px 90px;\\n  margin: 0 4px;\\n  overflow-y: auto;\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  position: relative;\\n  height: 100%;\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport { AddNew } from 'modules/boards/styles/stage';\nimport EmptyState from 'modules/common/components/EmptyState';\nimport Icon from 'erxes-common-ui/lib/components/icon';\nimport { colors } from 'modules/common/styles';\nimport { __ } from 'modules/common/utils';\nimport React from 'react';\nimport styled from 'styled-components';\nimport options from '../../options';\nimport Deal from '../DealItem';\nvar Container = styled.div(_templateObject());\nvar ContentBody = styled.div(_templateObject2());\nvar Footer = styled.div(_templateObject3(), colors.bgLight);\nvar Amount = styled.ul(_templateObject4());\n\nvar DealColumn =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(DealColumn, _React$Component);\n\n  function DealColumn() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, DealColumn);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(DealColumn)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.onLoadMore = function () {\n      var _this$props = _this.props,\n          deals = _this$props.deals,\n          onLoadMore = _this$props.onLoadMore;\n      onLoadMore(deals.length);\n    };\n\n    return _this;\n  }\n\n  _createClass(DealColumn, [{\n    key: \"renderContent\",\n    value: function renderContent() {\n      var _this$props2 = this.props,\n          deals = _this$props2.deals,\n          onUpdate = _this$props2.onUpdate,\n          onRemove = _this$props2.onRemove;\n\n      if (deals.length === 0) {\n        return React.createElement(EmptyState, {\n          icon: \"piggy-bank\",\n          text: \"No Sales Pipelines\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81\n          },\n          __self: this\n        });\n      }\n\n      var contents = deals.map(function (deal, index) {\n        return React.createElement(Deal, {\n          options: options,\n          key: index,\n          item: deal,\n          onRemove: onRemove,\n          onUpdate: onUpdate,\n          portable: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85\n          },\n          __self: this\n        });\n      });\n      return React.createElement(ContentBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, contents);\n    }\n  }, {\n    key: \"renderAmount\",\n    value: function renderAmount(currencies) {\n      return currencies.map(function (total, index) {\n        return React.createElement(React.Fragment, null, total.amount.toLocaleString(), ' ', React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 102\n          },\n          __self: this\n        }, total.name, index < currencies.length - 1 && ', '));\n      });\n    }\n  }, {\n    key: \"renderTotalAmount\",\n    value: function renderTotalAmount() {\n      var _this2 = this;\n\n      var dealTotalAmounts = this.props.dealTotalAmounts;\n      var totalForType = dealTotalAmounts.totalForType || [];\n      return React.createElement(Amount, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, totalForType.map(function (type) {\n        return React.createElement(\"li\", {\n          key: type._id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 118\n          },\n          __self: this\n        }, type.name, \": \"), _this2.renderAmount(type.currencies));\n      }));\n    }\n  }, {\n    key: \"renderFooter\",\n    value: function renderFooter() {\n      var _this$props3 = this.props,\n          deals = _this$props3.deals,\n          dealTotalAmounts = _this$props3.dealTotalAmounts;\n      var count = dealTotalAmounts.dealCount;\n\n      if (deals.length === count || deals.length > count) {\n        return null;\n      }\n\n      return React.createElement(Footer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, React.createElement(AddNew, {\n        onClick: this.onLoadMore,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        icon: \"refresh\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }), \" \", __('Load more')));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(Container, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, this.renderTotalAmount(), this.renderContent(), this.renderFooter());\n    }\n  }]);\n\n  return DealColumn;\n}(React.Component);\n\nexport default DealColumn;","map":{"version":3,"sources":["/home/anu-ujin/Works/open-source/erxes/ui/src/modules/deals/components/calendar/DealColumn.tsx"],"names":["AddNew","EmptyState","Icon","colors","__","React","styled","options","Deal","Container","div","ContentBody","Footer","bgLight","Amount","ul","DealColumn","onLoadMore","props","deals","length","onUpdate","onRemove","contents","map","deal","index","currencies","total","amount","toLocaleString","name","dealTotalAmounts","totalForType","type","_id","renderAmount","count","dealCount","renderTotalAmount","renderContent","renderFooter","Component"],"mappings":"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","sourcesContent":["import { AddNew } from 'modules/boards/styles/stage';\nimport EmptyState from 'modules/common/components/EmptyState';\nimport Icon from 'erxes-common-ui/lib/components/icon';\nimport { colors } from 'modules/common/styles';\nimport { IDateColumn } from 'modules/common/types';\nimport { __ } from 'modules/common/utils';\nimport React from 'react';\nimport styled from 'styled-components';\nimport options from '../../options';\nimport { IDeal, IDealTotalAmount } from '../../types';\nimport Deal from '../DealItem';\n\ntype Props = {\n  deals: IDeal[];\n  date: IDateColumn;\n  dealTotalAmounts: IDealTotalAmount;\n  onUpdate: (deal: IDeal) => void;\n  onRemove: () => void;\n  onLoadMore: (skip: number) => void;\n};\n\nconst Container = styled.div`\n  position: relative;\n  height: 100%;\n`;\n\nconst ContentBody = styled.div`\n  position: relative;\n  z-index: 1;\n  height: 100%;\n  padding: 0 4px 90px;\n  margin: 0 4px;\n  overflow-y: auto;\n`;\n\nconst Footer = styled.div`\n  position: absolute;\n  z-index: 2;\n  bottom: 31px;\n  left: 0;\n  right: 0;\n  text-align: center;\n  background: ${colors.bgLight};\n`;\n\nconst Amount = styled.ul`\n  list-style: none;\n  overflow: hidden;\n  margin: 0 0 5px;\n  padding: 0 16px;\n\n  li {\n    padding-right: 5px;\n    font-size: 12px;\n\n    span {\n      font-weight: bold;\n      font-size: 10px;\n    }\n\n    &:after {\n      margin-left: 5px;\n    }\n\n    &:last-child:after {\n      content: '';\n    }\n  }\n`;\n\nclass DealColumn extends React.Component<Props, {}> {\n  onLoadMore = () => {\n    const { deals, onLoadMore } = this.props;\n    onLoadMore(deals.length);\n  };\n\n  renderContent() {\n    const { deals, onUpdate, onRemove } = this.props;\n\n    if (deals.length === 0) {\n      return <EmptyState icon=\"piggy-bank\" text=\"No Sales Pipelines\" />;\n    }\n\n    const contents = deals.map((deal: IDeal, index: number) => (\n      <Deal\n        options={options}\n        key={index}\n        item={deal}\n        onRemove={onRemove}\n        onUpdate={onUpdate}\n        portable={true}\n      />\n    ));\n\n    return <ContentBody>{contents}</ContentBody>;\n  }\n\n  renderAmount(currencies: [{ name: string; amount: number }]) {\n    return currencies.map((total, index) => (\n      <>\n        {total.amount.toLocaleString()}{' '}\n        <span>\n          {total.name}\n          {index < currencies.length - 1 && ', '}\n        </span>\n      </>\n    ));\n  }\n\n  renderTotalAmount() {\n    const { dealTotalAmounts } = this.props;\n    const totalForType = dealTotalAmounts.totalForType || [];\n\n    return (\n      <Amount>\n        {totalForType.map(type => (\n          <li key={type._id}>\n            <span>{type.name}: </span>\n            {this.renderAmount(type.currencies)}\n          </li>\n        ))}\n      </Amount>\n    );\n  }\n\n  renderFooter() {\n    const { deals, dealTotalAmounts } = this.props;\n    const count = dealTotalAmounts.dealCount;\n\n    if (deals.length === count || deals.length > count) {\n      return null;\n    }\n\n    return (\n      <Footer>\n        <AddNew onClick={this.onLoadMore}>\n          <Icon icon=\"refresh\" /> {__('Load more')}\n        </AddNew>\n      </Footer>\n    );\n  }\n\n  render() {\n    return (\n      <Container>\n        {this.renderTotalAmount()}\n        {this.renderContent()}\n        {this.renderFooter()}\n      </Container>\n    );\n  }\n}\n\nexport default DealColumn;\n"]},"metadata":{},"sourceType":"module"}