{"ast":null,"code":"import _classCallCheck from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/anu-ujin/Works/open-source/erxes/ui/src/modules/knowledgeBase/components/KnowledgeBase.tsx\";\nimport Button from 'modules/common/components/Button';\nimport ModalTrigger from 'modules/common/components/ModalTrigger';\nimport Pagination from 'modules/common/components/pagination/Pagination';\nimport { Title } from 'modules/common/styles/main';\nimport { __ } from 'modules/common/utils';\nimport Wrapper from 'modules/layout/components/Wrapper';\nimport React from 'react';\nimport ArticleForm from '../containers/article/ArticleForm';\nimport ArticleList from '../containers/article/ArticleList';\nimport KnowledgeList from '../containers/knowledge/KnowledgeList';\n\nvar KnowledgeBase =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(KnowledgeBase, _React$Component);\n\n  function KnowledgeBase() {\n    _classCallCheck(this, KnowledgeBase);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(KnowledgeBase).apply(this, arguments));\n  }\n\n  _createClass(KnowledgeBase, [{\n    key: \"breadcrumb\",\n    value: function breadcrumb() {\n      var currentCategory = this.props.currentCategory || {\n        title: '',\n        firstTopic: {\n          title: ''\n        }\n      };\n      var currentKnowledgeBase = currentCategory.firstTopic || {\n        title: ''\n      };\n      var list = [{\n        title: __('Knowledge Base'),\n        link: '/knowledgeBase'\n      }];\n      var categoryLink = \"/knowledgeBase?id=\".concat(currentCategory._id);\n\n      if (currentKnowledgeBase.title) {\n        list.push({\n          title: currentKnowledgeBase.title,\n          link: currentCategory ? categoryLink : ''\n        });\n      }\n\n      if (currentCategory.title) {\n        list.push({\n          title: currentCategory.title,\n          link: categoryLink\n        });\n      }\n\n      return list;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          articlesCount = _this$props.articlesCount,\n          queryParams = _this$props.queryParams,\n          currentCategory = _this$props.currentCategory;\n      var trigger = React.createElement(Button, {\n        btnStyle: \"primary\",\n        uppercase: false,\n        icon: \"plus-circle\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50\n        },\n        __self: this\n      }, \"Add Article\");\n\n      var content = function content(props) {\n        return React.createElement(ArticleForm, Object.assign({}, props, {\n          queryParams: queryParams,\n          currentCategoryId: currentCategory._id,\n          topicIds: currentCategory.firstTopic && currentCategory.firstTopic._id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 56\n          },\n          __self: this\n        }));\n      };\n\n      var actionBarLeft = currentCategory._id && React.createElement(ModalTrigger, {\n        title: \"Add Article\",\n        trigger: trigger,\n        size: \"lg\",\n        autoOpenKey: \"showKBAddArticleModal\",\n        content: content,\n        enforceFocus: false,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      });\n      var leftActionBar = React.createElement(Title, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, currentCategory.title, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, \"(\", articlesCount, \" \", articlesCount > 1 ? __('articles') : __('article'), \")\"));\n      return React.createElement(Wrapper, {\n        header: React.createElement(Wrapper.Header, {\n          title: \"\".concat(currentCategory.title || ''),\n          breadcrumb: this.breadcrumb(),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87\n          },\n          __self: this\n        }),\n        leftSidebar: React.createElement(KnowledgeList, {\n          currentCategoryId: currentCategory._id,\n          articlesCount: articlesCount,\n          queryParams: queryParams,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 93\n          },\n          __self: this\n        }),\n        actionBar: React.createElement(Wrapper.ActionBar, {\n          left: leftActionBar,\n          right: actionBarLeft,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100\n          },\n          __self: this\n        }),\n        footer: currentCategory._id && React.createElement(Pagination, {\n          count: articlesCount,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 102\n          },\n          __self: this\n        }),\n        transparent: true,\n        content: React.createElement(ArticleList, {\n          queryParams: queryParams,\n          currentCategoryId: currentCategory._id,\n          topicIds: currentCategory.firstTopic && currentCategory.firstTopic._id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105\n          },\n          __self: this\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return KnowledgeBase;\n}(React.Component);\n\nexport default KnowledgeBase;","map":{"version":3,"sources":["/home/anu-ujin/Works/open-source/erxes/ui/src/modules/knowledgeBase/components/KnowledgeBase.tsx"],"names":["Button","ModalTrigger","Pagination","Title","__","Wrapper","React","ArticleForm","ArticleList","KnowledgeList","KnowledgeBase","currentCategory","props","title","firstTopic","currentKnowledgeBase","list","link","categoryLink","_id","push","articlesCount","queryParams","trigger","content","actionBarLeft","leftActionBar","breadcrumb","Component"],"mappings":"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","sourcesContent":["import Button from 'modules/common/components/Button';\nimport ModalTrigger from 'modules/common/components/ModalTrigger';\nimport Pagination from 'modules/common/components/pagination/Pagination';\nimport { Title } from 'modules/common/styles/main';\nimport { __ } from 'modules/common/utils';\nimport Wrapper from 'modules/layout/components/Wrapper';\nimport React from 'react';\nimport ArticleForm from '../containers/article/ArticleForm';\nimport ArticleList from '../containers/article/ArticleList';\nimport KnowledgeList from '../containers/knowledge/KnowledgeList';\nimport { ICategory } from '../types';\n\ntype Props = {\n  queryParams: any;\n  articlesCount: number;\n  currentCategory: ICategory;\n};\n\nclass KnowledgeBase extends React.Component<Props> {\n  breadcrumb() {\n    const currentCategory = this.props.currentCategory || {\n      title: '',\n      firstTopic: { title: '' }\n    };\n    const currentKnowledgeBase = currentCategory.firstTopic || { title: '' };\n    const list = [{ title: __('Knowledge Base'), link: '/knowledgeBase' }];\n    const categoryLink = `/knowledgeBase?id=${currentCategory._id}`;\n\n    if (currentKnowledgeBase.title) {\n      list.push({\n        title: currentKnowledgeBase.title,\n        link: currentCategory ? categoryLink : ''\n      });\n    }\n\n    if (currentCategory.title) {\n      list.push({\n        title: currentCategory.title,\n        link: categoryLink\n      });\n    }\n\n    return list;\n  }\n\n  render() {\n    const { articlesCount, queryParams, currentCategory } = this.props;\n\n    const trigger = (\n      <Button btnStyle=\"primary\" uppercase={false} icon=\"plus-circle\">\n        Add Article\n      </Button>\n    );\n\n    const content = props => (\n      <ArticleForm\n        {...props}\n        queryParams={queryParams}\n        currentCategoryId={currentCategory._id}\n        topicIds={currentCategory.firstTopic && currentCategory.firstTopic._id}\n      />\n    );\n\n    const actionBarLeft = currentCategory._id && (\n      <ModalTrigger\n        title=\"Add Article\"\n        trigger={trigger}\n        size=\"lg\"\n        autoOpenKey=\"showKBAddArticleModal\"\n        content={content}\n        enforceFocus={false}\n      />\n    );\n\n    const leftActionBar = (\n      <Title>\n        {currentCategory.title}\n        <span>\n          ({articlesCount} {articlesCount > 1 ? __('articles') : __('article')})\n        </span>\n      </Title>\n    );\n\n    return (\n      <Wrapper\n        header={\n          <Wrapper.Header\n            title={`${currentCategory.title || ''}`}\n            breadcrumb={this.breadcrumb()}\n          />\n        }\n        leftSidebar={\n          <KnowledgeList\n            currentCategoryId={currentCategory._id}\n            articlesCount={articlesCount}\n            queryParams={queryParams}\n          />\n        }\n        actionBar={\n          <Wrapper.ActionBar left={leftActionBar} right={actionBarLeft} />\n        }\n        footer={currentCategory._id && <Pagination count={articlesCount} />}\n        transparent={true}\n        content={\n          <ArticleList\n            queryParams={queryParams}\n            currentCategoryId={currentCategory._id}\n            topicIds={\n              currentCategory.firstTopic && currentCategory.firstTopic._id\n            }\n          />\n        }\n      />\n    );\n  }\n}\n\nexport default KnowledgeBase;\n"]},"metadata":{},"sourceType":"module"}