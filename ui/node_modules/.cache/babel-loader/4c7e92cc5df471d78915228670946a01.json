{"ast":null,"code":"import _classCallCheck from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/anu-ujin/Works/open-source/erxes/ui/src/modules/inbox/components/conversationDetail/sidebar/Sidebar.tsx\";\nimport { Tabs, TabTitle } from 'modules/common/components/tabs';\nimport Sidebar from 'modules/layout/components/Sidebar';\nimport React from 'react';\nimport { BasicInfo, TabContent } from './styles';\nimport asyncComponent from 'modules/common/components/AsyncComponent';\nimport Box from 'modules/common/components/Box';\nimport { __ } from 'modules/common/utils';\nimport CompanySection from 'modules/companies/components/common/CompanySection';\nimport WebsiteActivity from 'modules/customers/components/common/WebsiteActivity';\nvar ActionSection = asyncComponent(function () {\n  return import(\n  /* webpackChunkName:\"Inbox-Sidebar-ActionSection\" */\n  'modules/customers/containers/common/ActionSection');\n});\nvar CustomFieldsSection = asyncComponent(function () {\n  return import(\n  /* webpackChunkName:\"Inbox-Sidebar-CustomFieldsSection\" */\n  'modules/customers/containers/common/CustomFieldsSection');\n}, {\n  height: '200px',\n  width: '100%',\n  color: '#fff'\n});\nvar PortableDeals = asyncComponent(function () {\n  return import(\n  /* webpackChunkName:\"Inbox-Sidebar-PortableDeals\" */\n  'modules/deals/components/PortableDeals');\n});\nvar PortableTasks = asyncComponent(function () {\n  return import(\n  /* webpackChunkName:\"Inbox-Sidebar-PortableTasks\" */\n  'modules/tasks/components/PortableTasks');\n});\nvar PortableTickets = asyncComponent(function () {\n  return import(\n  /* webpackChunkName:\"Inbox-Sidebar-PortableTickets\" */\n  'modules/tickets/components/PortableTickets');\n});\nvar Contacts = asyncComponent(function () {\n  return import(\n  /* webpackChunkName:\"Inbox-Sidebar-Contacts\" */\n  'modules/companies/components/detail/Contacts');\n});\nvar DetailInfo = asyncComponent(function () {\n  return import(\n  /* webpackChunkName:\"Inbox-Sidebar-InfoSection\" */\n  'modules/customers/components/common/DetailInfo');\n}, {\n  isBox: true\n});\nvar InfoSection = asyncComponent(function () {\n  return import(\n  /* webpackChunkName:\"Inbox-Sidebar-InfoSection\" */\n  'modules/customers/components/common/InfoSection');\n}, {\n  withImage: true\n});\nvar DevicePropertiesSection = asyncComponent(function () {\n  return import(\n  /* webpackChunkName:\"Inbox-Sidebar-DevicePropertiesSection\" */\n  'modules/customers/components/common/DevicePropertiesSection');\n});\nvar TrackedDataSection = asyncComponent(function () {\n  return import(\n  /* webpackChunkName:\"Inbox-Sidebar-TrackedDataSection\" */\n  'modules/customers/components/common/TrackedDataSection');\n});\nvar TaggerSection = asyncComponent(function () {\n  return import(\n  /* webpackChunkName:\"Inbox-Sidebar-TaggerSection\" */\n  'modules/customers/components/common/TaggerSection');\n}, {\n  height: '200px',\n  width: '100%',\n  color: '#fff'\n});\nvar SidebarActivity = asyncComponent(function () {\n  return import(\n  /* webpackChunkName:\"Inbox-Sidebar-SidebarActivity\" */\n  'modules/inbox/containers/conversationDetail/SidebarActivity');\n});\nvar ConversationDetails = asyncComponent(function () {\n  return import(\n  /* webpackChunkName:\"Inbox-Sidebar-ConversationDetails\" */\n  './ConversationDetails');\n}, {\n  isBox: true\n});\n\nvar Index =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Index, _React$Component);\n\n  function Index(props) {\n    var _this;\n\n    _classCallCheck(this, Index);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Index).call(this, props));\n\n    _this.onTabClick = function (currentTab) {\n      _this.setState({\n        currentTab: currentTab\n      });\n    };\n\n    _this.onSubtabClick = function (currentSubTab) {\n      _this.setState({\n        currentSubTab: currentSubTab\n      });\n    };\n\n    _this.renderTrackedData = function (_ref) {\n      var customer = _ref.customer,\n          kind = _ref.kind,\n          toggleSection = _ref.toggleSection;\n      return React.createElement(TrackedDataSection, {\n        customer: customer,\n        collapseCallback: toggleSection,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      });\n    };\n\n    _this.renderDeviceProperties = function (_ref2) {\n      var customer = _ref2.customer,\n          kind = _ref2.kind,\n          toggleSection = _ref2.toggleSection;\n\n      if (!(kind === 'messenger' || kind === 'form')) {\n        return null;\n      }\n\n      return React.createElement(DevicePropertiesSection, {\n        customer: customer,\n        collapseCallback: toggleSection,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      });\n    };\n\n    _this.state = {\n      currentTab: 'customer',\n      currentSubTab: 'details'\n    };\n    return _this;\n  }\n\n  _createClass(Index, [{\n    key: \"renderTabSubContent\",\n    value: function renderTabSubContent() {\n      var currentSubTab = this.state.currentSubTab;\n      var _this$props = this.props,\n          currentUser = _this$props.currentUser,\n          taggerRefetchQueries = _this$props.taggerRefetchQueries,\n          conversation = _this$props.conversation,\n          customer = _this$props.customer,\n          toggleSection = _this$props.toggleSection,\n          loading = _this$props.loading;\n\n      var _ref3 = customer.integration || {},\n          _ref3$kind = _ref3.kind,\n          kind = _ref3$kind === void 0 ? '' : _ref3$kind;\n\n      if (currentSubTab === 'details') {\n        return React.createElement(TabContent, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 179\n          },\n          __self: this\n        }, React.createElement(DetailInfo, {\n          customer: customer,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 180\n          },\n          __self: this\n        }), React.createElement(Box, {\n          title: __('Conversation details'),\n          name: \"showConversationDetails\",\n          callback: toggleSection,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 181\n          },\n          __self: this\n        }, React.createElement(ConversationDetails, {\n          conversation: conversation,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 186\n          },\n          __self: this\n        })), React.createElement(TaggerSection, {\n          data: customer,\n          type: \"customer\",\n          refetchQueries: taggerRefetchQueries,\n          collapseCallback: toggleSection,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 188\n          },\n          __self: this\n        }), React.createElement(CustomFieldsSection, {\n          loading: loading,\n          customer: customer,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 194\n          },\n          __self: this\n        }), this.renderTrackedData({\n          customer: customer,\n          kind: kind,\n          toggleSection: toggleSection\n        }), this.renderDeviceProperties({\n          customer: customer,\n          kind: kind,\n          toggleSection: toggleSection\n        }), React.createElement(WebsiteActivity, {\n          urlVisits: customer.urlVisits || [],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 197\n          },\n          __self: this\n        }));\n      }\n\n      if (currentSubTab === 'activity') {\n        return React.createElement(SidebarActivity, {\n          currentUser: currentUser,\n          customer: customer,\n          currentSubTab: currentSubTab,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 204\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(React.Fragment, null, React.createElement(PortableDeals, {\n        mainType: \"customer\",\n        mainTypeId: customer._id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }), React.createElement(PortableTickets, {\n        mainType: \"customer\",\n        mainTypeId: customer._id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }), React.createElement(PortableTasks, {\n        mainType: \"customer\",\n        mainTypeId: customer._id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }));\n    }\n  }, {\n    key: \"renderTabContent\",\n    value: function renderTabContent() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          currentTab = _this$state.currentTab,\n          currentSubTab = _this$state.currentSubTab;\n      var _this$props2 = this.props,\n          customer = _this$props2.customer,\n          toggleSection = _this$props2.toggleSection;\n\n      if (currentTab === 'customer') {\n        var detailsOnClick = function detailsOnClick() {\n          return _this2.onSubtabClick('details');\n        };\n\n        var activityOnClick = function activityOnClick() {\n          return _this2.onSubtabClick('activity');\n        };\n\n        var relatedOnClick = function relatedOnClick() {\n          return _this2.onSubtabClick('related');\n        };\n\n        return React.createElement(React.Fragment, null, React.createElement(BasicInfo, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 232\n          },\n          __self: this\n        }, React.createElement(InfoSection, {\n          customer: customer,\n          hideForm: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 233\n          },\n          __self: this\n        })), React.createElement(ActionSection, {\n          customer: customer,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 235\n          },\n          __self: this\n        }), React.createElement(Tabs, {\n          full: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 236\n          },\n          __self: this\n        }, React.createElement(TabTitle, {\n          className: currentSubTab === 'details' ? 'active' : '',\n          onClick: detailsOnClick,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 237\n          },\n          __self: this\n        }, __('Details')), React.createElement(TabTitle, {\n          className: currentSubTab === 'activity' ? 'active' : '',\n          onClick: activityOnClick,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 243\n          },\n          __self: this\n        }, __('Activity')), React.createElement(TabTitle, {\n          className: currentSubTab === 'related' ? 'active' : '',\n          onClick: relatedOnClick,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 249\n          },\n          __self: this\n        }, __('Related'))), this.renderTabSubContent());\n      }\n\n      return React.createElement(React.Fragment, null, React.createElement(CompanySection, {\n        mainType: \"customer\",\n        mainTypeId: customer._id,\n        collapseCallback: toggleSection,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263\n        },\n        __self: this\n      }), React.createElement(Contacts, {\n        companies: customer.companies,\n        customerId: customer._id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268\n        },\n        __self: this\n      }));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var currentTab = this.state.currentTab;\n\n      var customerOnClick = function customerOnClick() {\n        return _this3.onTabClick('customer');\n      };\n\n      var companyOnClick = function companyOnClick() {\n        return _this3.onTabClick('company');\n      };\n\n      return React.createElement(Sidebar, {\n        full: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279\n        },\n        __self: this\n      }, React.createElement(Tabs, {\n        full: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280\n        },\n        __self: this\n      }, React.createElement(TabTitle, {\n        className: currentTab === 'customer' ? 'active' : '',\n        onClick: customerOnClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281\n        },\n        __self: this\n      }, __('Customer')), React.createElement(TabTitle, {\n        className: currentTab === 'company' ? 'active' : '',\n        onClick: companyOnClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287\n        },\n        __self: this\n      }, __('Company'))), this.renderTabContent());\n    }\n  }]);\n\n  return Index;\n}(React.Component);\n\nexport default Index;","map":{"version":3,"sources":["/home/anu-ujin/Works/open-source/erxes/ui/src/modules/inbox/components/conversationDetail/sidebar/Sidebar.tsx"],"names":["Tabs","TabTitle","Sidebar","React","BasicInfo","TabContent","asyncComponent","Box","__","CompanySection","WebsiteActivity","ActionSection","CustomFieldsSection","height","width","color","PortableDeals","PortableTasks","PortableTickets","Contacts","DetailInfo","isBox","InfoSection","withImage","DevicePropertiesSection","TrackedDataSection","TaggerSection","SidebarActivity","ConversationDetails","Index","props","onTabClick","currentTab","setState","onSubtabClick","currentSubTab","renderTrackedData","customer","kind","toggleSection","renderDeviceProperties","state","currentUser","taggerRefetchQueries","conversation","loading","integration","urlVisits","_id","detailsOnClick","activityOnClick","relatedOnClick","renderTabSubContent","companies","customerOnClick","companyOnClick","renderTabContent","Component"],"mappings":"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","sourcesContent":["import { Tabs, TabTitle } from 'modules/common/components/tabs';\nimport Sidebar from 'modules/layout/components/Sidebar';\nimport React from 'react';\nimport { BasicInfo, TabContent } from './styles';\n\nimport { IUser } from 'modules/auth/types';\nimport asyncComponent from 'modules/common/components/AsyncComponent';\nimport Box from 'modules/common/components/Box';\nimport { __ } from 'modules/common/utils';\nimport CompanySection from 'modules/companies/components/common/CompanySection';\nimport WebsiteActivity from 'modules/customers/components/common/WebsiteActivity';\nimport { ICustomer } from 'modules/customers/types';\nimport { IConversation } from '../../../types';\n\nconst ActionSection = asyncComponent(() =>\n  import(\n    /* webpackChunkName:\"Inbox-Sidebar-ActionSection\" */ 'modules/customers/containers/common/ActionSection'\n  )\n);\n\nconst CustomFieldsSection = asyncComponent(\n  () =>\n    import(\n      /* webpackChunkName:\"Inbox-Sidebar-CustomFieldsSection\" */ 'modules/customers/containers/common/CustomFieldsSection'\n    ),\n  { height: '200px', width: '100%', color: '#fff' }\n);\n\nconst PortableDeals = asyncComponent(() =>\n  import(\n    /* webpackChunkName:\"Inbox-Sidebar-PortableDeals\" */ 'modules/deals/components/PortableDeals'\n  )\n);\n\nconst PortableTasks = asyncComponent(() =>\n  import(\n    /* webpackChunkName:\"Inbox-Sidebar-PortableTasks\" */ 'modules/tasks/components/PortableTasks'\n  )\n);\n\nconst PortableTickets = asyncComponent(() =>\n  import(\n    /* webpackChunkName:\"Inbox-Sidebar-PortableTickets\" */ 'modules/tickets/components/PortableTickets'\n  )\n);\n\nconst Contacts = asyncComponent(() =>\n  import(\n    /* webpackChunkName:\"Inbox-Sidebar-Contacts\" */ 'modules/companies/components/detail/Contacts'\n  )\n);\n\nconst DetailInfo = asyncComponent(\n  () =>\n    import(\n      /* webpackChunkName:\"Inbox-Sidebar-InfoSection\" */ 'modules/customers/components/common/DetailInfo'\n    ),\n  { isBox: true }\n);\n\nconst InfoSection = asyncComponent(\n  () =>\n    import(\n      /* webpackChunkName:\"Inbox-Sidebar-InfoSection\" */ 'modules/customers/components/common/InfoSection'\n    ),\n  { withImage: true }\n);\n\nconst DevicePropertiesSection = asyncComponent(() =>\n  import(\n    /* webpackChunkName:\"Inbox-Sidebar-DevicePropertiesSection\" */ 'modules/customers/components/common/DevicePropertiesSection'\n  )\n);\n\nconst TrackedDataSection = asyncComponent(() =>\n  import(\n    /* webpackChunkName:\"Inbox-Sidebar-TrackedDataSection\" */ 'modules/customers/components/common/TrackedDataSection'\n  )\n);\n\nconst TaggerSection = asyncComponent(\n  () =>\n    import(\n      /* webpackChunkName:\"Inbox-Sidebar-TaggerSection\" */ 'modules/customers/components/common/TaggerSection'\n    ),\n  { height: '200px', width: '100%', color: '#fff' }\n);\n\nconst SidebarActivity = asyncComponent(() =>\n  import(\n    /* webpackChunkName:\"Inbox-Sidebar-SidebarActivity\" */ 'modules/inbox/containers/conversationDetail/SidebarActivity'\n  )\n);\n\nconst ConversationDetails = asyncComponent(\n  () =>\n    import(\n      /* webpackChunkName:\"Inbox-Sidebar-ConversationDetails\" */ './ConversationDetails'\n    ),\n  { isBox: true }\n);\n\ntype IndexProps = {\n  currentUser: IUser;\n  conversation: IConversation;\n  customer: ICustomer;\n  loading: boolean;\n  toggleSection: () => void;\n  taggerRefetchQueries: any;\n  merge?: (doc: { ids: string[]; data: ICustomer }) => void;\n};\n\ntype IndexState = {\n  currentTab: string;\n  currentSubTab: string;\n};\n\ninterface IRenderData {\n  customer: ICustomer;\n  kind: string;\n  toggleSection: () => void;\n}\n\nclass Index extends React.Component<IndexProps, IndexState> {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      currentTab: 'customer',\n      currentSubTab: 'details'\n    };\n  }\n\n  onTabClick = currentTab => {\n    this.setState({ currentTab });\n  };\n\n  onSubtabClick = currentSubTab => {\n    this.setState({ currentSubTab });\n  };\n\n  renderTrackedData = ({ customer, kind, toggleSection }: IRenderData) => {\n    return (\n      <TrackedDataSection\n        customer={customer}\n        collapseCallback={toggleSection}\n      />\n    );\n  };\n\n  renderDeviceProperties = ({ customer, kind, toggleSection }: IRenderData) => {\n    if (!(kind === 'messenger' || kind === 'form')) {\n      return null;\n    }\n    return (\n      <DevicePropertiesSection\n        customer={customer}\n        collapseCallback={toggleSection}\n      />\n    );\n  };\n\n  renderTabSubContent() {\n    const { currentSubTab } = this.state;\n\n    const {\n      currentUser,\n      taggerRefetchQueries,\n      conversation,\n      customer,\n      toggleSection,\n      loading\n    } = this.props;\n\n    const { kind = '' } = customer.integration || {};\n\n    if (currentSubTab === 'details') {\n      return (\n        <TabContent>\n          <DetailInfo customer={customer} />\n          <Box\n            title={__('Conversation details')}\n            name=\"showConversationDetails\"\n            callback={toggleSection}\n          >\n            <ConversationDetails conversation={conversation} />\n          </Box>\n          <TaggerSection\n            data={customer}\n            type=\"customer\"\n            refetchQueries={taggerRefetchQueries}\n            collapseCallback={toggleSection}\n          />\n          <CustomFieldsSection loading={loading} customer={customer} />\n          {this.renderTrackedData({ customer, kind, toggleSection })}\n          {this.renderDeviceProperties({ customer, kind, toggleSection })}\n          <WebsiteActivity urlVisits={customer.urlVisits || []} />\n        </TabContent>\n      );\n    }\n\n    if (currentSubTab === 'activity') {\n      return (\n        <SidebarActivity\n          currentUser={currentUser}\n          customer={customer}\n          currentSubTab={currentSubTab}\n        />\n      );\n    }\n\n    return (\n      <>\n        <PortableDeals mainType=\"customer\" mainTypeId={customer._id} />\n        <PortableTickets mainType=\"customer\" mainTypeId={customer._id} />\n        <PortableTasks mainType=\"customer\" mainTypeId={customer._id} />\n      </>\n    );\n  }\n\n  renderTabContent() {\n    const { currentTab, currentSubTab } = this.state;\n    const { customer, toggleSection } = this.props;\n\n    if (currentTab === 'customer') {\n      const detailsOnClick = () => this.onSubtabClick('details');\n      const activityOnClick = () => this.onSubtabClick('activity');\n      const relatedOnClick = () => this.onSubtabClick('related');\n\n      return (\n        <>\n          <BasicInfo>\n            <InfoSection customer={customer} hideForm={true} />\n          </BasicInfo>\n          <ActionSection customer={customer} />\n          <Tabs full={true}>\n            <TabTitle\n              className={currentSubTab === 'details' ? 'active' : ''}\n              onClick={detailsOnClick}\n            >\n              {__('Details')}\n            </TabTitle>\n            <TabTitle\n              className={currentSubTab === 'activity' ? 'active' : ''}\n              onClick={activityOnClick}\n            >\n              {__('Activity')}\n            </TabTitle>\n            <TabTitle\n              className={currentSubTab === 'related' ? 'active' : ''}\n              onClick={relatedOnClick}\n            >\n              {__('Related')}\n            </TabTitle>\n          </Tabs>\n          {this.renderTabSubContent()}\n        </>\n      );\n    }\n\n    return (\n      <>\n        <CompanySection\n          mainType=\"customer\"\n          mainTypeId={customer._id}\n          collapseCallback={toggleSection}\n        />\n        <Contacts companies={customer.companies} customerId={customer._id} />\n      </>\n    );\n  }\n\n  render() {\n    const { currentTab } = this.state;\n    const customerOnClick = () => this.onTabClick('customer');\n    const companyOnClick = () => this.onTabClick('company');\n\n    return (\n      <Sidebar full={true}>\n        <Tabs full={true}>\n          <TabTitle\n            className={currentTab === 'customer' ? 'active' : ''}\n            onClick={customerOnClick}\n          >\n            {__('Customer')}\n          </TabTitle>\n          <TabTitle\n            className={currentTab === 'company' ? 'active' : ''}\n            onClick={companyOnClick}\n          >\n            {__('Company')}\n          </TabTitle>\n        </Tabs>\n        {this.renderTabContent()}\n      </Sidebar>\n    );\n  }\n}\n\nexport default Index;\n"]},"metadata":{},"sourceType":"module"}