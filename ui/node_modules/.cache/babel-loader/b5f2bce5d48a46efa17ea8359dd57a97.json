{"ast":null,"code":"import _objectSpread from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _defineProperty from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/anu-ujin/Works/open-source/erxes/ui/src/modules/leads/components/step/CallOut.tsx\";\nimport Button from \"erxes-common-ui/lib/components/button\";\nimport Icon from \"erxes-common-ui/lib/components/icon\";\nimport FormControl from \"modules/common/components/form/Control\";\nimport FormGroup from \"modules/common/components/form/Group\";\nimport ControlLabel from \"modules/common/components/form/Label\";\nimport { LeftItem, Preview } from \"modules/common/components/step/styles\";\nimport { __ } from \"modules/common/utils\";\nimport { uploadHandler } from \"modules/common/utils\";\nimport ActionBar from \"modules/layout/components/ActionBar\";\nimport React from \"react\";\nimport { CalloutPreview } from \"./preview\";\nimport { FlexColumn, FlexItem, ImagePreview, ImageUpload } from \"./style\";\nvar defaultValue = {\n  isSkip: false\n};\n\nvar CallOut =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(CallOut, _React$Component);\n\n  function CallOut(props) {\n    var _this;\n\n    _classCallCheck(this, CallOut);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CallOut).call(this, props));\n\n    _this.onChangeFunction = function (name, value) {\n      _this.setState(_defineProperty({}, name, value));\n\n      _this.props.onChange(name, value);\n    };\n\n    _this.onChangeState = function (name, value) {\n      _this.setState(function (state) {\n        return {\n          defaultValue: _objectSpread({}, state.defaultValue, _defineProperty({}, name, value))\n        };\n      });\n\n      _this.props.onChange(name, value);\n    };\n\n    _this.removeImage = function (value) {\n      _this.setState({\n        logoPreviewUrl: \"\"\n      });\n\n      _this.props.onChange(\"logoPreviewUrl\", value);\n    };\n\n    _this.handleImage = function (e) {\n      var imageFile = e.currentTarget.files;\n      uploadHandler({\n        files: imageFile,\n        beforeUpload: function beforeUpload() {\n          _this.setState({\n            logoPreviewStyle: {\n              opacity: \"0.9\"\n            }\n          });\n        },\n        afterUpload: function afterUpload(_ref) {\n          var response = _ref.response;\n\n          _this.setState({\n            logo: response,\n            logoPreviewStyle: {\n              opacity: \"1\"\n            }\n          });\n        },\n        afterRead: function afterRead(_ref2) {\n          var result = _ref2.result;\n\n          _this.setState({\n            logoPreviewUrl: result\n          });\n\n          _this.props.onChange(\"logoPreviewUrl\", result);\n        }\n      });\n    };\n\n    _this.footerActions = function () {\n      var onChange = function onChange(e) {\n        return _this.onChangeState(\"isSkip\", e.currentTarget.checked);\n      };\n\n      return React.createElement(ActionBar, {\n        right: React.createElement(FormControl, {\n          checked: _this.props.skip || false,\n          id: \"isSkip\",\n          componentClass: \"checkbox\",\n          onChange: onChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 165\n          },\n          __self: this\n        }, __(\"Skip callOut\")),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      });\n    };\n\n    _this.state = {\n      logo: \"\",\n      logoPreviewStyle: {},\n      defaultValue: defaultValue\n    };\n    return _this;\n  }\n\n  _createClass(CallOut, [{\n    key: \"renderImagePreview\",\n    value: function renderImagePreview() {\n      var image = this.props.image;\n\n      if (!image) {\n        return React.createElement(React.Fragment, null, React.createElement(Icon, {\n          icon: \"plus\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113\n          },\n          __self: this\n        }), __(\"Upload\"));\n      }\n\n      return React.createElement(ImagePreview, {\n        src: image,\n        alt: \"previewImage\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      });\n    }\n  }, {\n    key: \"renderUploadImage\",\n    value: function renderUploadImage() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          image = _this$props.image,\n          skip = _this$props.skip;\n\n      var onChange = function onChange(e) {\n        return _this2.handleImage(e);\n      };\n\n      var onClick = function onClick(e) {\n        return _this2.removeImage(e.currentTarget.value);\n      };\n\n      return React.createElement(ImageUpload, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"file-upload\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        id: \"file-upload\",\n        type: \"file\",\n        onChange: onChange,\n        disabled: skip,\n        accept: \"image/x-png,image/jpeg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }), this.renderImagePreview()), image && React.createElement(Button, {\n        btnStyle: \"link\",\n        icon: \"cancel\",\n        size: \"small\",\n        onClick: onClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$props2 = this.props,\n          skip = _this$props2.skip,\n          calloutTitle = _this$props2.calloutTitle,\n          bodyValue = _this$props2.bodyValue,\n          calloutBtnText = _this$props2.calloutBtnText;\n\n      var onChangeTitle = function onChangeTitle(e) {\n        return _this3.onChangeFunction(\"calloutTitle\", e.currentTarget.value);\n      };\n\n      var onChangeBody = function onChangeBody(e) {\n        return _this3.onChangeFunction(\"bodyValue\", e.currentTarget.value);\n      };\n\n      var onChangeBtnText = function onChangeBtnText(e) {\n        return _this3.onChangeFunction(\"calloutBtnText\", e.currentTarget.value);\n      };\n\n      return React.createElement(FlexItem, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, React.createElement(FlexColumn, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, React.createElement(LeftItem, {\n        deactive: skip,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, React.createElement(ControlLabel, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, \"Callout title\"), React.createElement(FormControl, {\n        id: \"callout-title\",\n        type: \"text\",\n        value: calloutTitle,\n        disabled: skip,\n        onChange: onChangeTitle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      })), React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }, React.createElement(ControlLabel, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }, \"Callout body\"), React.createElement(FormControl, {\n        id: \"callout-body\",\n        componentClass: \"textarea\",\n        value: bodyValue,\n        disabled: skip,\n        onChange: onChangeBody,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      })), React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }, React.createElement(ControlLabel, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }, \"Callout button text\"), React.createElement(FormControl, {\n        id: \"callout-btn-text\",\n        value: calloutBtnText,\n        disabled: skip,\n        onChange: onChangeBtnText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227\n        },\n        __self: this\n      })), React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      }, React.createElement(ControlLabel, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      }, \"Featured image\"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }, __(\"You can upload only image file\")), this.renderUploadImage())), this.footerActions()), React.createElement(Preview, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      }, !skip && React.createElement(CalloutPreview, Object.assign({}, this.props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return CallOut;\n}(React.Component);\n\nexport default CallOut;","map":{"version":3,"sources":["/home/anu-ujin/Works/open-source/erxes/ui/src/modules/leads/components/step/CallOut.tsx"],"names":["Button","Icon","FormControl","FormGroup","ControlLabel","LeftItem","Preview","__","uploadHandler","ActionBar","React","CalloutPreview","FlexColumn","FlexItem","ImagePreview","ImageUpload","defaultValue","isSkip","CallOut","props","onChangeFunction","name","value","setState","onChange","onChangeState","state","removeImage","logoPreviewUrl","handleImage","e","imageFile","currentTarget","files","beforeUpload","logoPreviewStyle","opacity","afterUpload","response","logo","afterRead","result","footerActions","checked","skip","image","onClick","renderImagePreview","calloutTitle","bodyValue","calloutBtnText","onChangeTitle","onChangeBody","onChangeBtnText","renderUploadImage","Component"],"mappings":"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","sourcesContent":["import Button from \"erxes-common-ui/lib/components/button\";\nimport Icon from \"erxes-common-ui/lib/components/icon\";\nimport FormControl from \"modules/common/components/form/Control\";\nimport FormGroup from \"modules/common/components/form/Group\";\nimport ControlLabel from \"modules/common/components/form/Label\";\nimport { LeftItem, Preview } from \"modules/common/components/step/styles\";\nimport { __ } from \"modules/common/utils\";\nimport { uploadHandler } from \"modules/common/utils\";\nimport ActionBar from \"modules/layout/components/ActionBar\";\nimport React from \"react\";\nimport { CalloutPreview } from \"./preview\";\nimport { FlexColumn, FlexItem, ImagePreview, ImageUpload } from \"./style\";\n\nconst defaultValue = {\n  isSkip: false,\n};\n\ntype Props = {\n  type: string;\n  onChange: (\n    name:\n      | \"calloutBtnText\"\n      | \"bodyValue\"\n      | \"calloutTitle\"\n      | \"isSkip\"\n      | \"logoPreviewUrl\"\n      | \"logo\"\n      | \"logoPreviewStyle\"\n      | \"defaultValue\",\n    value: string | boolean | object | any\n  ) => void;\n  calloutTitle?: string;\n  calloutBtnText?: string;\n  bodyValue?: string;\n  color: string;\n  theme: string;\n  image?: string;\n  skip?: boolean;\n};\n\ntype State = {\n  logo?: string;\n  logoPreviewStyle?: { opacity?: string };\n  defaultValue: { [key: string]: boolean };\n  logoPreviewUrl?: string;\n  calloutBtnText?: string;\n  bodyValue?: string;\n  calloutTitle?: string;\n  isSkip?: boolean;\n};\n\nclass CallOut extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      logo: \"\",\n      logoPreviewStyle: {},\n      defaultValue,\n    };\n  }\n\n  onChangeFunction = <T extends keyof State>(name: T, value: State[T]) => {\n    this.setState({ [name]: value } as Pick<State, keyof State>);\n    this.props.onChange(name, value);\n  };\n\n  onChangeState = <T extends keyof State>(name: T, value: boolean) => {\n    this.setState((state) => ({\n      defaultValue: {\n        ...state.defaultValue,\n        [name]: value,\n      },\n    }));\n    this.props.onChange(name, value);\n  };\n\n  removeImage = (value: string) => {\n    this.setState({ logoPreviewUrl: \"\" });\n    this.props.onChange(\"logoPreviewUrl\", value);\n  };\n\n  handleImage = (e: React.FormEvent<HTMLInputElement>) => {\n    const imageFile = e.currentTarget.files;\n\n    uploadHandler({\n      files: imageFile,\n\n      beforeUpload: () => {\n        this.setState({ logoPreviewStyle: { opacity: \"0.9\" } });\n      },\n\n      afterUpload: ({ response }) => {\n        this.setState({\n          logo: response,\n          logoPreviewStyle: { opacity: \"1\" },\n        });\n      },\n\n      afterRead: ({ result }) => {\n        this.setState({ logoPreviewUrl: result });\n        this.props.onChange(\"logoPreviewUrl\", result);\n      },\n    });\n  };\n\n  renderImagePreview() {\n    const { image } = this.props;\n\n    if (!image) {\n      return (\n        <>\n          <Icon icon=\"plus\" />\n          {__(\"Upload\")}\n        </>\n      );\n    }\n\n    return <ImagePreview src={image} alt=\"previewImage\" />;\n  }\n\n  renderUploadImage() {\n    const { image, skip } = this.props;\n\n    const onChange = (e: React.FormEvent<HTMLInputElement>) =>\n      this.handleImage(e);\n    const onClick = (e: React.MouseEvent<HTMLElement>) =>\n      this.removeImage((e.currentTarget as HTMLInputElement).value);\n\n    return (\n      <ImageUpload>\n        <label htmlFor=\"file-upload\">\n          <input\n            id=\"file-upload\"\n            type=\"file\"\n            onChange={onChange}\n            disabled={skip}\n            accept=\"image/x-png,image/jpeg\"\n          />\n          {this.renderImagePreview()}\n        </label>\n\n        {image && (\n          <Button\n            btnStyle=\"link\"\n            icon=\"cancel\"\n            size=\"small\"\n            onClick={onClick}\n          />\n        )}\n      </ImageUpload>\n    );\n  }\n\n  footerActions = () => {\n    const onChange = (e) =>\n      this.onChangeState(\n        \"isSkip\",\n        (e.currentTarget as HTMLInputElement).checked\n      );\n\n    return (\n      <ActionBar\n        right={\n          <FormControl\n            checked={this.props.skip || false}\n            id=\"isSkip\"\n            componentClass=\"checkbox\"\n            onChange={onChange}\n          >\n            {__(\"Skip callOut\")}\n          </FormControl>\n        }\n      />\n    );\n  };\n\n  render() {\n    const { skip, calloutTitle, bodyValue, calloutBtnText } = this.props;\n\n    const onChangeTitle = (e: React.FormEvent<HTMLElement>) =>\n      this.onChangeFunction(\n        \"calloutTitle\",\n        (e.currentTarget as HTMLInputElement).value\n      );\n\n    const onChangeBody = (e) =>\n      this.onChangeFunction(\n        \"bodyValue\",\n        (e.currentTarget as HTMLInputElement).value\n      );\n\n    const onChangeBtnText = (e) =>\n      this.onChangeFunction(\n        \"calloutBtnText\",\n        (e.currentTarget as HTMLInputElement).value\n      );\n\n    return (\n      <FlexItem>\n        <FlexColumn>\n          <LeftItem deactive={skip}>\n            <FormGroup>\n              <ControlLabel>Callout title</ControlLabel>\n              <FormControl\n                id=\"callout-title\"\n                type=\"text\"\n                value={calloutTitle}\n                disabled={skip}\n                onChange={onChangeTitle}\n              />\n            </FormGroup>\n\n            <FormGroup>\n              <ControlLabel>Callout body</ControlLabel>\n              <FormControl\n                id=\"callout-body\"\n                componentClass=\"textarea\"\n                value={bodyValue}\n                disabled={skip}\n                onChange={onChangeBody}\n              />\n            </FormGroup>\n\n            <FormGroup>\n              <ControlLabel>Callout button text</ControlLabel>\n              <FormControl\n                id=\"callout-btn-text\"\n                value={calloutBtnText}\n                disabled={skip}\n                onChange={onChangeBtnText}\n              />\n            </FormGroup>\n\n            <FormGroup>\n              <ControlLabel>Featured image</ControlLabel>\n              <p>{__(\"You can upload only image file\")}</p>\n              {this.renderUploadImage()}\n            </FormGroup>\n          </LeftItem>\n          {this.footerActions()}\n        </FlexColumn>\n\n        <Preview>{!skip && <CalloutPreview {...this.props} />}</Preview>\n      </FlexItem>\n    );\n  }\n}\n\nexport default CallOut;\n"]},"metadata":{},"sourceType":"module"}