{"ast":null,"code":"var _jsxFileName = \"/home/anu-ujin/Works/open-source/erxes/ui/src/modules/deals/components/ProductSection.tsx\";\nimport Box from 'modules/common/components/Box';\nimport EmptyState from 'modules/common/components/EmptyState';\nimport Icon from 'erxes-common-ui/lib/components/icon';\nimport ModalTrigger from 'modules/common/components/ModalTrigger';\nimport Tip from 'modules/common/components/Tip';\nimport { __ } from 'modules/common/utils';\nimport { SectionBodyItem } from 'modules/layout/styles';\nimport React from 'react';\nimport ProductForm from '../containers/product/ProductForm';\nimport { CustomField, ProductName } from '../styles';\n\nfunction ProductSection(_ref) {\n  var products = _ref.products,\n      productsData = _ref.productsData,\n      paymentsData = _ref.paymentsData,\n      onChangeProductsData = _ref.onChangeProductsData,\n      onChangePaymentsData = _ref.onChangePaymentsData,\n      saveProductsData = _ref.saveProductsData;\n\n  var contentWithId = function contentWithId(productId) {\n    var content = function content(props) {\n      return React.createElement(ProductForm, Object.assign({}, props, {\n        currentProduct: productId,\n        onChangeProductsData: onChangeProductsData,\n        onChangePaymentsData: onChangePaymentsData,\n        productsData: productsData,\n        products: products,\n        paymentsData: paymentsData,\n        saveProductsData: saveProductsData,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 34\n        },\n        __self: this\n      }));\n    };\n\n    return content;\n  };\n\n  var tipItems = function tipItems(product) {\n    var result = [];\n    var customFieldsData = product.customFieldsData;\n    Object.values(customFieldsData).forEach(function (field, index) {\n      result.push(React.createElement(CustomField, {\n        key: index,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, field.text, \":\"), \" \", field.data));\n    });\n    return result;\n  };\n\n  var renderProductFormModal = function renderProductFormModal(trigger, productId) {\n    return React.createElement(ModalTrigger, {\n      title: \"Manage Product & Service\",\n      size: \"lg\",\n      dialogClassName: \"modal-1000w\",\n      trigger: trigger,\n      content: contentWithId(productId),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    });\n  };\n\n  var renderProductName = function renderProductName(productName, productId) {\n    return renderProductFormModal(React.createElement(ProductName, {\n      href: \"#\".concat(productId),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, productName, React.createElement(Icon, {\n      icon: \"pen-1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    })), productId);\n  };\n\n  var renderProduct = function renderProduct(product) {\n    if (product.customFieldsData) {\n      return React.createElement(Tip, {\n        text: tipItems(product),\n        placement: \"bottom\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, renderProductName(product.name, product._id));\n    }\n\n    return renderProductName(product.name, product._id);\n  };\n\n  return React.createElement(Box, {\n    title: __('Product & Service'),\n    extraButtons: renderProductFormModal(React.createElement(\"button\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      icon: \"edit-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }))),\n    name: \"showProductAndService\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }, products.map(function (product, index) {\n    return React.createElement(SectionBodyItem, {\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, renderProduct(product));\n  }), products.length === 0 && React.createElement(EmptyState, {\n    icon: \"list-ul\",\n    text: \"No items\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  })));\n}\n\nexport default ProductSection;","map":{"version":3,"sources":["/home/anu-ujin/Works/open-source/erxes/ui/src/modules/deals/components/ProductSection.tsx"],"names":["Box","EmptyState","Icon","ModalTrigger","Tip","__","SectionBodyItem","React","ProductForm","CustomField","ProductName","ProductSection","products","productsData","paymentsData","onChangeProductsData","onChangePaymentsData","saveProductsData","contentWithId","productId","content","props","tipItems","product","result","customFieldsData","Object","values","forEach","field","index","push","text","data","renderProductFormModal","trigger","renderProductName","productName","renderProduct","name","_id","map","length"],"mappings":"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","sourcesContent":["import Box from 'modules/common/components/Box';\nimport EmptyState from 'modules/common/components/EmptyState';\nimport Icon from 'erxes-common-ui/lib/components/icon';\nimport ModalTrigger from 'modules/common/components/ModalTrigger';\nimport Tip from 'modules/common/components/Tip';\nimport { __ } from 'modules/common/utils';\nimport { SectionBodyItem } from 'modules/layout/styles';\nimport { IProduct } from 'modules/settings/productService/types';\nimport React from 'react';\nimport ProductForm from '../containers/product/ProductForm';\nimport { CustomField, ProductName } from '../styles';\nimport { IPaymentsData, IProductData } from '../types';\n\ntype Props = {\n  productsData: IProductData[];\n  products: IProduct[];\n  paymentsData: IPaymentsData;\n  onChangeProductsData: (productsData: IProductData[]) => void;\n  onChangePaymentsData: (paymentsData: IPaymentsData) => void;\n  onChangeProducts: (prs: IProduct[]) => void;\n  saveProductsData: () => void;\n};\n\nfunction ProductSection({\n  products,\n  productsData,\n  paymentsData,\n  onChangeProductsData,\n  onChangePaymentsData,\n  saveProductsData\n}: Props) {\n  const contentWithId = (productId?: string) => {\n    const content = props => (\n      <ProductForm\n        {...props}\n        currentProduct={productId}\n        onChangeProductsData={onChangeProductsData}\n        onChangePaymentsData={onChangePaymentsData}\n        productsData={productsData}\n        products={products}\n        paymentsData={paymentsData}\n        saveProductsData={saveProductsData}\n      />\n    );\n\n    return content;\n  };\n\n  const tipItems = (product: IProduct) => {\n    const result: React.ReactNode[] = [];\n\n    const { customFieldsData } = product;\n\n    Object.values(customFieldsData).forEach((field: any, index: number) => {\n      result.push(\n        <CustomField key={index}>\n          <b>{field.text}:</b> {field.data}\n        </CustomField>\n      );\n    });\n\n    return result;\n  };\n\n  const renderProductFormModal = (\n    trigger: React.ReactNode,\n    productId?: string\n  ) => {\n    return (\n      <ModalTrigger\n        title=\"Manage Product & Service\"\n        size=\"lg\"\n        dialogClassName=\"modal-1000w\"\n        trigger={trigger}\n        content={contentWithId(productId)}\n      />\n    );\n  };\n\n  const renderProductName = (productName: string, productId: string) => {\n    return renderProductFormModal(\n      <ProductName href={`#${productId}`}>\n        {productName}\n        <Icon icon=\"pen-1\" />\n      </ProductName>,\n      productId\n    );\n  };\n\n  const renderProduct = (product: IProduct) => {\n    if (product.customFieldsData) {\n      return (\n        <Tip text={tipItems(product)} placement=\"bottom\">\n          {renderProductName(product.name, product._id)}\n        </Tip>\n      );\n    }\n\n    return renderProductName(product.name, product._id);\n  };\n\n  return (\n    <Box\n      title={__('Product & Service')}\n      extraButtons={renderProductFormModal(\n        <button>\n          <Icon icon=\"edit-3\" />\n        </button>\n      )}\n      name=\"showProductAndService\"\n    >\n      <div>\n        {products.map((product, index) => (\n          <SectionBodyItem key={index}>\n            {renderProduct(product)}\n          </SectionBodyItem>\n        ))}\n        {products.length === 0 && <EmptyState icon=\"list-ul\" text=\"No items\" />}\n      </div>\n    </Box>\n  );\n}\n\nexport default ProductSection;\n"]},"metadata":{},"sourceType":"module"}