{"ast":null,"code":"import _toConsumableArray from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _taggedTemplateLiteral from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/home/anu-ujin/Works/open-source/erxes/ui/src/modules/common/components/ModifiableList.tsx\";\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: flex-end;\\n  margin-top: 10px;\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  list-style: none;\\n  padding: 0;\\n\\n  button {\\n    margin-top: 10px;\\n  }\\n\\n  li {\\n    position: relative;\\n    margin-bottom: 5px;\\n    background-color: \", \";\\n    border: 1px solid \", \";\\n    padding: 5px 10px;\\n    display: flex;\\n    justify-content: space-between;\\n\\n    &:hover {\\n      cursor: pointer;\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport Button from \"erxes-common-ui/lib/components/button\";\nimport FormControl from \"modules/common/components/form/Control\";\nimport Icon from \"erxes-common-ui/lib/components/icon\";\nimport { colors } from \"modules/common/styles\";\nimport { Alert } from \"modules/common/utils\";\nimport { __ } from \"modules/common/utils\";\nimport React from \"react\";\nimport styled from \"styled-components\";\nvar List = styled.ul(_templateObject(), colors.colorWhite, colors.borderPrimary);\nvar Actions = styled.div(_templateObject2());\n\nvar ModifiableList =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ModifiableList, _React$Component);\n\n  function ModifiableList(props) {\n    var _this;\n\n    _classCallCheck(this, ModifiableList);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ModifiableList).call(this, props));\n\n    _this.handleAddOption = function () {\n      _this.setState({\n        adding: true\n      });\n    };\n\n    _this.handleCancelAddingOption = function () {\n      _this.setState({\n        adding: false\n      });\n    };\n\n    _this.handleSaveOption = function () {\n      var options = _this.state.options;\n      var optionValue = document.getElementById(\"optionValue\").value;\n\n      if (!optionValue) {\n        return Alert.warning(\"Nothing inserted\");\n      }\n\n      _this.setState({\n        options: [].concat(_toConsumableArray(options), [optionValue])\n      }, function () {\n        if (_this.props.onChangeOption) {\n          _this.props.onChangeOption(_this.state.options, optionValue);\n\n          document.getElementById(\"optionValue\").value = \"\";\n        }\n      });\n    };\n\n    _this.handleRemoveOption = function (i) {\n      var options = _this.state.options;\n\n      _this.setState({\n        options: options.filter(function (item) {\n          return item !== i;\n        })\n      }, function () {\n        if (_this.props.onChangeOption) {\n          _this.props.onChangeOption(_this.state.options);\n        }\n      });\n    };\n\n    _this.onKeyPress = function (e) {\n      if (e.key === \"Enter\") {\n        e.preventDefault();\n\n        _this.handleSaveOption();\n      }\n    };\n\n    _this.renderButtonOrElement = function () {\n      if (_this.state.adding) {\n        return React.createElement(React.Fragment, null, React.createElement(FormControl, {\n          id: \"optionValue\",\n          autoFocus: true,\n          onKeyPress: _this.onKeyPress,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 120\n          },\n          __self: this\n        }), React.createElement(Actions, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125\n          },\n          __self: this\n        }, React.createElement(Button, {\n          icon: \"cancel-1\",\n          btnStyle: \"simple\",\n          size: \"small\",\n          onClick: _this.handleCancelAddingOption,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126\n          },\n          __self: this\n        }, \"Cancel\"), React.createElement(Button, {\n          btnStyle: \"success\",\n          size: \"small\",\n          icon: \"checked-1\",\n          onClick: _this.handleSaveOption,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134\n          },\n          __self: this\n        }, \"Save\")));\n      }\n\n      return React.createElement(Button, {\n        onClick: _this.handleAddOption,\n        size: \"small\",\n        icon: \"plus-circle\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, __(_this.props.addButtonLabel || \"Add an option\"));\n    };\n\n    _this.renderOption = function (option, index) {\n      return React.createElement(\"li\", {\n        key: index,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, option, React.createElement(Icon, {\n        icon: \"cancel-1\",\n        onClick: _this.handleRemoveOption.bind(_assertThisInitialized(_this), option),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }));\n    };\n\n    _this.state = {\n      adding: true,\n      options: props.options || []\n    };\n    return _this;\n  }\n\n  _createClass(ModifiableList, [{\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      var options = nextProps.options;\n\n      if (nextProps.options !== this.state.options) {\n        this.setState({\n          options: options\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(List, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, this.state.options.map(function (option, index) {\n        return _this2.renderOption(option, index);\n      }), this.renderButtonOrElement());\n    }\n  }]);\n\n  return ModifiableList;\n}(React.Component);\n\nexport default ModifiableList;","map":{"version":3,"sources":["/home/anu-ujin/Works/open-source/erxes/ui/src/modules/common/components/ModifiableList.tsx"],"names":["Button","FormControl","Icon","colors","Alert","__","React","styled","List","ul","colorWhite","borderPrimary","Actions","div","ModifiableList","props","handleAddOption","setState","adding","handleCancelAddingOption","handleSaveOption","options","state","optionValue","document","getElementById","value","warning","onChangeOption","handleRemoveOption","i","filter","item","onKeyPress","e","key","preventDefault","renderButtonOrElement","addButtonLabel","renderOption","option","index","bind","nextProps","map","Component"],"mappings":"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","sourcesContent":["import Button from \"erxes-common-ui/lib/components/button\";\nimport FormControl from \"modules/common/components/form/Control\";\nimport Icon from \"erxes-common-ui/lib/components/icon\";\nimport { colors } from \"modules/common/styles\";\nimport { Alert } from \"modules/common/utils\";\nimport { __ } from \"modules/common/utils\";\nimport React from \"react\";\nimport styled from \"styled-components\";\n\nconst List = styled.ul`\n  list-style: none;\n  padding: 0;\n\n  button {\n    margin-top: 10px;\n  }\n\n  li {\n    position: relative;\n    margin-bottom: 5px;\n    background-color: ${colors.colorWhite};\n    border: 1px solid ${colors.borderPrimary};\n    padding: 5px 10px;\n    display: flex;\n    justify-content: space-between;\n\n    &:hover {\n      cursor: pointer;\n    }\n  }\n`;\n\nconst Actions = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  margin-top: 10px;\n`;\n\ntype Props = {\n  options: string[];\n  addButtonLabel?: string;\n  onChangeOption?: (options?: string[], optionValue?: string) => void;\n};\n\ntype State = {\n  options: string[];\n  adding: boolean;\n};\n\nclass ModifiableList extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      adding: true,\n      options: props.options || [],\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const { options } = nextProps;\n\n    if (nextProps.options !== this.state.options) {\n      this.setState({ options });\n    }\n  }\n\n  handleAddOption = () => {\n    this.setState({ adding: true });\n  };\n\n  handleCancelAddingOption = () => {\n    this.setState({ adding: false });\n  };\n\n  handleSaveOption = () => {\n    const { options } = this.state;\n    const optionValue = (document.getElementById(\n      \"optionValue\"\n    ) as HTMLInputElement).value;\n\n    if (!optionValue) {\n      return Alert.warning(\"Nothing inserted\");\n    }\n\n    this.setState({ options: [...options, optionValue] }, () => {\n      if (this.props.onChangeOption) {\n        this.props.onChangeOption(this.state.options, optionValue);\n        (document.getElementById(\"optionValue\") as HTMLInputElement).value = \"\";\n      }\n    });\n  };\n\n  handleRemoveOption = (i: string) => {\n    const { options } = this.state;\n\n    this.setState(\n      {\n        options: options.filter((item) => item !== i),\n      },\n      () => {\n        if (this.props.onChangeOption) {\n          this.props.onChangeOption(this.state.options);\n        }\n      }\n    );\n  };\n\n  onKeyPress = (e) => {\n    if (e.key === \"Enter\") {\n      e.preventDefault();\n      this.handleSaveOption();\n    }\n  };\n\n  renderButtonOrElement = () => {\n    if (this.state.adding) {\n      return (\n        <>\n          <FormControl\n            id=\"optionValue\"\n            autoFocus={true}\n            onKeyPress={this.onKeyPress}\n          />\n          <Actions>\n            <Button\n              icon=\"cancel-1\"\n              btnStyle=\"simple\"\n              size=\"small\"\n              onClick={this.handleCancelAddingOption}\n            >\n              Cancel\n            </Button>\n            <Button\n              btnStyle=\"success\"\n              size=\"small\"\n              icon=\"checked-1\"\n              onClick={this.handleSaveOption}\n            >\n              Save\n            </Button>\n          </Actions>\n        </>\n      );\n    }\n\n    return (\n      <Button onClick={this.handleAddOption} size=\"small\" icon=\"plus-circle\">\n        {__(this.props.addButtonLabel || \"Add an option\")}\n      </Button>\n    );\n  };\n\n  renderOption = (option, index) => {\n    return (\n      <li key={index}>\n        {option}\n        <Icon\n          icon=\"cancel-1\"\n          onClick={this.handleRemoveOption.bind(this, option)}\n        />\n      </li>\n    );\n  };\n\n  render() {\n    return (\n      <List>\n        {this.state.options.map((option, index) =>\n          this.renderOption(option, index)\n        )}\n        {this.renderButtonOrElement()}\n      </List>\n    );\n  }\n}\n\nexport default ModifiableList;\n"]},"metadata":{},"sourceType":"module"}