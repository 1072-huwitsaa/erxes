{"ast":null,"code":"import _classCallCheck from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _slicedToArray from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/anu-ujin/Works/open-source/erxes/ui/src/modules/common/utils/index.tsx\";\nimport { getEnv } from 'apolloClient';\nimport dayjs from 'dayjs';\nimport T from 'i18n-react';\nimport React from 'react';\nimport Tip from '../components/Tip';\nimport { Limited } from '../styles/main';\nimport Alert from './Alert';\nimport confirm from './confirmation/confirm';\nimport router from './router';\nimport toggleCheckBoxes from './toggleCheckBoxes';\nimport uploadHandler from './uploadHandler';\nimport urlParser from './urlParser';\nexport var renderFullName = function renderFullName(data) {\n  if (data.firstName || data.lastName) {\n    return (data.firstName || '') + ' ' + (data.lastName || '');\n  }\n\n  if (data.primaryEmail || data.primaryPhone) {\n    return data.primaryEmail || data.primaryPhone;\n  }\n\n  if (data.emails && data.emails.length > 0) {\n    return data.emails[0] || 'Unknown';\n  }\n\n  var visitorContactInfo = data.visitorContactInfo;\n\n  if (visitorContactInfo) {\n    return visitorContactInfo.phone || visitorContactInfo.email || 'Unknown';\n  }\n\n  return 'Unknown';\n};\nexport var renderUserFullName = function renderUserFullName(data) {\n  var details = data.details;\n\n  if (details && details.fullName) {\n    return details.fullName;\n  }\n\n  if (data.email || data.username) {\n    return data.email || data.username;\n  }\n\n  return 'Unknown';\n};\nexport var setTitle = function setTitle(title, force) {\n  if (!document.title.includes(title) || force) {\n    document.title = title;\n  }\n};\nexport var setBadge = function setBadge(count, title) {\n  var favicon = document.getElementById('favicon');\n\n  if (count) {\n    if (document.title.includes(title)) {\n      setTitle(\"(\".concat(count, \") \").concat(title), true);\n    }\n\n    favicon.href = '/favicon-unread.png';\n  } else {\n    setTitle(title, true);\n    favicon.href = '/favicon.png';\n  }\n};\nexport var reorder = function reorder(list, startIndex, endIndex) {\n  var result = Array.from(list);\n\n  var _result$splice = result.splice(startIndex, 1),\n      _result$splice2 = _slicedToArray(_result$splice, 1),\n      removed = _result$splice2[0];\n\n  result.splice(endIndex, 0, removed);\n  return result;\n};\nexport var generateRandomColorCode = function generateRandomColorCode() {\n  return \"#\".concat(Math.random().toString(16).slice(2, 8));\n};\n\nvar isNumeric = function isNumeric(n) {\n  return !isNaN(parseFloat(n)) && isFinite(n);\n};\n\nexport var isTimeStamp = function isTimeStamp(timestamp) {\n  var newTimestamp = new Date(timestamp).getTime();\n  return isNumeric(newTimestamp);\n}; // Create an array with \"stop\" numbers, starting from \"start\"\n\nexport var range = function range(start, stop) {\n  return Array.from(Array(stop), function (_, i) {\n    return start + i;\n  });\n}; // Return the list of values that are the intersection of two arrays\n\nexport var intersection = function intersection(array1, array2) {\n  return array1.filter(function (n) {\n    return array2.includes(n);\n  });\n}; // Computes the union of the passed-in arrays: the list of unique items\n\nexport var union = function union(array1, array2) {\n  return array1.concat(array2.filter(function (n) {\n    return !array1.includes(n);\n  }));\n}; // Similar to without, but returns the values from array that are not present in the other arrays.\n\nexport var difference = function difference(array1, array2) {\n  return array1.filter(function (n) {\n    return !array2.includes(n);\n  });\n};\nexport { Alert, uploadHandler, router, confirm, toggleCheckBoxes, urlParser };\nexport var can = function can(actionName, currentUser) {\n  if (!currentUser) {\n    return false;\n  }\n\n  if (currentUser.isOwner) {\n    return true;\n  }\n\n  if (!actionName) {\n    return false;\n  }\n\n  var actions = currentUser.permissionActions || [];\n  return actions[actionName] === true;\n};\nexport var __ = function __(key, options) {\n  var translation = T.translate(key, options);\n\n  if (!translation) {\n    return '';\n  }\n\n  return translation.toString();\n};\n/**\n * Request to get file's URL for view and download\n * @param {String} - value\n * @return {String} - URL\n */\n\nexport var readFile = function readFile(value) {\n  if (!value || urlParser.isValidURL(value) || value.includes('/')) {\n    return value;\n  }\n\n  var _getEnv = getEnv(),\n      REACT_APP_API_URL = _getEnv.REACT_APP_API_URL;\n\n  return \"\".concat(REACT_APP_API_URL, \"/read-file?key=\").concat(value);\n};\nexport var getUserAvatar = function getUserAvatar(user) {\n  if (!user) {\n    return '';\n  }\n\n  var _user$details = user.details,\n      details = _user$details === void 0 ? {} : _user$details;\n\n  if (!details.avatar) {\n    return '/images/avatar-colored.svg';\n  }\n\n  return readFile(details.avatar);\n};\nexport function withProps(Wrapped) {\n  return (\n    /*#__PURE__*/\n    function (_React$Component) {\n      _inherits(WithProps, _React$Component);\n\n      function WithProps() {\n        _classCallCheck(this, WithProps);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(WithProps).apply(this, arguments));\n      }\n\n      _createClass(WithProps, [{\n        key: \"render\",\n        value: function render() {\n          return React.createElement(Wrapped, Object.assign({}, this.props, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 185\n            },\n            __self: this\n          }));\n        }\n      }]);\n\n      return WithProps;\n    }(React.Component)\n  );\n}\nexport function renderWithProps(props, Wrapped) {\n  return React.createElement(Wrapped, Object.assign({}, props, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194\n    },\n    __self: this\n  }));\n}\nexport var isValidDate = function isValidDate(date) {\n  var parsedDate = Date.parse(date); // Checking if it is date\n\n  if (isNaN(date) && !isNaN(parsedDate)) {\n    return true;\n  }\n\n  return false;\n};\nexport var extractAttachment = function extractAttachment(attachments) {\n  return attachments.map(function (file) {\n    return {\n      name: file.name,\n      type: file.type,\n      url: file.url,\n      size: file.size\n    };\n  });\n};\nexport var setCookie = function setCookie(cname, cvalue) {\n  var exdays = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 100;\n  var d = new Date();\n  d.setTime(d.getTime() + exdays * 24 * 60 * 60 * 1000);\n  var expires = \"expires=\".concat(d.toUTCString());\n  document.cookie = \"\".concat(cname, \"=\").concat(cvalue, \";\").concat(expires, \";path=/\");\n};\nexport var getCookie = function getCookie(cname) {\n  var name = \"\".concat(cname, \"=\");\n  var ca = document.cookie.split(';');\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = ca[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var c = _step.value;\n\n      while (c.charAt(0) === ' ') {\n        c = c.substring(1);\n      }\n\n      if (c.indexOf(name) === 0) {\n        return c.substring(name.length, c.length);\n      }\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return != null) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  return '';\n};\n/**\n * Generate random string\n */\n\nexport var generateRandomString = function generateRandomString() {\n  var len = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 10;\n  var charSet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';\n  var randomString = '';\n\n  for (var i = 0; i < len; i++) {\n    var position = Math.floor(Math.random() * charSet.length);\n    randomString += charSet.substring(position, position + 1);\n  }\n\n  return randomString;\n};\n/**\n * Generate random int number between 0 and max\n */\n\nexport var getRandomNumber = function getRandomNumber() {\n  var max = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 10;\n  return Math.floor(Math.random() * Math.floor(max));\n};\n/**\n * Send desktop notification\n */\n\nexport var sendDesktopNotification = function sendDesktopNotification(doc) {\n  var notify = function notify() {\n    // Don't send notification to itself\n    if (!window.document.hidden) {\n      return;\n    }\n\n    var notification = new Notification(doc.title, {\n      body: doc.content,\n      icon: '/favicon.png',\n      dir: 'ltr'\n    }); // notify by sound\n\n    var audio = new Audio('/sound/notify.mp3');\n    audio.play();\n\n    notification.onclick = function () {\n      window.focus();\n      notification.close();\n    };\n  }; // Browser doesn't support Notification api\n\n\n  if (!('Notification' in window)) {\n    return;\n  }\n\n  if (Notification.permission === 'granted') {\n    return notify();\n  }\n\n  if (Notification.permission !== 'denied') {\n    Notification.requestPermission(function (permission) {\n      if (!('permission' in Notification)) {\n        Notification.permission = permission;\n      }\n\n      if (permission === 'granted') {\n        return notify();\n      }\n    });\n  }\n};\nexport var roundToTwo = function roundToTwo(value) {\n  if (!value) {\n    return 0;\n  }\n\n  return Math.round(value * 100) / 100;\n};\n\nfunction createLinkFromUrl(url) {\n  if (!url.includes('http')) {\n    url = 'http://' + url;\n  }\n\n  var onClick = function onClick(e) {\n    e.stopPropagation();\n    window.open(url);\n  };\n\n  return React.createElement(\"a\", {\n    href: \"#website\",\n    onClick: onClick,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 338\n    },\n    __self: this\n  }, urlParser.extractRootDomain(url));\n}\n\nexport function formatValue(value) {\n  if (typeof value === 'boolean') {\n    return value.toString();\n  }\n\n  if (urlParser.isValidURL(value)) {\n    return createLinkFromUrl(value);\n  }\n\n  if (typeof value === 'string') {\n    if (dayjs(value).isValid() && (value.includes('/') || value.includes('-'))) {\n      return React.createElement(Tip, {\n        text: dayjs(value).format('D MMM YYYY, HH:mm'),\n        placement: \"top\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 359\n        },\n        __self: this\n      }, React.createElement(\"time\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 360\n        },\n        __self: this\n      }, dayjs(value).format('L')));\n    }\n\n    return React.createElement(Limited, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 365\n      },\n      __self: this\n    }, value);\n  }\n\n  if (value && typeof value === 'object') {\n    return value.toString();\n  }\n\n  return value || '-';\n}\nexport function isEmptyContent(content) {\n  // check if a string contains whitespace or empty\n  return !/\\S/.test(content);\n}\nexport var isValidUsername = function isValidUsername(username) {\n  var reg = /^(?=[a-zA-Z0-9._]{4,20}$)(?!.*[_.]{2})[^_.].*[^_.]$/gim;\n  return reg.test(username);\n};\nexport var storeConstantToStore = function storeConstantToStore(key, values) {\n  localStorage.setItem(\"config:\".concat(key), JSON.stringify(values));\n};\nexport var getConstantFromStore = function getConstantFromStore(key, isMap, isFlat) {\n  var constant = JSON.parse(localStorage.getItem(\"config:\".concat(key)) || '[]');\n\n  if (isFlat) {\n    return constant.map(function (element) {\n      return element.value;\n    });\n  }\n\n  if (!isMap) {\n    return constant;\n  }\n\n  var map = {};\n  constant.forEach(function (element) {\n    map[element.value] = element.label;\n  });\n  return map;\n}; // Most basic frontend solution for click-jack defense\n\nexport var bustIframe = function bustIframe() {\n  if (window.self === window.top) {\n    var antiClickjack = document.getElementById('anti-clickjack');\n\n    if (antiClickjack && antiClickjack.parentNode) {\n      antiClickjack.parentNode.removeChild(antiClickjack);\n    }\n  } else {\n    window.top.location = window.self.location;\n  }\n};","map":{"version":3,"sources":["/home/anu-ujin/Works/open-source/erxes/ui/src/modules/common/utils/index.tsx"],"names":["getEnv","dayjs","T","React","Tip","Limited","Alert","confirm","router","toggleCheckBoxes","uploadHandler","urlParser","renderFullName","data","firstName","lastName","primaryEmail","primaryPhone","emails","length","visitorContactInfo","phone","email","renderUserFullName","details","fullName","username","setTitle","title","force","document","includes","setBadge","count","favicon","getElementById","href","reorder","list","startIndex","endIndex","result","Array","from","splice","removed","generateRandomColorCode","Math","random","toString","slice","isNumeric","n","isNaN","parseFloat","isFinite","isTimeStamp","timestamp","newTimestamp","Date","getTime","range","start","stop","_","i","intersection","array1","array2","filter","union","concat","difference","can","actionName","currentUser","isOwner","actions","permissionActions","__","key","options","translation","translate","readFile","value","isValidURL","REACT_APP_API_URL","getUserAvatar","user","avatar","withProps","Wrapped","props","Component","renderWithProps","isValidDate","date","parsedDate","parse","extractAttachment","attachments","map","file","name","type","url","size","setCookie","cname","cvalue","exdays","d","setTime","expires","toUTCString","cookie","getCookie","ca","split","c","charAt","substring","indexOf","generateRandomString","len","charSet","randomString","position","floor","getRandomNumber","max","sendDesktopNotification","doc","notify","window","hidden","notification","Notification","body","content","icon","dir","audio","Audio","play","onclick","focus","close","permission","requestPermission","roundToTwo","round","createLinkFromUrl","onClick","e","stopPropagation","open","extractRootDomain","formatValue","isValid","format","isEmptyContent","test","isValidUsername","reg","storeConstantToStore","values","localStorage","setItem","JSON","stringify","getConstantFromStore","isMap","isFlat","constant","getItem","element","forEach","label","bustIframe","self","top","antiClickjack","parentNode","removeChild","location"],"mappings":"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","sourcesContent":["import { getEnv } from 'apolloClient';\nimport dayjs from 'dayjs';\nimport T from 'i18n-react';\nimport { IUser, IUserDoc } from 'modules/auth/types';\nimport React from 'react';\nimport Tip from '../components/Tip';\nimport { Limited } from '../styles/main';\nimport { IAttachment } from '../types';\nimport Alert from './Alert';\nimport confirm from './confirmation/confirm';\nimport router from './router';\nimport toggleCheckBoxes from './toggleCheckBoxes';\nimport uploadHandler from './uploadHandler';\nimport urlParser from './urlParser';\n\nexport const renderFullName = data => {\n  if (data.firstName || data.lastName) {\n    return (data.firstName || '') + ' ' + (data.lastName || '');\n  }\n\n  if (data.primaryEmail || data.primaryPhone) {\n    return data.primaryEmail || data.primaryPhone;\n  }\n\n  if (data.emails && data.emails.length > 0) {\n    return data.emails[0] || 'Unknown';\n  }\n\n  const { visitorContactInfo } = data;\n\n  if (visitorContactInfo) {\n    return visitorContactInfo.phone || visitorContactInfo.email || 'Unknown';\n  }\n\n  return 'Unknown';\n};\n\nexport const renderUserFullName = data => {\n  const { details } = data;\n\n  if (details && details.fullName) {\n    return details.fullName;\n  }\n\n  if (data.email || data.username) {\n    return data.email || data.username;\n  }\n\n  return 'Unknown';\n};\n\nexport const setTitle = (title: string, force: boolean) => {\n  if (!document.title.includes(title) || force) {\n    document.title = title;\n  }\n};\n\nexport const setBadge = (count: number, title: string) => {\n  const favicon = document.getElementById('favicon') as HTMLAnchorElement;\n\n  if (count) {\n    if (document.title.includes(title)) {\n      setTitle(`(${count}) ${title}`, true);\n    }\n\n    favicon.href = '/favicon-unread.png';\n  } else {\n    setTitle(title, true);\n    favicon.href = '/favicon.png';\n  }\n};\n\nexport const reorder = (\n  list: string[],\n  startIndex: number,\n  endIndex: number\n) => {\n  const result = Array.from(list);\n\n  const [removed] = result.splice(startIndex, 1);\n  result.splice(endIndex, 0, removed);\n\n  return result;\n};\n\nexport const generateRandomColorCode = () => {\n  return `#${Math.random()\n    .toString(16)\n    .slice(2, 8)}`;\n};\n\nconst isNumeric = n => {\n  return !isNaN(parseFloat(n)) && isFinite(n);\n};\n\nexport const isTimeStamp = timestamp => {\n  const newTimestamp = new Date(timestamp).getTime();\n  return isNumeric(newTimestamp);\n};\n\n// Create an array with \"stop\" numbers, starting from \"start\"\nexport const range = (start: number, stop: number) => {\n  return Array.from(Array(stop), (_, i) => start + i);\n};\n\n// Return the list of values that are the intersection of two arrays\nexport const intersection = (array1: any[], array2: any[]) => {\n  return array1.filter(n => array2.includes(n));\n};\n\n// Computes the union of the passed-in arrays: the list of unique items\nexport const union = (array1: any[], array2: any[]) => {\n  return array1.concat(array2.filter(n => !array1.includes(n)));\n};\n\n// Similar to without, but returns the values from array that are not present in the other arrays.\nexport const difference = (array1: any[], array2: any[]) => {\n  return array1.filter(n => !array2.includes(n));\n};\n\nexport { Alert, uploadHandler, router, confirm, toggleCheckBoxes, urlParser };\n\nexport const can = (actionName: string, currentUser: IUser): boolean => {\n  if (!currentUser) {\n    return false;\n  }\n\n  if (currentUser.isOwner) {\n    return true;\n  }\n\n  if (!actionName) {\n    return false;\n  }\n\n  const actions = currentUser.permissionActions || [];\n\n  return actions[actionName] === true;\n};\n\nexport const __ = (key: string, options?: any) => {\n  const translation = T.translate(key, options);\n\n  if (!translation) {\n    return '';\n  }\n\n  return translation.toString();\n};\n\n/**\n * Request to get file's URL for view and download\n * @param {String} - value\n * @return {String} - URL\n */\nexport const readFile = (value: string): string => {\n  if (!value || urlParser.isValidURL(value) || value.includes('/')) {\n    return value;\n  }\n\n  const { REACT_APP_API_URL } = getEnv();\n\n  return `${REACT_APP_API_URL}/read-file?key=${value}`;\n};\n\nexport const getUserAvatar = (user: IUserDoc) => {\n  if (!user) {\n    return '';\n  }\n\n  const { details = {} } = user;\n\n  if (!details.avatar) {\n    return '/images/avatar-colored.svg';\n  }\n\n  return readFile(details.avatar);\n};\n\nexport function withProps<IProps>(\n  Wrapped: new (props: IProps) => React.Component<IProps>\n) {\n  return class WithProps extends React.Component<IProps, {}> {\n    render() {\n      return <Wrapped {...this.props} />;\n    }\n  };\n}\n\nexport function renderWithProps<Props>(\n  props: Props,\n  Wrapped: new (props: Props) => React.Component<Props>\n) {\n  return <Wrapped {...props} />;\n}\n\nexport const isValidDate = date => {\n  const parsedDate = Date.parse(date);\n\n  // Checking if it is date\n  if (isNaN(date) && !isNaN(parsedDate)) {\n    return true;\n  }\n\n  return false;\n};\n\nexport const extractAttachment = (attachments: IAttachment[]) => {\n  return attachments.map(file => ({\n    name: file.name,\n    type: file.type,\n    url: file.url,\n    size: file.size\n  }));\n};\n\nexport const setCookie = (cname: string, cvalue: string, exdays = 100) => {\n  const d = new Date();\n\n  d.setTime(d.getTime() + exdays * 24 * 60 * 60 * 1000);\n\n  const expires = `expires=${d.toUTCString()}`;\n\n  document.cookie = `${cname}=${cvalue};${expires};path=/`;\n};\n\nexport const getCookie = cname => {\n  const name = `${cname}=`;\n  const ca = document.cookie.split(';');\n\n  for (let c of ca) {\n    while (c.charAt(0) === ' ') {\n      c = c.substring(1);\n    }\n\n    if (c.indexOf(name) === 0) {\n      return c.substring(name.length, c.length);\n    }\n  }\n\n  return '';\n};\n\n/**\n * Generate random string\n */\nexport const generateRandomString = (len: number = 10) => {\n  const charSet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';\n\n  let randomString = '';\n\n  for (let i = 0; i < len; i++) {\n    const position = Math.floor(Math.random() * charSet.length);\n    randomString += charSet.substring(position, position + 1);\n  }\n\n  return randomString;\n};\n\n/**\n * Generate random int number between 0 and max\n */\n\nexport const getRandomNumber = (max: number = 10) => {\n  return Math.floor(Math.random() * Math.floor(max));\n};\n\n/**\n * Send desktop notification\n */\nexport const sendDesktopNotification = (doc: {\n  title: string;\n  content?: string;\n}) => {\n  const notify = () => {\n    // Don't send notification to itself\n    if (!window.document.hidden) {\n      return;\n    }\n\n    const notification = new Notification(doc.title, {\n      body: doc.content,\n      icon: '/favicon.png',\n      dir: 'ltr'\n    });\n\n    // notify by sound\n    const audio = new Audio('/sound/notify.mp3');\n    audio.play();\n\n    notification.onclick = () => {\n      window.focus();\n      notification.close();\n    };\n  };\n\n  // Browser doesn't support Notification api\n  if (!('Notification' in window)) {\n    return;\n  }\n\n  if (Notification.permission === 'granted') {\n    return notify();\n  }\n\n  if (Notification.permission !== 'denied') {\n    Notification.requestPermission(permission => {\n      if (!('permission' in Notification)) {\n        (Notification as any).permission = permission;\n      }\n\n      if (permission === 'granted') {\n        return notify();\n      }\n    });\n  }\n};\n\nexport const roundToTwo = value => {\n  if (!value) {\n    return 0;\n  }\n\n  return Math.round(value * 100) / 100;\n};\n\nfunction createLinkFromUrl(url) {\n  if (!url.includes('http')) {\n    url = 'http://' + url;\n  }\n\n  const onClick = e => {\n    e.stopPropagation();\n    window.open(url);\n  };\n\n  return (\n    <a href=\"#website\" onClick={onClick}>\n      {urlParser.extractRootDomain(url)}\n    </a>\n  );\n}\n\nexport function formatValue(value) {\n  if (typeof value === 'boolean') {\n    return value.toString();\n  }\n\n  if (urlParser.isValidURL(value)) {\n    return createLinkFromUrl(value);\n  }\n\n  if (typeof value === 'string') {\n    if (\n      dayjs(value).isValid() &&\n      (value.includes('/') || value.includes('-'))\n    ) {\n      return (\n        <Tip text={dayjs(value).format('D MMM YYYY, HH:mm')} placement=\"top\">\n          <time>{dayjs(value).format('L')}</time>\n        </Tip>\n      );\n    }\n\n    return <Limited>{value}</Limited>;\n  }\n\n  if (value && typeof value === 'object') {\n    return value.toString();\n  }\n\n  return value || '-';\n}\n\nexport function isEmptyContent(content: string) {\n  // check if a string contains whitespace or empty\n  return !/\\S/.test(content);\n}\n\nexport const isValidUsername = (username: string) => {\n  const reg = /^(?=[a-zA-Z0-9._]{4,20}$)(?!.*[_.]{2})[^_.].*[^_.]$/gim;\n\n  return reg.test(username);\n};\n\nexport const storeConstantToStore = (key, values) => {\n  localStorage.setItem(`config:${key}`, JSON.stringify(values));\n};\n\nexport const getConstantFromStore = (\n  key,\n  isMap?: boolean,\n  isFlat?: boolean\n) => {\n  const constant = JSON.parse(localStorage.getItem(`config:${key}`) || '[]');\n\n  if (isFlat) {\n    return constant.map(element => element.value);\n  }\n\n  if (!isMap) {\n    return constant;\n  }\n\n  const map = {};\n\n  constant.forEach(element => {\n    map[element.value] = element.label;\n  });\n\n  return map;\n};\n\n// Most basic frontend solution for click-jack defense\nexport const bustIframe = () => {\n  if (window.self === window.top) {\n    const antiClickjack = document.getElementById('anti-clickjack');\n\n    if (antiClickjack && antiClickjack.parentNode) {\n      antiClickjack.parentNode.removeChild(antiClickjack);\n    }\n  } else {\n    window.top.location = window.self.location;\n  }\n};\n"]},"metadata":{},"sourceType":"module"}