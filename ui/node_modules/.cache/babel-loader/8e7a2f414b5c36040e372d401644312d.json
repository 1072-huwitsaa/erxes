{"ast":null,"code":"import _toConsumableArray from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/anu-ujin/Works/open-source/erxes/ui/src/modules/insights/components/filter/DealFilter.tsx\";\nimport ControlLabel from 'modules/common/components/form/Label';\nimport { __, router } from 'modules/common/utils';\nimport React from 'react';\nimport Select from 'react-select-plus';\nimport { FlexItem } from '../../styles';\nimport { selectOptions } from '../../utils';\nimport Filter from './Filter';\n\nvar DealFilter =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(DealFilter, _React$Component);\n\n  function DealFilter(props) {\n    var _this;\n\n    _classCallCheck(this, DealFilter);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(DealFilter).call(this, props));\n\n    _this.onPipelineChange = function (pipelines) {\n      _this.setState({\n        pipelineIds: pipelines.map(function (el) {\n          return el.value;\n        })\n      });\n    };\n\n    _this.onBoardChange = function (board) {\n      _this.setState({\n        boardId: board && board.value\n      });\n\n      var history = _this.props.history;\n      router.setParams(history, {\n        pipelineIds: '',\n        boardId: board && board.value\n      });\n    };\n\n    _this.onApplyClick = function (_ref) {\n      var startDate = _ref.startDate,\n          endDate = _ref.endDate;\n      var history = _this.props.history;\n      var _this$state = _this.state,\n          pipelineIds = _this$state.pipelineIds,\n          boardId = _this$state.boardId;\n      router.setParams(history, {\n        pipelineIds: (pipelineIds || []).join(','),\n        boardId: boardId,\n        startDate: startDate,\n        endDate: endDate\n      });\n    };\n\n    var _ref2 = props.queryParams || {},\n        _ref2$boardId = _ref2.boardId,\n        _boardId = _ref2$boardId === void 0 ? '' : _ref2$boardId,\n        _ref2$pipelineIds = _ref2.pipelineIds,\n        _pipelineIds = _ref2$pipelineIds === void 0 ? '' : _ref2$pipelineIds;\n\n    _this.state = _objectSpread({\n      boardId: _boardId,\n      pipelineIds: _pipelineIds.split(',')\n    }, props.queryParams);\n    return _this;\n  }\n\n  _createClass(DealFilter, [{\n    key: \"renderPipelines\",\n    value: function renderPipelines() {\n      var pipelines = this.props.pipelines;\n\n      var options = function options(option) {\n        return React.createElement(\"div\", {\n          className: \"simple-option\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 67\n          },\n          __self: this\n        }, option.label));\n      };\n\n      return React.createElement(FlexItem, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, React.createElement(ControlLabel, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, __('Pipelines')), React.createElement(Select, {\n        placeholder: __('Choose pipelines'),\n        value: this.state.pipelineIds || [],\n        onChange: this.onPipelineChange,\n        optionRenderer: options,\n        options: selectOptions(_toConsumableArray(pipelines)),\n        multi: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }));\n    }\n  }, {\n    key: \"renderBoards\",\n    value: function renderBoards() {\n      var boards = this.props.boards;\n\n      var options = function options(option) {\n        return React.createElement(\"div\", {\n          className: \"simple-option\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92\n          },\n          __self: this\n        }, option.label));\n      };\n\n      return React.createElement(FlexItem, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, React.createElement(ControlLabel, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, __('Boards')), React.createElement(Select, {\n        placeholder: __('Choose board'),\n        value: this.state.boardId || '',\n        onChange: this.onBoardChange,\n        optionRenderer: options,\n        options: selectOptions([{\n          _id: '',\n          name: __('All')\n        }].concat(_toConsumableArray(boards))),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          queryParams = _this$props.queryParams,\n          history = _this$props.history;\n      var content = React.createElement(React.Fragment, null, this.renderBoards(), this.renderPipelines());\n      return React.createElement(Filter, {\n        queryParams: queryParams,\n        history: history,\n        content: content,\n        onApplyClick: this.onApplyClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return DealFilter;\n}(React.Component);\n\nexport default DealFilter;","map":{"version":3,"sources":["/home/anu-ujin/Works/open-source/erxes/ui/src/modules/insights/components/filter/DealFilter.tsx"],"names":["ControlLabel","__","router","React","Select","FlexItem","selectOptions","Filter","DealFilter","props","onPipelineChange","pipelines","setState","pipelineIds","map","el","value","onBoardChange","board","boardId","history","setParams","onApplyClick","startDate","endDate","state","join","queryParams","split","options","option","label","boards","_id","name","content","renderBoards","renderPipelines","Component"],"mappings":"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","sourcesContent":["import { IBoard, IPipeline } from 'modules/boards/types';\nimport ControlLabel from 'modules/common/components/form/Label';\nimport { ISelectedOption } from 'modules/common/types';\nimport { __, router } from 'modules/common/utils';\nimport React from 'react';\nimport Select from 'react-select-plus';\nimport { FlexItem } from '../../styles';\nimport { IQueryParams } from '../../types';\nimport { selectOptions } from '../../utils';\nimport Filter from './Filter';\ntype Props = {\n  queryParams: IQueryParams;\n  history: any;\n  pipelines: IPipeline[];\n  boards: IBoard[];\n};\n\ntype States = {\n  boardId: string;\n  pipelineIds: string[];\n};\n\nclass DealFilter extends React.Component<Props, States> {\n  constructor(props) {\n    super(props);\n\n    const { boardId = '', pipelineIds = '' } = props.queryParams || {};\n\n    this.state = {\n      boardId,\n      pipelineIds: pipelineIds.split(','),\n      ...props.queryParams\n    };\n  }\n\n  onPipelineChange = (pipelines: ISelectedOption[]) => {\n    this.setState({ pipelineIds: pipelines.map(el => el.value) });\n  };\n\n  onBoardChange = (board: ISelectedOption) => {\n    this.setState({ boardId: board && board.value });\n\n    const { history } = this.props;\n    router.setParams(history, {\n      pipelineIds: '',\n      boardId: board && board.value\n    });\n  };\n\n  onApplyClick = ({ startDate, endDate }) => {\n    const { history } = this.props;\n    const { pipelineIds, boardId } = this.state;\n\n    router.setParams(history, {\n      pipelineIds: (pipelineIds || []).join(','),\n      boardId,\n      startDate,\n      endDate\n    });\n  };\n\n  renderPipelines() {\n    const { pipelines } = this.props;\n\n    const options = option => (\n      <div className=\"simple-option\">\n        <span>{option.label}</span>\n      </div>\n    );\n\n    return (\n      <FlexItem>\n        <ControlLabel>{__('Pipelines')}</ControlLabel>\n\n        <Select\n          placeholder={__('Choose pipelines')}\n          value={this.state.pipelineIds || []}\n          onChange={this.onPipelineChange}\n          optionRenderer={options}\n          options={selectOptions([...pipelines])}\n          multi={true}\n        />\n      </FlexItem>\n    );\n  }\n\n  renderBoards() {\n    const { boards } = this.props;\n\n    const options = option => (\n      <div className=\"simple-option\">\n        <span>{option.label}</span>\n      </div>\n    );\n\n    return (\n      <FlexItem>\n        <ControlLabel>{__('Boards')}</ControlLabel>\n\n        <Select\n          placeholder={__('Choose board')}\n          value={this.state.boardId || ''}\n          onChange={this.onBoardChange}\n          optionRenderer={options}\n          options={selectOptions([{ _id: '', name: __('All') }, ...boards])}\n        />\n      </FlexItem>\n    );\n  }\n\n  render() {\n    const { queryParams, history } = this.props;\n\n    const content = (\n      <>\n        {this.renderBoards()}\n        {this.renderPipelines()}\n      </>\n    );\n\n    return (\n      <Filter\n        queryParams={queryParams}\n        history={history}\n        content={content}\n        onApplyClick={this.onApplyClick}\n      />\n    );\n  }\n}\n\nexport default DealFilter;\n"]},"metadata":{},"sourceType":"module"}