{"ast":null,"code":"import _objectSpread from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/anu-ujin/Works/open-source/erxes/ui/src/modules/settings/permissions/components/GroupList.tsx\";\nimport Button from 'erxes-common-ui/lib/components/button';\nimport Icon from 'erxes-common-ui/lib/components/icon';\nimport DataWithLoader from 'modules/common/components/DataWithLoader';\nimport LoadMore from 'modules/common/components/LoadMore';\nimport ModalTrigger from 'modules/common/components/ModalTrigger';\nimport Tip from 'modules/common/components/Tip';\nimport { TopHeader } from 'modules/common/styles/main';\nimport { __, router } from 'modules/common/utils';\nimport Sidebar from 'modules/layout/components/Sidebar';\nimport Wrapper from 'modules/layout/components/Wrapper';\nimport { FieldStyle, SidebarList } from 'modules/layout/styles';\nimport MemberAvatars from 'modules/settings/channels/components/MemberAvatars';\nimport { ActionButtons } from 'modules/settings/styles';\nimport React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { Link } from 'react-router-dom';\nimport { SidebarItem } from '../styles';\nimport GroupForm from './GroupForm';\nvar Section = Wrapper.Sidebar.Section;\n\nvar GroupList =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(GroupList, _React$Component);\n\n  function GroupList() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, GroupList);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(GroupList)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.renderForm = function (props) {\n      var _this$props = _this.props,\n          refetch = _this$props.refetch,\n          renderButton = _this$props.renderButton;\n\n      var extendedProps = _objectSpread({}, props, {\n        refetch: refetch\n      });\n\n      return React.createElement(GroupForm, Object.assign({}, extendedProps, {\n        renderButton: renderButton,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      }));\n    };\n\n    _this.isActive = function (id) {\n      var queryParams = _this.props.queryParams;\n      var currentGroup = queryParams.groupId || '';\n      return currentGroup === id;\n    };\n\n    _this.clearGroupFilter = function () {\n      router.setParams(_this.props.history, {\n        groupId: null\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(GroupList, [{\n    key: \"renderFormTrigger\",\n    value: function renderFormTrigger(trigger, object) {\n      var _this2 = this;\n\n      var content = function content(props) {\n        return _this2.renderForm(_objectSpread({}, props, {\n          object: object\n        }));\n      };\n\n      return React.createElement(ModalTrigger, {\n        title: \"New Group\",\n        trigger: trigger,\n        content: content,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 40\n        },\n        __self: this\n      });\n    }\n  }, {\n    key: \"renderEditAction\",\n    value: function renderEditAction(object) {\n      var trigger = React.createElement(Button, {\n        btnStyle: \"link\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, React.createElement(Tip, {\n        text: __('Edit'),\n        placement: \"bottom\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        icon: \"edit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      })));\n      return this.renderFormTrigger(trigger, object);\n    }\n  }, {\n    key: \"renderRemoveAction\",\n    value: function renderRemoveAction(object) {\n      var remove = this.props.remove;\n      return React.createElement(Button, {\n        btnStyle: \"link\",\n        onClick: remove.bind(null, object._id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(Tip, {\n        text: __('Remove'),\n        placement: \"bottom\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        icon: \"cancel-1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      })));\n    }\n  }, {\n    key: \"renderCopyAction\",\n    value: function renderCopyAction(object) {\n      var _this3 = this;\n\n      var onCopy = function onCopy() {\n        return _this3.props.copyItem(object._id, 'memberIds', object.memberIds || []);\n      };\n\n      var tipText = 'Copies user group along with the permissions & users';\n      return React.createElement(Button, {\n        btnStyle: \"link\",\n        onClick: onCopy,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, React.createElement(Tip, {\n        text: tipText,\n        placement: \"bottom\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        icon: \"copy\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      })));\n    }\n  }, {\n    key: \"renderObjects\",\n    value: function renderObjects(objects) {\n      var _this4 = this;\n\n      return objects.map(function (object) {\n        return React.createElement(SidebarItem, {\n          key: object._id,\n          isActive: _this4.isActive(object._id),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104\n          },\n          __self: this\n        }, React.createElement(Link, {\n          to: \"?groupId=\".concat(object._id),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105\n          },\n          __self: this\n        }, React.createElement(FieldStyle, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 106\n          },\n          __self: this\n        }, object.name, React.createElement(MemberAvatars, {\n          selectedMemberIds: object.memberIds || [],\n          allMembers: object.members || [],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108\n          },\n          __self: this\n        }))), React.createElement(ActionButtons, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114\n          },\n          __self: this\n        }, _this4.renderCopyAction(object), _this4.renderEditAction(object), _this4.renderRemoveAction(object)));\n      });\n    }\n  }, {\n    key: \"renderContent\",\n    value: function renderContent() {\n      var objects = this.props.objects;\n      return React.createElement(SidebarList, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, this.renderObjects(objects));\n    }\n  }, {\n    key: \"renderSidebarHeader\",\n    value: function renderSidebarHeader() {\n      var trigger = React.createElement(Button, {\n        id: \"permission-create-user-group\",\n        btnStyle: \"success\",\n        uppercase: false,\n        icon: \"plus-circle\",\n        block: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, \"Create user group\");\n      return React.createElement(React.Fragment, null, React.createElement(TopHeader, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, this.renderFormTrigger(trigger)), React.createElement(Section.Title, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, __('User groups'), React.createElement(Section.QuickButtons, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, router.getParam(this.props.history, 'groupId') && React.createElement(\"a\", {\n        href: \"#cancel\",\n        tabIndex: 0,\n        onClick: this.clearGroupFilter,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, React.createElement(Tip, {\n        text: __('Clear filter'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        icon: \"cancel-1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }))))));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          totalCount = _this$props2.totalCount,\n          loading = _this$props2.loading;\n      return React.createElement(Sidebar, {\n        full: true,\n        wide: true,\n        header: this.renderSidebarHeader(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, React.createElement(DataWithLoader, {\n        data: this.renderContent(),\n        loading: loading,\n        count: totalCount,\n        emptyText: \"There is no group\",\n        emptyImage: \"/images/actions/26.svg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }), React.createElement(LoadMore, {\n        all: totalCount,\n        loading: loading,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return GroupList;\n}(React.Component);\n\nexport default withRouter(GroupList);","map":{"version":3,"sources":["/home/anu-ujin/Works/open-source/erxes/ui/src/modules/settings/permissions/components/GroupList.tsx"],"names":["Button","Icon","DataWithLoader","LoadMore","ModalTrigger","Tip","TopHeader","__","router","Sidebar","Wrapper","FieldStyle","SidebarList","MemberAvatars","ActionButtons","React","withRouter","Link","SidebarItem","GroupForm","Section","GroupList","renderForm","props","refetch","renderButton","extendedProps","isActive","id","queryParams","currentGroup","groupId","clearGroupFilter","setParams","history","trigger","object","content","renderFormTrigger","remove","bind","_id","onCopy","copyItem","memberIds","tipText","objects","map","name","members","renderCopyAction","renderEditAction","renderRemoveAction","renderObjects","getParam","totalCount","loading","renderSidebarHeader","renderContent","Component"],"mappings":"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","sourcesContent":["import Button from 'erxes-common-ui/lib/components/button';\nimport Icon from 'erxes-common-ui/lib/components/icon';\nimport DataWithLoader from 'modules/common/components/DataWithLoader';\nimport LoadMore from 'modules/common/components/LoadMore';\nimport ModalTrigger from 'modules/common/components/ModalTrigger';\nimport Tip from 'modules/common/components/Tip';\nimport { TopHeader } from 'modules/common/styles/main';\nimport { IButtonMutateProps, IRouterProps } from 'modules/common/types';\nimport { __, router } from 'modules/common/utils';\nimport Sidebar from 'modules/layout/components/Sidebar';\nimport Wrapper from 'modules/layout/components/Wrapper';\nimport { FieldStyle, SidebarList } from 'modules/layout/styles';\nimport MemberAvatars from 'modules/settings/channels/components/MemberAvatars';\nimport { ActionButtons } from 'modules/settings/styles';\nimport React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { Link } from 'react-router-dom';\nimport { SidebarItem } from '../styles';\nimport { IUserGroup, IUserGroupDocument } from '../types';\nimport GroupForm from './GroupForm';\n\nconst { Section } = Wrapper.Sidebar;\n\ninterface IProps extends IRouterProps {\n  queryParams: any;\n  refetch: any;\n  totalCount: number;\n  loading: boolean;\n  objects: IUserGroupDocument[];\n  renderButton: (props: IButtonMutateProps) => JSX.Element;\n  remove: (id: string) => void;\n  copyItem: (id: string, key: string, list?: string[]) => void;\n}\n\nclass GroupList extends React.Component<IProps> {\n  renderFormTrigger(trigger: React.ReactNode, object?: IUserGroup) {\n    const content = props => this.renderForm({ ...props, object });\n\n    return (\n      <ModalTrigger title=\"New Group\" trigger={trigger} content={content} />\n    );\n  }\n\n  renderForm = props => {\n    const { refetch, renderButton } = this.props;\n\n    const extendedProps = { ...props, refetch };\n\n    return <GroupForm {...extendedProps} renderButton={renderButton} />;\n  };\n\n  isActive = (id: string) => {\n    const { queryParams } = this.props;\n    const currentGroup = queryParams.groupId || '';\n\n    return currentGroup === id;\n  };\n\n  clearGroupFilter = () => {\n    router.setParams(this.props.history, { groupId: null });\n  };\n\n  renderEditAction(object: IUserGroupDocument) {\n    const trigger = (\n      <Button btnStyle=\"link\">\n        <Tip text={__('Edit')} placement=\"bottom\">\n          <Icon icon=\"edit\" />\n        </Tip>\n      </Button>\n    );\n\n    return this.renderFormTrigger(trigger, object);\n  }\n\n  renderRemoveAction(object: IUserGroupDocument) {\n    const { remove } = this.props;\n\n    return (\n      <Button btnStyle=\"link\" onClick={remove.bind(null, object._id)}>\n        <Tip text={__('Remove')} placement=\"bottom\">\n          <Icon icon=\"cancel-1\" />\n        </Tip>\n      </Button>\n    );\n  }\n\n  renderCopyAction(object: IUserGroupDocument) {\n    const onCopy = () =>\n      this.props.copyItem(object._id, 'memberIds', object.memberIds || []);\n\n    const tipText = 'Copies user group along with the permissions & users';\n\n    return (\n      <Button btnStyle=\"link\" onClick={onCopy}>\n        <Tip text={tipText} placement=\"bottom\">\n          <Icon icon=\"copy\" />\n        </Tip>\n      </Button>\n    );\n  }\n\n  renderObjects(objects: IUserGroupDocument[]) {\n    return objects.map(object => (\n      <SidebarItem key={object._id} isActive={this.isActive(object._id)}>\n        <Link to={`?groupId=${object._id}`}>\n          <FieldStyle>\n            {object.name}\n            <MemberAvatars\n              selectedMemberIds={object.memberIds || []}\n              allMembers={object.members || []}\n            />\n          </FieldStyle>\n        </Link>\n        <ActionButtons>\n          {this.renderCopyAction(object)}\n          {this.renderEditAction(object)}\n          {this.renderRemoveAction(object)}\n        </ActionButtons>\n      </SidebarItem>\n    ));\n  }\n\n  renderContent() {\n    const { objects } = this.props;\n\n    return <SidebarList>{this.renderObjects(objects)}</SidebarList>;\n  }\n\n  renderSidebarHeader() {\n    const trigger = (\n      <Button\n        id=\"permission-create-user-group\"\n        btnStyle=\"success\"\n        uppercase={false}\n        icon=\"plus-circle\"\n        block={true}\n      >\n        Create user group\n      </Button>\n    );\n\n    return (\n      <>\n        <TopHeader>{this.renderFormTrigger(trigger)}</TopHeader>\n        <Section.Title>\n          {__('User groups')}\n          <Section.QuickButtons>\n            {router.getParam(this.props.history, 'groupId') && (\n              <a href=\"#cancel\" tabIndex={0} onClick={this.clearGroupFilter}>\n                <Tip text={__('Clear filter')}>\n                  <Icon icon=\"cancel-1\" />\n                </Tip>\n              </a>\n            )}\n          </Section.QuickButtons>\n        </Section.Title>\n      </>\n    );\n  }\n\n  render() {\n    const { totalCount, loading } = this.props;\n\n    return (\n      <Sidebar full={true} wide={true} header={this.renderSidebarHeader()}>\n        <DataWithLoader\n          data={this.renderContent()}\n          loading={loading}\n          count={totalCount}\n          emptyText=\"There is no group\"\n          emptyImage=\"/images/actions/26.svg\"\n        />\n        <LoadMore all={totalCount} loading={loading} />\n      </Sidebar>\n    );\n  }\n}\n\nexport default withRouter<IProps>(GroupList);\n"]},"metadata":{},"sourceType":"module"}