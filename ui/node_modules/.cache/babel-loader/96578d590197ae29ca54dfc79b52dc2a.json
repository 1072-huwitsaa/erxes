{"ast":null,"code":"import _classCallCheck from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/anu-ujin/Works/open-source/erxes/ui/src/modules/deals/components/conversion/list/List.tsx\";\nimport * as React from 'react';\nimport { Result } from '../style';\nimport Stage from './Stage';\n\nvar List =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(List, _React$Component);\n\n  function List() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, List);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(List)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.calcSpace = function (lenght, index) {\n      return 100 - index * (100 / lenght) / 1.5;\n    };\n\n    return _this;\n  }\n\n  _createClass(List, [{\n    key: \"renderFooter\",\n    value: function renderFooter() {\n      var stages = this.props.stages;\n\n      if (stages.length === 0) {\n        return;\n      }\n\n      var firstStage = stages[0] || {};\n      var lastStage = stages.slice(-1)[0] || {};\n      var firstStageInitialDealsTotalCount = firstStage.initialDealsTotalCount || 1;\n      var lastStageItemsTotalCount = lastStage.itemsTotalCount || 0;\n      var avarage = lastStageItemsTotalCount * 100 / firstStageInitialDealsTotalCount;\n      return React.createElement(Result, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 33\n        },\n        __self: this\n      }, \"Winrate: \", parseInt(\"\".concat(avarage), 10), \"%\");\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var stages = this.props.stages;\n      var contents = stages.map(function (stage, index) {\n        return React.createElement(Stage, {\n          spacing: _this2.calcSpace(stages.length, index),\n          key: index,\n          stage: stage,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 40\n          },\n          __self: this\n        });\n      });\n      return React.createElement(React.Fragment, null, contents, this.renderFooter());\n    }\n  }]);\n\n  return List;\n}(React.Component);\n\nexport default List;","map":{"version":3,"sources":["/home/anu-ujin/Works/open-source/erxes/ui/src/modules/deals/components/conversion/list/List.tsx"],"names":["React","Result","Stage","List","calcSpace","lenght","index","stages","props","length","firstStage","lastStage","slice","firstStageInitialDealsTotalCount","initialDealsTotalCount","lastStageItemsTotalCount","itemsTotalCount","avarage","parseInt","contents","map","stage","renderFooter","Component"],"mappings":";;;;;;AACA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAASC,MAAT,QAAuB,UAAvB;AACA,OAAOC,KAAP,MAAkB,SAAlB;;IAMMC,I;;;;;;;;;;;;;;;;;;UACJC,S,GAAY,UAACC,MAAD,EAAiBC,KAAjB,EAAmC;AAC7C,aAAO,MAAOA,KAAK,IAAI,MAAMD,MAAV,CAAN,GAA2B,GAAxC;AACD,K;;;;;;;mCAEc;AAAA,UACLE,MADK,GACM,KAAKC,KADX,CACLD,MADK;;AAGb,UAAIA,MAAM,CAACE,MAAP,KAAkB,CAAtB,EAAyB;AACvB;AACD;;AAED,UAAMC,UAA4B,GAAGH,MAAM,CAAC,CAAD,CAAN,IAAa,EAAlD;AACA,UAAMI,SAA2B,GAAGJ,MAAM,CAACK,KAAP,CAAa,CAAC,CAAd,EAAiB,CAAjB,KAAuB,EAA3D;AAEA,UAAMC,gCAAgC,GACpCH,UAAU,CAACI,sBAAX,IAAqC,CADvC;AAGA,UAAMC,wBAAwB,GAAGJ,SAAS,CAACK,eAAV,IAA6B,CAA9D;AAEA,UAAMC,OAAO,GACVF,wBAAwB,GAAG,GAA5B,GAAmCF,gCADrC;AAGA,aAAO,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAkBK,QAAQ,WAAID,OAAJ,GAAe,EAAf,CAA1B,MAAP;AACD;;;6BAEQ;AAAA;;AAAA,UACCV,MADD,GACY,KAAKC,KADjB,CACCD,MADD;AAGP,UAAMY,QAAQ,GAAGZ,MAAM,CAACa,GAAP,CAAW,UAACC,KAAD,EAA0Bf,KAA1B;AAAA,eAC1B,oBAAC,KAAD;AACE,UAAA,OAAO,EAAE,MAAI,CAACF,SAAL,CAAeG,MAAM,CAACE,MAAtB,EAA8BH,KAA9B,CADX;AAEE,UAAA,GAAG,EAAEA,KAFP;AAGE,UAAA,KAAK,EAAEe,KAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAD0B;AAAA,OAAX,CAAjB;AAQA,aACE,0CACGF,QADH,EAEG,KAAKG,YAAL,EAFH,CADF;AAMD;;;;EA3CgBtB,KAAK,CAACuB,S;;AA8CzB,eAAepB,IAAf","sourcesContent":["import { IConversionStage } from 'modules/boards/types';\nimport * as React from 'react';\nimport { Result } from '../style';\nimport Stage from './Stage';\n\ntype Props = {\n  stages: IConversionStage[];\n};\n\nclass List extends React.Component<Props, {}> {\n  calcSpace = (lenght: number, index: number) => {\n    return 100 - (index * (100 / lenght)) / 1.5;\n  };\n\n  renderFooter() {\n    const { stages } = this.props;\n\n    if (stages.length === 0) {\n      return;\n    }\n\n    const firstStage: IConversionStage = stages[0] || {};\n    const lastStage: IConversionStage = stages.slice(-1)[0] || {};\n\n    const firstStageInitialDealsTotalCount =\n      firstStage.initialDealsTotalCount || 1;\n\n    const lastStageItemsTotalCount = lastStage.itemsTotalCount || 0;\n\n    const avarage =\n      (lastStageItemsTotalCount * 100) / firstStageInitialDealsTotalCount;\n\n    return <Result>Winrate: {parseInt(`${avarage}`, 10)}%</Result>;\n  }\n\n  render() {\n    const { stages } = this.props;\n\n    const contents = stages.map((stage: IConversionStage, index: number) => (\n      <Stage\n        spacing={this.calcSpace(stages.length, index)}\n        key={index}\n        stage={stage}\n      />\n    ));\n\n    return (\n      <>\n        {contents}\n        {this.renderFooter()}\n      </>\n    );\n  }\n}\n\nexport default List;\n"]},"metadata":{},"sourceType":"module"}