{"ast":null,"code":"import _classCallCheck from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/anu-ujin/Works/open-source/erxes/ui/src/modules/settings/integrations/components/messenger/widgetPreview/TopBar.tsx\";\nimport dayjs from 'dayjs';\nimport Icon from 'erxes-common-ui/lib/components/icon';\nimport { __ } from 'modules/common/utils';\nimport React from 'react';\nimport { ErxesGreeting, ErxesMiddleTitle, ErxesTopbar, GreetingInfo, Links, Socials, TopBarIcon } from './styles';\nimport SupporterComponent from './Supporters';\n\nvar TopBar =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(TopBar, _React$Component);\n\n  function TopBar() {\n    _classCallCheck(this, TopBar);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(TopBar).apply(this, arguments));\n  }\n\n  _createClass(TopBar, [{\n    key: \"renderIcons\",\n    value: function renderIcons(icon, left, size) {\n      return React.createElement(TopBarIcon, {\n        isLeft: left || false,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 39\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        icon: icon,\n        size: size || 24,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 40\n        },\n        __self: this\n      }));\n    }\n  }, {\n    key: \"renderLink\",\n    value: function renderLink(value, icon) {\n      if (!value) {\n        return null;\n      }\n\n      return React.createElement(\"a\", {\n        href: \"#icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        icon: icon,\n        size: 18,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }));\n    }\n  }, {\n    key: \"renderSupporters\",\n    value: function renderSupporters() {\n      var _this$props = this.props,\n          supporterIds = _this$props.supporterIds,\n          isOnline = _this$props.isOnline,\n          teamMembers = _this$props.teamMembers,\n          isGreeting = _this$props.isGreeting;\n      return React.createElement(SupporterComponent, {\n        supporterIds: supporterIds,\n        isOnline: isOnline,\n        teamMembers: teamMembers,\n        isGreeting: isGreeting,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      });\n    }\n  }, {\n    key: \"renderTopBar\",\n    value: function renderTopBar() {\n      var _this$props2 = this.props,\n          _this$props2$brands = _this$props2.brands,\n          brands = _this$props2$brands === void 0 ? [] : _this$props2$brands,\n          brandId = _this$props2.brandId;\n      var currentBrand = {};\n      brands.map(function (brand) {\n        if (brand._id !== brandId) {\n          return null;\n        }\n\n        return currentBrand = brand;\n      });\n      return React.createElement(React.Fragment, null, this.renderIcons('angle-left', true), React.createElement(ErxesMiddleTitle, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, currentBrand && React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, currentBrand.name), currentBrand && React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, currentBrand.description), this.renderSupporters()), this.renderIcons('times', false));\n    }\n  }, {\n    key: \"renderGreetingTitle\",\n    value: function renderGreetingTitle(message) {\n      if (message && message.greetings.title) {\n        return React.createElement(\"h3\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 97\n          },\n          __self: this\n        }, message.greetings.title);\n      }\n\n      return React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, __('Welcome'));\n    }\n  }, {\n    key: \"renderGreetingMessage\",\n    value: function renderGreetingMessage(message) {\n      if (message && message.greetings.message) {\n        return React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105\n          },\n          __self: this\n        }, message.greetings.message);\n      }\n\n      return React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, __('Hi, any questions?'), \" \", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }), \" \", __('We are ready to help you') + '.');\n    }\n  }, {\n    key: \"renderGreetings\",\n    value: function renderGreetings() {\n      var message = this.props.message;\n      return React.createElement(GreetingInfo, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, this.renderGreetingTitle(message), this.renderGreetingMessage(message));\n    }\n  }, {\n    key: \"renderGreetingTopbar\",\n    value: function renderGreetingTopbar() {\n      var _this$props3 = this.props,\n          facebook = _this$props3.facebook,\n          twitter = _this$props3.twitter,\n          youtube = _this$props3.youtube;\n      return React.createElement(React.Fragment, null, React.createElement(ErxesGreeting, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(Links, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, dayjs(new Date()).format('lll')), React.createElement(Socials, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, this.renderLink(facebook, 'facebook-official'), this.renderLink(twitter, 'twitter'), this.renderLink(youtube, 'youtube-play'))), this.renderGreetings(), this.renderSupporters()), this.renderIcons('cancel', false, 11));\n    }\n  }, {\n    key: \"renderContent\",\n    value: function renderContent() {\n      if (this.props.isGreeting) {\n        return this.renderGreetingTopbar();\n      }\n\n      return this.renderTopBar();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props4 = this.props,\n          color = _this$props4.color,\n          textColor = _this$props4.textColor;\n      return React.createElement(ErxesTopbar, {\n        style: {\n          backgroundColor: color,\n          color: textColor\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, this.renderContent());\n    }\n  }]);\n\n  return TopBar;\n}(React.Component);\n\nexport default TopBar;","map":{"version":3,"sources":["/home/anu-ujin/Works/open-source/erxes/ui/src/modules/settings/integrations/components/messenger/widgetPreview/TopBar.tsx"],"names":["dayjs","Icon","__","React","ErxesGreeting","ErxesMiddleTitle","ErxesTopbar","GreetingInfo","Links","Socials","TopBarIcon","SupporterComponent","TopBar","icon","left","size","value","props","supporterIds","isOnline","teamMembers","isGreeting","brands","brandId","currentBrand","map","brand","_id","renderIcons","name","description","renderSupporters","message","greetings","title","renderGreetingTitle","renderGreetingMessage","facebook","twitter","youtube","Date","format","renderLink","renderGreetings","renderGreetingTopbar","renderTopBar","color","textColor","backgroundColor","renderContent","Component"],"mappings":"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","sourcesContent":["import dayjs from 'dayjs';\nimport { IUser } from 'modules/auth/types';\nimport Icon from 'erxes-common-ui/lib/components/icon';\nimport { __ } from 'modules/common/utils';\nimport { IBrand } from 'modules/settings/brands/types';\nimport { IMessagesItem } from 'modules/settings/integrations/types';\nimport React from 'react';\nimport {\n  ErxesGreeting,\n  ErxesMiddleTitle,\n  ErxesTopbar,\n  GreetingInfo,\n  Links,\n  Socials,\n  TopBarIcon\n} from './styles';\nimport SupporterComponent from './Supporters';\n\ntype Props = {\n  color: string;\n  textColor: string;\n  message?: IMessagesItem;\n  wallpaper: string;\n  supporterIds?: string[];\n  isOnline: boolean;\n  logoPreviewUrl?: string;\n  brandId?: string;\n  brands?: IBrand[];\n  teamMembers: IUser[];\n  isGreeting?: boolean;\n  facebook?: string;\n  twitter?: string;\n  youtube?: string;\n};\n\nclass TopBar extends React.Component<Props> {\n  renderIcons(icon: string, left?: boolean, size?: number) {\n    return (\n      <TopBarIcon isLeft={left || false}>\n        <Icon icon={icon} size={size || 24} />\n      </TopBarIcon>\n    );\n  }\n\n  renderLink(value, icon) {\n    if (!value) {\n      return null;\n    }\n\n    return (\n      <a href=\"#icon\">\n        <Icon icon={icon} size={18} />\n      </a>\n    );\n  }\n\n  renderSupporters() {\n    const { supporterIds, isOnline, teamMembers, isGreeting } = this.props;\n\n    return (\n      <SupporterComponent\n        supporterIds={supporterIds}\n        isOnline={isOnline}\n        teamMembers={teamMembers}\n        isGreeting={isGreeting}\n      />\n    );\n  }\n\n  renderTopBar() {\n    const { brands = [], brandId } = this.props;\n    let currentBrand = {} as IBrand;\n\n    brands.map(brand => {\n      if (brand._id !== brandId) {\n        return null;\n      }\n\n      return (currentBrand = brand);\n    });\n\n    return (\n      <>\n        {this.renderIcons('angle-left', true)}\n        <ErxesMiddleTitle>\n          {currentBrand && <h3>{currentBrand.name}</h3>}\n          {currentBrand && <span>{currentBrand.description}</span>}\n          {this.renderSupporters()}\n        </ErxesMiddleTitle>\n        {this.renderIcons('times', false)}\n      </>\n    );\n  }\n\n  renderGreetingTitle(message) {\n    if (message && message.greetings.title) {\n      return <h3>{message.greetings.title}</h3>;\n    }\n\n    return <h3>{__('Welcome')}</h3>;\n  }\n\n  renderGreetingMessage(message) {\n    if (message && message.greetings.message) {\n      return <p>{message.greetings.message}</p>;\n    }\n\n    return (\n      <p>\n        {__('Hi, any questions?')} <br /> {__('We are ready to help you') + '.'}\n      </p>\n    );\n  }\n\n  renderGreetings() {\n    const { message } = this.props;\n\n    return (\n      <GreetingInfo>\n        {this.renderGreetingTitle(message)}\n        {this.renderGreetingMessage(message)}\n      </GreetingInfo>\n    );\n  }\n\n  renderGreetingTopbar() {\n    const { facebook, twitter, youtube } = this.props;\n\n    return (\n      <>\n        <ErxesGreeting>\n          <Links>\n            <span>{dayjs(new Date()).format('lll')}</span>\n            <Socials>\n              {this.renderLink(facebook, 'facebook-official')}\n              {this.renderLink(twitter, 'twitter')}\n              {this.renderLink(youtube, 'youtube-play')}\n            </Socials>\n          </Links>\n\n          {this.renderGreetings()}\n          {this.renderSupporters()}\n        </ErxesGreeting>\n        {this.renderIcons('cancel', false, 11)}\n      </>\n    );\n  }\n\n  renderContent() {\n    if (this.props.isGreeting) {\n      return this.renderGreetingTopbar();\n    }\n\n    return this.renderTopBar();\n  }\n\n  render() {\n    const { color, textColor } = this.props;\n\n    return (\n      <ErxesTopbar style={{ backgroundColor: color, color: textColor }}>\n        {this.renderContent()}\n      </ErxesTopbar>\n    );\n  }\n}\n\nexport default TopBar;\n"]},"metadata":{},"sourceType":"module"}