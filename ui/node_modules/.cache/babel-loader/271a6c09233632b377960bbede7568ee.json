{"ast":null,"code":"import _classCallCheck from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _taggedTemplateLiteral from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/home/anu-ujin/Works/open-source/erxes/ui/src/modules/settings/properties/components/ManageColumns.tsx\";\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n  width: 100%;\\n  label {\\n    float: right;\\n  }\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  text-align: right;\\n  margin-top: 20px;\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: space-between;\\n  background: \", \";\\n  border: 1px solid \", \";\\n  border-radius: 2px;\\n  margin-bottom: 10px;\\n\\n  > span {\\n    text-transform: uppercase;\\n    padding: 5px 20px 5px 30px;\\n    font-weight: bold;\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport Button from \"erxes-common-ui/lib/components/button\";\nimport FormControl from \"modules/common/components/form/Control\";\nimport SortableList from \"modules/common/components/SortableList\";\nimport { colors } from \"modules/common/styles\";\nimport { ScrollWrapper } from \"modules/common/styles/main\";\nimport { __ } from \"modules/common/utils\";\nimport React from \"react\";\nimport styled from \"styled-components\";\nvar Header = styled.div(_templateObject(), colors.bgActive, colors.borderPrimary);\nvar Footer = styled.div(_templateObject2());\nvar Child = styled.div(_templateObject3());\n\nvar ManageColumns =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ManageColumns, _React$Component);\n\n  function ManageColumns(props) {\n    var _this;\n\n    _classCallCheck(this, ManageColumns);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ManageColumns).call(this, props));\n\n    _this.onSubmit = function (e) {\n      e.preventDefault();\n      var columnsConfig = [];\n      var importType = _this.state.importType;\n\n      _this.state.columns.forEach(function (col, index) {\n        var element = document.getElementById(col._id);\n        columnsConfig.push({\n          _id: col._id,\n          order: index,\n          checked: element.checked,\n          name: col.name,\n          label: col.label\n        });\n      });\n\n      _this.props.save(columnsConfig, importType);\n\n      _this.props.closeModal();\n    };\n\n    _this.onChangeColumns = function (columns) {\n      _this.setState({\n        columns: columns\n      });\n    };\n\n    _this.state = {\n      columns: props.columns,\n      importType: \"xlsx\"\n    };\n    return _this;\n  }\n\n  _createClass(ManageColumns, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var type = this.props.type;\n\n      var child = function child(col) {\n        return React.createElement(Child, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88\n          },\n          __self: this\n        }, col.label), React.createElement(FormControl, {\n          id: String(col._id),\n          defaultChecked: col.checked,\n          componentClass: \"checkbox\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89\n          },\n          __self: this\n        }));\n      };\n\n      var onclickCsv = function onclickCsv(e) {\n        _this2.setState({\n          importType: \"csv\"\n        }, function () {\n          _this2.onSubmit(e);\n        });\n      };\n\n      return React.createElement(\"form\", {\n        onSubmit: this.onSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, React.createElement(Header, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, __(\"Column name\")), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, __(\"Visible\"))), React.createElement(ScrollWrapper, {\n        calcHeight: \"320\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, React.createElement(SortableList, {\n        fields: this.state.columns,\n        child: child,\n        onChangeFields: this.onChangeColumns,\n        isModal: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      })), React.createElement(Footer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(Button, {\n        type: \"button\",\n        btnStyle: \"simple\",\n        onClick: this.props.closeModal,\n        uppercase: false,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, \"Cancel\"), React.createElement(Button, {\n        type: \"submit\",\n        btnStyle: \"success\",\n        uppercase: false,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, type && type === \"import\" ? \"Download xlsx\" : \"Submit\"), type && type === \"import\" ? React.createElement(Button, {\n        uppercase: false,\n        type: \"submit\",\n        onClick: onclickCsv,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, \"Download csv\") : null));\n    }\n  }]);\n\n  return ManageColumns;\n}(React.Component);\n\nexport default ManageColumns;","map":{"version":3,"sources":["/home/anu-ujin/Works/open-source/erxes/ui/src/modules/settings/properties/components/ManageColumns.tsx"],"names":["Button","FormControl","SortableList","colors","ScrollWrapper","__","React","styled","Header","div","bgActive","borderPrimary","Footer","Child","ManageColumns","props","onSubmit","e","preventDefault","columnsConfig","importType","state","columns","forEach","col","index","element","document","getElementById","_id","push","order","checked","name","label","save","closeModal","onChangeColumns","setState","type","child","String","onclickCsv","Component"],"mappings":"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","sourcesContent":["import Button from \"erxes-common-ui/lib/components/button\";\nimport FormControl from \"modules/common/components/form/Control\";\nimport SortableList from \"modules/common/components/SortableList\";\nimport { colors } from \"modules/common/styles\";\nimport { ScrollWrapper } from \"modules/common/styles/main\";\nimport { __ } from \"modules/common/utils\";\nimport React from \"react\";\nimport styled from \"styled-components\";\nimport { IConfigColumn } from \"../types\";\n\nconst Header = styled.div`\n  display: flex;\n  justify-content: space-between;\n  background: ${colors.bgActive};\n  border: 1px solid ${colors.borderPrimary};\n  border-radius: 2px;\n  margin-bottom: 10px;\n\n  > span {\n    text-transform: uppercase;\n    padding: 5px 20px 5px 30px;\n    font-weight: bold;\n  }\n`;\n\nconst Footer = styled.div`\n  text-align: right;\n  margin-top: 20px;\n`;\n\nconst Child = styled.div`\n  width: 100%;\n  label {\n    float: right;\n  }\n`;\n\ntype Props = {\n  columns: IConfigColumn[];\n  save: (columnsConfig: IConfigColumn[], importType?: string) => void;\n  closeModal: () => void;\n  type: string;\n};\n\ntype State = {\n  columns: IConfigColumn[];\n  importType: string;\n};\n\nclass ManageColumns extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    this.state = { columns: props.columns, importType: \"xlsx\" };\n  }\n\n  onSubmit = (e) => {\n    e.preventDefault();\n    const columnsConfig: IConfigColumn[] = [];\n    const { importType } = this.state;\n\n    this.state.columns.forEach((col, index) => {\n      const element = document.getElementById(col._id) as HTMLInputElement;\n\n      columnsConfig.push({\n        _id: col._id,\n        order: index,\n        checked: element.checked,\n        name: col.name,\n        label: col.label,\n      });\n    });\n\n    this.props.save(columnsConfig, importType);\n    this.props.closeModal();\n  };\n\n  onChangeColumns = (columns) => {\n    this.setState({ columns });\n  };\n\n  render() {\n    const { type } = this.props;\n\n    const child = (col) => {\n      return (\n        <Child>\n          <span>{col.label}</span>\n          <FormControl\n            id={String(col._id)}\n            defaultChecked={col.checked}\n            componentClass=\"checkbox\"\n          />\n        </Child>\n      );\n    };\n\n    const onclickCsv = (e) => {\n      this.setState({ importType: \"csv\" }, () => {\n        this.onSubmit(e);\n      });\n    };\n\n    return (\n      <form onSubmit={this.onSubmit}>\n        <Header>\n          <span>{__(\"Column name\")}</span>\n          <span>{__(\"Visible\")}</span>\n        </Header>\n        <ScrollWrapper calcHeight=\"320\">\n          <SortableList\n            fields={this.state.columns}\n            child={child}\n            onChangeFields={this.onChangeColumns}\n            isModal={true}\n          />\n        </ScrollWrapper>\n        <Footer>\n          <Button\n            type=\"button\"\n            btnStyle=\"simple\"\n            onClick={this.props.closeModal}\n            uppercase={false}\n          >\n            Cancel\n          </Button>\n\n          <Button type=\"submit\" btnStyle=\"success\" uppercase={false}>\n            {type && type === \"import\" ? \"Download xlsx\" : \"Submit\"}\n          </Button>\n\n          {type && type === \"import\" ? (\n            <Button uppercase={false} type=\"submit\" onClick={onclickCsv}>\n              Download csv\n            </Button>\n          ) : null}\n        </Footer>\n      </form>\n    );\n  }\n}\n\nexport default ManageColumns;\n"]},"metadata":{},"sourceType":"module"}