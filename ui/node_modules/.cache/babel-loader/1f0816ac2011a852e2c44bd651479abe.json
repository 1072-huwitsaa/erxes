{"ast":null,"code":"import _classCallCheck from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/anu-ujin/Works/open-source/erxes/ui/src/modules/customers/components/detail/LeadState.tsx\";\nimport Button from 'erxes-common-ui/lib/components/button';\nimport Icon from 'erxes-common-ui/lib/components/icon';\nimport { LEAD_CHOICES } from 'modules/customers/constants';\nimport { LeadStateWrapper, StateItem } from 'modules/customers/styles';\nimport React from 'react';\n\nvar LeadState =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(LeadState, _React$Component);\n\n  function LeadState(props) {\n    var _this;\n\n    _classCallCheck(this, LeadState);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(LeadState).call(this, props));\n\n    _this.findIndex = function () {\n      var currentState = _this.state.currentState;\n      var i = 0;\n      LEAD_CHOICES.forEach(function (_ref, index) {\n        var value = _ref.value;\n\n        if (value === currentState) {\n          i = index;\n        }\n      });\n      return i;\n    };\n\n    _this.convertToCustomer = function () {\n      _this.props.changeCustomerState('customer');\n    };\n\n    var customer = props.customer;\n    _this.state = {\n      currentState: customer.leadStatus || 'new'\n    };\n    return _this;\n  }\n\n  _createClass(LeadState, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          customer = _this$props.customer,\n          saveState = _this$props.saveState;\n\n      if (customer.state !== 'lead') {\n        return null;\n      }\n\n      return React.createElement(LeadStateWrapper, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      }, LEAD_CHOICES.map(function (_ref2, index) {\n        var value = _ref2.value,\n            label = _ref2.label;\n\n        var onClick = function onClick() {\n          _this2.setState({\n            currentState: value\n          });\n\n          saveState(value);\n        };\n\n        var currentIndex = _this2.findIndex();\n\n        return React.createElement(StateItem, {\n          key: index,\n          past: index < currentIndex,\n          active: index === currentIndex,\n          onClick: onClick,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66\n          },\n          __self: this\n        }, index < currentIndex && React.createElement(Icon, {\n          icon: \"check-1\",\n          size: 16,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 67\n          },\n          __self: this\n        }), label));\n      }), React.createElement(Button, {\n        icon: \"check-circle\",\n        btnStyle: \"danger\",\n        uppercase: false,\n        onClick: this.convertToCustomer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, \"Mark as Complete\"));\n    }\n  }]);\n\n  return LeadState;\n}(React.Component);\n\nexport default LeadState;","map":{"version":3,"sources":["/home/anu-ujin/Works/open-source/erxes/ui/src/modules/customers/components/detail/LeadState.tsx"],"names":["Button","Icon","LEAD_CHOICES","LeadStateWrapper","StateItem","React","LeadState","props","findIndex","currentState","state","i","forEach","index","value","convertToCustomer","changeCustomerState","customer","leadStatus","saveState","map","label","onClick","setState","currentIndex","Component"],"mappings":";;;;;;AAAA,OAAOA,MAAP,MAAmB,uCAAnB;AACA,OAAOC,IAAP,MAAiB,qCAAjB;AACA,SAASC,YAAT,QAA6B,6BAA7B;AACA,SAASC,gBAAT,EAA2BC,SAA3B,QAA4C,0BAA5C;AAEA,OAAOC,KAAP,MAAkB,OAAlB;;IAQMC,S;;;;;AACJ,qBAAYC,KAAZ,EAA2B;AAAA;;AAAA;;AACzB,mFAAMA,KAAN;;AADyB,UAQ3BC,SAR2B,GAQf,YAAM;AAAA,UACRC,YADQ,GACS,MAAKC,KADd,CACRD,YADQ;AAGhB,UAAIE,CAAC,GAAG,CAAR;AAEAT,MAAAA,YAAY,CAACU,OAAb,CAAqB,gBAAYC,KAAZ,EAAsB;AAAA,YAAnBC,KAAmB,QAAnBA,KAAmB;;AACzC,YAAIA,KAAK,KAAKL,YAAd,EAA4B;AAC1BE,UAAAA,CAAC,GAAGE,KAAJ;AACD;AACF,OAJD;AAMA,aAAOF,CAAP;AACD,KApB0B;;AAAA,UAsB3BI,iBAtB2B,GAsBP,YAAM;AACxB,YAAKR,KAAL,CAAWS,mBAAX,CAA+B,UAA/B;AACD,KAxB0B;;AAAA,QAGjBC,QAHiB,GAGJV,KAHI,CAGjBU,QAHiB;AAKzB,UAAKP,KAAL,GAAa;AAAED,MAAAA,YAAY,EAAEQ,QAAQ,CAACC,UAAT,IAAuB;AAAvC,KAAb;AALyB;AAM1B;;;;6BAoBQ;AAAA;;AAAA,wBACyB,KAAKX,KAD9B;AAAA,UACCU,QADD,eACCA,QADD;AAAA,UACWE,SADX,eACWA,SADX;;AAGP,UAAIF,QAAQ,CAACP,KAAT,KAAmB,MAAvB,EAA+B;AAC7B,eAAO,IAAP;AACD;;AAED,aACE,oBAAC,gBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGR,YAAY,CAACkB,GAAb,CAAiB,iBAAmBP,KAAnB,EAA6B;AAAA,YAA1BC,KAA0B,SAA1BA,KAA0B;AAAA,YAAnBO,KAAmB,SAAnBA,KAAmB;;AAC7C,YAAMC,OAAO,GAAG,SAAVA,OAAU,GAAM;AACpB,UAAA,MAAI,CAACC,QAAL,CAAc;AAAEd,YAAAA,YAAY,EAAEK;AAAhB,WAAd;;AAEAK,UAAAA,SAAS,CAACL,KAAD,CAAT;AACD,SAJD;;AAMA,YAAMU,YAAY,GAAG,MAAI,CAAChB,SAAL,EAArB;;AAEA,eACE,oBAAC,SAAD;AACE,UAAA,GAAG,EAAEK,KADP;AAEE,UAAA,IAAI,EAAEA,KAAK,GAAGW,YAFhB;AAGE,UAAA,MAAM,EAAEX,KAAK,KAAKW,YAHpB;AAIE,UAAA,OAAO,EAAEF,OAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACGT,KAAK,GAAGW,YAAR,IAAwB,oBAAC,IAAD;AAAM,UAAA,IAAI,EAAC,SAAX;AAAqB,UAAA,IAAI,EAAE,EAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAD3B,EAEGH,KAFH,CANF,CADF;AAaD,OAtBA,CADH,EAwBE,oBAAC,MAAD;AACE,QAAA,IAAI,EAAC,cADP;AAEE,QAAA,QAAQ,EAAC,QAFX;AAGE,QAAA,SAAS,EAAE,KAHb;AAIE,QAAA,OAAO,EAAE,KAAKN,iBAJhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAxBF,CADF;AAmCD;;;;EArEqBV,KAAK,CAACoB,S;;AAwE9B,eAAenB,SAAf","sourcesContent":["import Button from 'erxes-common-ui/lib/components/button';\nimport Icon from 'erxes-common-ui/lib/components/icon';\nimport { LEAD_CHOICES } from 'modules/customers/constants';\nimport { LeadStateWrapper, StateItem } from 'modules/customers/styles';\nimport { ICustomer } from 'modules/customers/types';\nimport React from 'react';\n\ntype IProps = {\n  customer: ICustomer;\n  saveState: (state: string) => void;\n  changeCustomerState: (value: string) => void;\n};\n\nclass LeadState extends React.Component<IProps, { currentState: string }> {\n  constructor(props: IProps) {\n    super(props);\n\n    const { customer } = props;\n\n    this.state = { currentState: customer.leadStatus || 'new' };\n  }\n\n  findIndex = () => {\n    const { currentState } = this.state;\n\n    let i = 0;\n\n    LEAD_CHOICES.forEach(({ value }, index) => {\n      if (value === currentState) {\n        i = index;\n      }\n    });\n\n    return i;\n  };\n\n  convertToCustomer = () => {\n    this.props.changeCustomerState('customer');\n  };\n\n  render() {\n    const { customer, saveState } = this.props;\n\n    if (customer.state !== 'lead') {\n      return null;\n    }\n\n    return (\n      <LeadStateWrapper>\n        {LEAD_CHOICES.map(({ value, label }, index) => {\n          const onClick = () => {\n            this.setState({ currentState: value });\n\n            saveState(value);\n          };\n\n          const currentIndex = this.findIndex();\n\n          return (\n            <StateItem\n              key={index}\n              past={index < currentIndex}\n              active={index === currentIndex}\n              onClick={onClick}\n            >\n              <div>\n                {index < currentIndex && <Icon icon=\"check-1\" size={16} />}\n                {label}\n              </div>\n            </StateItem>\n          );\n        })}\n        <Button\n          icon=\"check-circle\"\n          btnStyle=\"danger\"\n          uppercase={false}\n          onClick={this.convertToCustomer}\n        >\n          Mark as Complete\n        </Button>\n      </LeadStateWrapper>\n    );\n  }\n}\n\nexport default LeadState;\n"]},"metadata":{},"sourceType":"module"}