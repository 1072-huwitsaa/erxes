{"ast":null,"code":"import _classCallCheck from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/anu-ujin/Works/open-source/erxes/ui/src/modules/common/components/SortableList.tsx\";\nimport Icon from 'erxes-common-ui/lib/components/icon';\nimport React from 'react';\nimport { DragDropContext, Draggable, Droppable } from 'react-beautiful-dnd';\nimport { DragHandler, SortableWrapper, SortItem } from '../styles/sort';\nimport { reorder } from '../utils';\nimport EmptyState from './EmptyState';\n\nvar SortableList =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(SortableList, _React$Component);\n\n  function SortableList() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, SortableList);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(SortableList)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.onDragEnd = function (result) {\n      var destination = result.destination,\n          source = result.source; // dropped outside the list\n\n      if (!destination) {\n        return;\n      }\n\n      if (destination.index === source.index) {\n        return;\n      }\n\n      var _this$props = _this.props,\n          fields = _this$props.fields,\n          onChangeFields = _this$props.onChangeFields;\n      var reorderedFields = reorder(fields, source.index, destination.index);\n      onChangeFields(reorderedFields, destination.index);\n    };\n\n    return _this;\n  }\n\n  _createClass(SortableList, [{\n    key: \"renderDragHandler\",\n    value: function renderDragHandler() {\n      var _this$props$showDragH = this.props.showDragHandler,\n          showDragHandler = _this$props$showDragH === void 0 ? true : _this$props$showDragH;\n\n      if (!showDragHandler) {\n        return null;\n      }\n\n      return React.createElement(DragHandler, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        icon: \"ellipsis-v\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50\n        },\n        __self: this\n      }));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props2 = this.props,\n          fields = _this$props2.fields,\n          child = _this$props2.child,\n          isDragDisabled = _this$props2.isDragDisabled,\n          _this$props2$droppabl = _this$props2.droppableId,\n          droppableId = _this$props2$droppabl === void 0 ? '' : _this$props2$droppabl;\n\n      if (fields.length === 0) {\n        return React.createElement(EmptyState, {\n          text: \"There is no fields\",\n          icon: \"ban\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 59\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(DragDropContext, {\n        onDragEnd: this.onDragEnd,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, React.createElement(Droppable, {\n        droppableId: droppableId.toString(),\n        type: \"ITEMS\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, function (provided) {\n        return React.createElement(SortableWrapper, Object.assign({}, provided.droppableProps, {\n          innerRef: provided.innerRef,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66\n          },\n          __self: this\n        }), fields.map(function (field, index) {\n          return React.createElement(Draggable, {\n            key: field._id || index,\n            draggableId: field._id.toString() || index || Math.random(),\n            index: index,\n            isDragDisabled: isDragDisabled,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 71\n            },\n            __self: this\n          }, function (dragProvided, snapshot) {\n            return React.createElement(SortItem, Object.assign({\n              innerRef: dragProvided.innerRef\n            }, dragProvided.draggableProps, dragProvided.dragHandleProps, {\n              isDragging: snapshot.isDragging,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 78\n              },\n              __self: this\n            }), _this2.renderDragHandler(), child(field));\n          });\n        }), provided.placeholder);\n      }));\n    }\n  }]);\n\n  return SortableList;\n}(React.Component);\n\nSortableList.defaultProps = {\n  droppableId: 'droppableId'\n};\nexport default SortableList;","map":{"version":3,"sources":["/home/anu-ujin/Works/open-source/erxes/ui/src/modules/common/components/SortableList.tsx"],"names":["Icon","React","DragDropContext","Draggable","Droppable","DragHandler","SortableWrapper","SortItem","reorder","EmptyState","SortableList","onDragEnd","result","destination","source","index","props","fields","onChangeFields","reorderedFields","showDragHandler","child","isDragDisabled","droppableId","length","toString","provided","droppableProps","innerRef","map","field","_id","Math","random","dragProvided","snapshot","draggableProps","dragHandleProps","isDragging","renderDragHandler","placeholder","Component","defaultProps"],"mappings":"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","sourcesContent":["import Icon from 'erxes-common-ui/lib/components/icon';\nimport React from 'react';\nimport { DragDropContext, Draggable, Droppable } from 'react-beautiful-dnd';\nimport { DragHandler, SortableWrapper, SortItem } from '../styles/sort';\nimport { reorder } from '../utils';\nimport EmptyState from './EmptyState';\n\ntype Props = {\n  fields: any[];\n  child: (field: any) => void;\n  onChangeFields: (reorderedFields: any, destinationIndex?: number) => void;\n  isModal?: boolean;\n  showDragHandler?: boolean | true;\n  isDragDisabled?: boolean;\n  droppableId?: string;\n};\n\nclass SortableList extends React.Component<Props> {\n  static defaultProps = {\n    droppableId: 'droppableId'\n  };\n\n  onDragEnd = result => {\n    const { destination, source } = result;\n\n    // dropped outside the list\n    if (!destination) {\n      return;\n    }\n\n    if (destination.index === source.index) {\n      return;\n    }\n\n    const { fields, onChangeFields } = this.props;\n    const reorderedFields = reorder(fields, source.index, destination.index);\n\n    onChangeFields(reorderedFields, destination.index);\n  };\n\n  renderDragHandler() {\n    const { showDragHandler = true } = this.props;\n\n    if (!showDragHandler) {\n      return null;\n    }\n\n    return (\n      <DragHandler>\n        <Icon icon=\"ellipsis-v\" />\n      </DragHandler>\n    );\n  }\n\n  render() {\n    const { fields, child, isDragDisabled, droppableId = '' } = this.props;\n\n    if (fields.length === 0) {\n      return <EmptyState text=\"There is no fields\" icon=\"ban\" />;\n    }\n\n    return (\n      <DragDropContext onDragEnd={this.onDragEnd}>\n        <Droppable droppableId={droppableId.toString()} type=\"ITEMS\">\n          {provided => (\n            <SortableWrapper\n              {...provided.droppableProps}\n              innerRef={provided.innerRef}\n            >\n              {fields.map((field, index) => (\n                <Draggable\n                  key={field._id || index}\n                  draggableId={field._id.toString() || index || Math.random()}\n                  index={index}\n                  isDragDisabled={isDragDisabled}\n                >\n                  {(dragProvided, snapshot) => (\n                    <SortItem\n                      innerRef={dragProvided.innerRef}\n                      {...dragProvided.draggableProps}\n                      {...dragProvided.dragHandleProps}\n                      isDragging={snapshot.isDragging}\n                    >\n                      {this.renderDragHandler()}\n                      {child(field)}\n                    </SortItem>\n                  )}\n                </Draggable>\n              ))}\n              {provided.placeholder}\n            </SortableWrapper>\n          )}\n        </Droppable>\n      </DragDropContext>\n    );\n  }\n}\n\nexport default SortableList;\n"]},"metadata":{},"sourceType":"module"}