{"ast":null,"code":"/**\n * _s.prune: a more elegant version of truncate\n * prune extra chars, never leaving a half-chopped word.\n * @author github.com/rwz\n */\nvar makeString = require('./helper/makeString');\n\nvar rtrim = require('./rtrim');\n\nmodule.exports = function prune(str, length, pruneStr) {\n  str = makeString(str);\n  length = ~~length;\n  pruneStr = pruneStr != null ? String(pruneStr) : '...';\n  if (str.length <= length) return str;\n\n  var tmpl = function tmpl(c) {\n    return c.toUpperCase() !== c.toLowerCase() ? 'A' : ' ';\n  },\n      template = str.slice(0, length + 1).replace(/.(?=\\W*\\w*$)/g, tmpl); // 'Hello, world' -> 'HellAA AAAAA'\n\n\n  if (template.slice(template.length - 2).match(/\\w\\w/)) template = template.replace(/\\s*\\S+$/, '');else template = rtrim(template.slice(0, template.length - 1));\n  return (template + pruneStr).length > str.length ? str : str.slice(0, template.length) + pruneStr;\n};","map":null,"metadata":{},"sourceType":"script"}