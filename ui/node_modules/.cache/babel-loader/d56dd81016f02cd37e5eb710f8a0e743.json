{"ast":null,"code":"import _classCallCheck from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/anu-ujin/Works/open-source/erxes/ui/src/modules/settings/scripts/components/InstallCode.tsx\";\nimport { getEnv } from 'apolloClient';\nimport Button from 'erxes-common-ui/lib/components/button';\nimport EmptyState from 'modules/common/components/EmptyState';\nimport { ModalFooter } from 'modules/common/styles/main';\nimport { MarkdownWrapper } from 'modules/settings/styles';\nimport React from 'react';\nimport CopyToClipboard from 'react-copy-to-clipboard';\nimport ReactMarkdown from 'react-markdown';\n\nvar getInstallCode = function getInstallCode(id) {\n  var _getEnv = getEnv(),\n      REACT_APP_CDN_HOST = _getEnv.REACT_APP_CDN_HOST,\n      REACT_APP_API_URL = _getEnv.REACT_APP_API_URL;\n\n  return \"\\n    <script>\\n      (function() {\\n        var script = document.createElement('script');\\n        script.src = \\\"\".concat(REACT_APP_CDN_HOST, \"/build/manager.bundle.js?id=\").concat(id, \"&apiUrl=\").concat(REACT_APP_API_URL, \"\\\";\\n        script.async = true;\\n        var entry = document.getElementsByTagName('script')[0];\\n        entry.parentNode.insertBefore(script, entry);\\n      })();\\n    </script>\\n  \");\n};\n\nvar InstallCode =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(InstallCode, _React$Component);\n\n  function InstallCode(props) {\n    var _this;\n\n    _classCallCheck(this, InstallCode);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(InstallCode).call(this, props));\n\n    _this.onCopy = function () {\n      _this.setState({\n        copied: true\n      });\n    };\n\n    var script = props.script;\n    var code = ''; // showed install code automatically in edit mode\n\n    if (script) {\n      code = getInstallCode(script._id);\n    }\n\n    _this.state = {\n      code: code,\n      copied: false\n    };\n    return _this;\n  }\n\n  _createClass(InstallCode, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, React.createElement(MarkdownWrapper, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, React.createElement(ReactMarkdown, {\n        source: this.state.code,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }), this.state.code ? React.createElement(CopyToClipboard, {\n        text: this.state.code,\n        onCopy: this.onCopy,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, React.createElement(Button, {\n        size: \"small\",\n        btnStyle: \"primary\",\n        icon: \"copy-1\",\n        uppercase: false,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, this.state.copied ? 'Copied' : 'Copy to clipboard')) : React.createElement(EmptyState, {\n        icon: \"copy\",\n        text: \"No copyable code\",\n        size: \"small\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      })), React.createElement(ModalFooter, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(Button, {\n        btnStyle: \"simple\",\n        icon: \"times-circle\",\n        uppercase: false,\n        onClick: this.props.closeModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, \"Close\")));\n    }\n  }]);\n\n  return InstallCode;\n}(React.Component);\n\nexport default InstallCode;","map":{"version":3,"sources":["/home/anu-ujin/Works/open-source/erxes/ui/src/modules/settings/scripts/components/InstallCode.tsx"],"names":["getEnv","Button","EmptyState","ModalFooter","MarkdownWrapper","React","CopyToClipboard","ReactMarkdown","getInstallCode","id","REACT_APP_CDN_HOST","REACT_APP_API_URL","InstallCode","props","onCopy","setState","copied","script","code","_id","state","closeModal","Component"],"mappings":";;;;;;AAAA,SAASA,MAAT,QAAuB,cAAvB;AACA,OAAOC,MAAP,MAAmB,uCAAnB;AACA,OAAOC,UAAP,MAAuB,sCAAvB;AACA,SAASC,WAAT,QAA4B,4BAA5B;AACA,SAASC,eAAT,QAAgC,yBAAhC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,eAAP,MAA4B,yBAA5B;AACA,OAAOC,aAAP,MAA0B,gBAA1B;;AAaA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAACC,EAAD,EAAgB;AAAA,gBACaT,MAAM,EADnB;AAAA,MAC7BU,kBAD6B,WAC7BA,kBAD6B;AAAA,MACTC,iBADS,WACTA,iBADS;;AAGrC,uIAIsBD,kBAJtB,yCAIuED,EAJvE,qBAIoFE,iBAJpF;AAWD,CAdD;;IAgBMC,W;;;;;AACJ,uBAAYC,KAAZ,EAA0B;AAAA;;AAAA;;AACxB,qFAAMA,KAAN;;AADwB,UAkB1BC,MAlB0B,GAkBjB,YAAM;AACb,YAAKC,QAAL,CAAc;AAAEC,QAAAA,MAAM,EAAE;AAAV,OAAd;AACD,KApByB;;AAAA,QAGhBC,MAHgB,GAGLJ,KAHK,CAGhBI,MAHgB;AAKxB,QAAIC,IAAI,GAAG,EAAX,CALwB,CAOxB;;AACA,QAAID,MAAJ,EAAY;AACVC,MAAAA,IAAI,GAAGV,cAAc,CAACS,MAAM,CAACE,GAAR,CAArB;AACD;;AAED,UAAKC,KAAL,GAAa;AACXF,MAAAA,IAAI,EAAJA,IADW;AAEXF,MAAAA,MAAM,EAAE;AAFG,KAAb;AAZwB;AAgBzB;;;;6BAMQ;AACP,aACE,oBAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,eAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,aAAD;AAAe,QAAA,MAAM,EAAE,KAAKI,KAAL,CAAWF,IAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAEG,KAAKE,KAAL,CAAWF,IAAX,GACC,oBAAC,eAAD;AAAiB,QAAA,IAAI,EAAE,KAAKE,KAAL,CAAWF,IAAlC;AAAwC,QAAA,MAAM,EAAE,KAAKJ,MAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,MAAD;AACE,QAAA,IAAI,EAAC,OADP;AAEE,QAAA,QAAQ,EAAC,SAFX;AAGE,QAAA,IAAI,EAAC,QAHP;AAIE,QAAA,SAAS,EAAE,KAJb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAMG,KAAKM,KAAL,CAAWJ,MAAX,GAAoB,QAApB,GAA+B,mBANlC,CADF,CADD,GAYC,oBAAC,UAAD;AAAY,QAAA,IAAI,EAAC,MAAjB;AAAwB,QAAA,IAAI,EAAC,kBAA7B;AAAgD,QAAA,IAAI,EAAC,OAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAdJ,CADF,EAmBE,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,MAAD;AACE,QAAA,QAAQ,EAAC,QADX;AAEE,QAAA,IAAI,EAAC,cAFP;AAGE,QAAA,SAAS,EAAE,KAHb;AAIE,QAAA,OAAO,EAAE,KAAKH,KAAL,CAAWQ,UAJtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,CAnBF,CADF;AAgCD;;;;EAxDuBhB,KAAK,CAACiB,S;;AA2DhC,eAAeV,WAAf","sourcesContent":["import { getEnv } from 'apolloClient';\nimport Button from 'erxes-common-ui/lib/components/button';\nimport EmptyState from 'modules/common/components/EmptyState';\nimport { ModalFooter } from 'modules/common/styles/main';\nimport { MarkdownWrapper } from 'modules/settings/styles';\nimport React from 'react';\nimport CopyToClipboard from 'react-copy-to-clipboard';\nimport ReactMarkdown from 'react-markdown';\nimport { IScript } from '../types';\n\ntype Props = {\n  script: IScript;\n  closeModal: () => void;\n};\n\ntype State = {\n  code: string;\n  copied: boolean;\n};\n\nconst getInstallCode = (id: string) => {\n  const { REACT_APP_CDN_HOST, REACT_APP_API_URL } = getEnv();\n\n  return `\n    <script>\n      (function() {\n        var script = document.createElement('script');\n        script.src = \"${REACT_APP_CDN_HOST}/build/manager.bundle.js?id=${id}&apiUrl=${REACT_APP_API_URL}\";\n        script.async = true;\n        var entry = document.getElementsByTagName('script')[0];\n        entry.parentNode.insertBefore(script, entry);\n      })();\n    </script>\n  `;\n};\n\nclass InstallCode extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    const { script } = props;\n\n    let code = '';\n\n    // showed install code automatically in edit mode\n    if (script) {\n      code = getInstallCode(script._id);\n    }\n\n    this.state = {\n      code,\n      copied: false\n    };\n  }\n\n  onCopy = () => {\n    this.setState({ copied: true });\n  };\n\n  render() {\n    return (\n      <React.Fragment>\n        <MarkdownWrapper>\n          <ReactMarkdown source={this.state.code} />\n          {this.state.code ? (\n            <CopyToClipboard text={this.state.code} onCopy={this.onCopy}>\n              <Button\n                size=\"small\"\n                btnStyle=\"primary\"\n                icon=\"copy-1\"\n                uppercase={false}\n              >\n                {this.state.copied ? 'Copied' : 'Copy to clipboard'}\n              </Button>\n            </CopyToClipboard>\n          ) : (\n            <EmptyState icon=\"copy\" text=\"No copyable code\" size=\"small\" />\n          )}\n        </MarkdownWrapper>\n\n        <ModalFooter>\n          <Button\n            btnStyle=\"simple\"\n            icon=\"times-circle\"\n            uppercase={false}\n            onClick={this.props.closeModal}\n          >\n            Close\n          </Button>\n        </ModalFooter>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default InstallCode;\n"]},"metadata":{},"sourceType":"module"}