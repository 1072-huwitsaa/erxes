{"ast":null,"code":"import _classCallCheck from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/anu-ujin/Works/open-source/erxes/ui/src/modules/engage/components/MessengerPreview.tsx\";\nimport NameCard from 'modules/common/components/nameCard/NameCard';\nimport React from 'react';\nimport strip from 'strip';\nimport xss from 'xss';\nimport { LauncherContainer, PreviewContent, WebPreview, WidgetPreview } from '../styles';\n\nvar MessengerPreview =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(MessengerPreview, _React$Component);\n\n  function MessengerPreview(props) {\n    var _this;\n\n    _classCallCheck(this, MessengerPreview);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MessengerPreview).call(this, props));\n\n    _this.renderNotificationBody = function () {\n      var _this$props = _this.props,\n          content = _this$props.content,\n          sentAs = _this$props.sentAs,\n          user = _this$props.user;\n      var type = sentAs ? sentAs : 'default';\n      var classNames = \"engage-message type-\".concat(type);\n      var isFullmessage = sentAs === 'fullMessage';\n\n      if (sentAs === 'badge') {\n        return null;\n      }\n\n      return React.createElement(WidgetPreview, {\n        className: classNames,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41\n        },\n        __self: this\n      }, user ? React.createElement(NameCard, {\n        user: user,\n        singleLine: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42\n        },\n        __self: this\n      }) : null, React.createElement(PreviewContent, {\n        isFullmessage: isFullmessage,\n        dangerouslySetInnerHTML: {\n          __html: isFullmessage ? xss(content || '') : xss(strip(content))\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43\n        },\n        __self: this\n      }));\n    };\n\n    _this.state = {\n      fromUser: ''\n    };\n    return _this;\n  }\n\n  _createClass(MessengerPreview, [{\n    key: \"render\",\n    value: function render() {\n      var sentAs = this.props.sentAs;\n      return React.createElement(WebPreview, {\n        className: \"type-\".concat(sentAs),\n        isEngage: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, this.renderNotificationBody(), React.createElement(LauncherContainer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, \"1\")));\n    }\n  }]);\n\n  return MessengerPreview;\n}(React.Component);\n\nexport default MessengerPreview;","map":{"version":3,"sources":["/home/anu-ujin/Works/open-source/erxes/ui/src/modules/engage/components/MessengerPreview.tsx"],"names":["NameCard","React","strip","xss","LauncherContainer","PreviewContent","WebPreview","WidgetPreview","MessengerPreview","props","renderNotificationBody","content","sentAs","user","type","classNames","isFullmessage","__html","state","fromUser","Component"],"mappings":";;;;;;AACA,OAAOA,QAAP,MAAqB,6CAArB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,GAAP,MAAgB,KAAhB;AACA,SACEC,iBADF,EAEEC,cAFF,EAGEC,UAHF,EAIEC,aAJF,QAKO,WALP;;IAiBMC,gB;;;;;AACJ,4BAAYC,KAAZ,EAA0B;AAAA;;AAAA;;AACxB,0FAAMA,KAAN;;AADwB,UAK1BC,sBAL0B,GAKD,YAAM;AAAA,wBACK,MAAKD,KADV;AAAA,UACrBE,OADqB,eACrBA,OADqB;AAAA,UACZC,MADY,eACZA,MADY;AAAA,UACJC,IADI,eACJA,IADI;AAG7B,UAAMC,IAAI,GAAGF,MAAM,GAAGA,MAAH,GAAY,SAA/B;AACA,UAAMG,UAAU,iCAA0BD,IAA1B,CAAhB;AACA,UAAME,aAAa,GAAGJ,MAAM,KAAK,aAAjC;;AAEA,UAAIA,MAAM,KAAK,OAAf,EAAwB;AACtB,eAAO,IAAP;AACD;;AAED,aACE,oBAAC,aAAD;AAAe,QAAA,SAAS,EAAEG,UAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGF,IAAI,GAAG,oBAAC,QAAD;AAAU,QAAA,IAAI,EAAEA,IAAhB;AAAsB,QAAA,UAAU,EAAE,IAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAH,GAAgD,IADvD,EAEE,oBAAC,cAAD;AACE,QAAA,aAAa,EAAEG,aADjB;AAEE,QAAA,uBAAuB,EAAE;AACvBC,UAAAA,MAAM,EAAED,aAAa,GAAGb,GAAG,CAACQ,OAAO,IAAI,EAAZ,CAAN,GAAwBR,GAAG,CAACD,KAAK,CAACS,OAAD,CAAN;AADzB,SAF3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CADF;AAWD,KA3ByB;;AAExB,UAAKO,KAAL,GAAa;AAAEC,MAAAA,QAAQ,EAAE;AAAZ,KAAb;AAFwB;AAGzB;;;;6BA0BQ;AAAA,UACCP,MADD,GACY,KAAKH,KADjB,CACCG,MADD;AAGP,aACE,oBAAC,UAAD;AAAY,QAAA,SAAS,iBAAUA,MAAV,CAArB;AAAyC,QAAA,QAAQ,EAAE,IAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,KAAKF,sBAAL,EADH,EAGE,oBAAC,iBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,CAHF,CADF;AASD;;;;EA1C4BT,KAAK,CAACmB,S;;AA6CrC,eAAeZ,gBAAf","sourcesContent":["import { IUser } from 'modules/auth/types';\nimport NameCard from 'modules/common/components/nameCard/NameCard';\nimport React from 'react';\nimport strip from 'strip';\nimport xss from 'xss';\nimport {\n  LauncherContainer,\n  PreviewContent,\n  WebPreview,\n  WidgetPreview\n} from '../styles';\n\ntype Props = {\n  content?: string;\n  user?: IUser;\n  sentAs?: string;\n};\n\ntype State = {\n  fromUser: string;\n};\n\nclass MessengerPreview extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = { fromUser: '' };\n  }\n\n  renderNotificationBody = () => {\n    const { content, sentAs, user } = this.props;\n\n    const type = sentAs ? sentAs : 'default';\n    const classNames = `engage-message type-${type}`;\n    const isFullmessage = sentAs === 'fullMessage';\n\n    if (sentAs === 'badge') {\n      return null;\n    }\n\n    return (\n      <WidgetPreview className={classNames}>\n        {user ? <NameCard user={user} singleLine={true} /> : null}\n        <PreviewContent\n          isFullmessage={isFullmessage}\n          dangerouslySetInnerHTML={{\n            __html: isFullmessage ? xss(content || '') : xss(strip(content))\n          }}\n        />\n      </WidgetPreview>\n    );\n  };\n\n  render() {\n    const { sentAs } = this.props;\n\n    return (\n      <WebPreview className={`type-${sentAs}`} isEngage={true}>\n        {this.renderNotificationBody()}\n\n        <LauncherContainer>\n          <span>1</span>\n        </LauncherContainer>\n      </WebPreview>\n    );\n  }\n}\n\nexport default MessengerPreview;\n"]},"metadata":{},"sourceType":"module"}