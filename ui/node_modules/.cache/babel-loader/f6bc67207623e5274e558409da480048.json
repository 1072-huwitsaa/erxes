{"ast":null,"code":"import _classCallCheck from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/anu-ujin/Works/open-source/erxes/ui/src/modules/activityLogs/components/items/boardItems/AssigneeLog.tsx\";\nimport dayjs from 'dayjs';\nimport { ActivityDate, FlexBody, FlexCenterContent } from 'modules/activityLogs/styles';\nimport Tip from 'modules/common/components/Tip';\nimport { renderUserFullName } from 'modules/common/utils';\nimport React from 'react';\nimport { Link } from 'react-router-dom';\n\nvar AssigneeLog =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(AssigneeLog, _React$Component);\n\n  function AssigneeLog() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, AssigneeLog);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(AssigneeLog)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.renderContent = function () {\n      var activity = _this.props.activity;\n      var contentDetail = activity.contentDetail,\n          createdByDetail = activity.createdByDetail;\n      var userName = 'Unknown';\n\n      if (createdByDetail && createdByDetail.type === 'user') {\n        var content = createdByDetail.content;\n\n        if (content.details) {\n          userName = renderUserFullName(createdByDetail.content);\n        }\n      }\n\n      var _contentDetail$addedU = contentDetail.addedUsers,\n          addedUsers = _contentDetail$addedU === void 0 ? [] : _contentDetail$addedU,\n          _contentDetail$remove = contentDetail.removedUsers,\n          removedUsers = _contentDetail$remove === void 0 ? [] : _contentDetail$remove;\n      var addedUserNames = addedUsers.map(function (user) {\n        return React.createElement(Link, {\n          to: \"/settings/team/details/\".concat(user._id),\n          target: \"_blank\",\n          key: Math.random(),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 36\n          },\n          __self: this\n        }, \"\\xA0\", user.details.fullName || user.email, \"\\xA0\");\n      });\n      var removedUserNames = removedUsers.map(function (user) {\n        return React.createElement(Link, {\n          to: \"/settings/team/details/\".concat(user._id),\n          target: \"_blank\",\n          key: Math.random(),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 48\n          },\n          __self: this\n        }, \"\\xA0\", user.details.fullName || user.email, \"\\xA0\");\n      });\n\n      if (addedUserNames.length > 0 && removedUserNames.length === 0) {\n        return React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60\n          },\n          __self: this\n        }, userName, \" assigned\", addedUserNames);\n      }\n\n      if (removedUserNames && !addedUserNames) {\n        return React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 69\n          },\n          __self: this\n        }, userName, \" removed assignee of\", removedUserNames);\n      }\n\n      return React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, userName, \" removed assignee of\", removedUserNames);\n    };\n\n    return _this;\n  }\n\n  _createClass(AssigneeLog, [{\n    key: \"render\",\n    value: function render() {\n      var createdAt = this.props.activity.createdAt;\n      return React.createElement(FlexCenterContent, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(FlexBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, this.renderContent()), React.createElement(Tip, {\n        text: dayjs(createdAt).format('llll'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(ActivityDate, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, dayjs(createdAt).format('MMM D, h:mm A'))));\n    }\n  }]);\n\n  return AssigneeLog;\n}(React.Component);\n\nexport default AssigneeLog;","map":{"version":3,"sources":["/home/anu-ujin/Works/open-source/erxes/ui/src/modules/activityLogs/components/items/boardItems/AssigneeLog.tsx"],"names":["dayjs","ActivityDate","FlexBody","FlexCenterContent","Tip","renderUserFullName","React","Link","AssigneeLog","renderContent","activity","props","contentDetail","createdByDetail","userName","type","content","details","addedUsers","removedUsers","addedUserNames","map","user","_id","Math","random","fullName","email","removedUserNames","length","createdAt","format","Component"],"mappings":"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","sourcesContent":["import dayjs from 'dayjs';\nimport {\n  ActivityDate,\n  FlexBody,\n  FlexCenterContent\n} from 'modules/activityLogs/styles';\nimport { IActivityLog } from 'modules/activityLogs/types';\nimport Tip from 'modules/common/components/Tip';\nimport { renderUserFullName } from 'modules/common/utils';\nimport React from 'react';\nimport { Link } from 'react-router-dom';\n\ntype Props = {\n  activity: IActivityLog;\n};\n\nclass AssigneeLog extends React.Component<Props> {\n  renderContent = () => {\n    const { activity } = this.props;\n    const { contentDetail, createdByDetail } = activity;\n\n    let userName = 'Unknown';\n\n    if (createdByDetail && createdByDetail.type === 'user') {\n      const { content } = createdByDetail;\n\n      if (content.details) {\n        userName = renderUserFullName(createdByDetail.content);\n      }\n    }\n\n    const { addedUsers = [], removedUsers = [] } = contentDetail;\n\n    const addedUserNames = addedUsers.map(user => {\n      return (\n        <Link\n          to={`/settings/team/details/${user._id}`}\n          target=\"_blank\"\n          key={Math.random()}\n        >\n          &nbsp;{user.details.fullName || user.email}&nbsp;\n        </Link>\n      );\n    });\n\n    const removedUserNames = removedUsers.map(user => {\n      return (\n        <Link\n          to={`/settings/team/details/${user._id}`}\n          target=\"_blank\"\n          key={Math.random()}\n        >\n          &nbsp;{user.details.fullName || user.email}&nbsp;\n        </Link>\n      );\n    });\n\n    if (addedUserNames.length > 0 && removedUserNames.length === 0) {\n      return (\n        <span>\n          {userName} assigned\n          {addedUserNames}\n        </span>\n      );\n    }\n\n    if (removedUserNames && !addedUserNames) {\n      return (\n        <span>\n          {userName} removed assignee of\n          {removedUserNames}\n        </span>\n      );\n    }\n\n    return (\n      <span>\n        {userName} removed assignee of\n        {removedUserNames}\n      </span>\n    );\n  };\n\n  render() {\n    const { createdAt } = this.props.activity;\n\n    return (\n      <FlexCenterContent>\n        <FlexBody>{this.renderContent()}</FlexBody>\n        <Tip text={dayjs(createdAt).format('llll')}>\n          <ActivityDate>\n            {dayjs(createdAt).format('MMM D, h:mm A')}\n          </ActivityDate>\n        </Tip>\n      </FlexCenterContent>\n    );\n  }\n}\n\nexport default AssigneeLog;\n"]},"metadata":{},"sourceType":"module"}