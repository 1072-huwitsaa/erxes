{"ast":null,"code":"import _classCallCheck from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/anu-ujin/Works/open-source/erxes/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/anu-ujin/Works/open-source/erxes/ui/src/modules/activityLogs/components/items/email/Email.tsx\";\nimport dayjs from 'dayjs';\nimport { ActivityDate, ContentShadow, EmailContent, ExpandButton, FlexBody, FlexCenterContent } from 'modules/activityLogs/styles';\nimport { ControlLabel } from 'modules/common/components/form';\nimport Icon from 'erxes-common-ui/lib/components/icon';\nimport Tip from 'modules/common/components/Tip';\nimport React from 'react';\nimport xss from 'xss';\n\nvar Email =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Email, _React$Component);\n\n  function Email(props) {\n    var _this;\n\n    _classCallCheck(this, Email);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Email).call(this, props));\n\n    _this.onExpand = function () {\n      _this.setState({\n        expand: !_this.state.expand\n      });\n    };\n\n    _this.state = {\n      expand: false\n    };\n    return _this;\n  }\n\n  _createClass(Email, [{\n    key: \"renderContent\",\n    value: function renderContent() {\n      var body = this.props.email.body;\n      var expand = this.state.expand;\n      var longEmail = body.length >= 800;\n      return React.createElement(React.Fragment, null, React.createElement(EmailContent, {\n        longEmail: longEmail,\n        expand: expand,\n        dangerouslySetInnerHTML: {\n          __html: xss(body)\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43\n        },\n        __self: this\n      }), longEmail && React.createElement(React.Fragment, null, !expand && React.createElement(ContentShadow, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50\n        },\n        __self: this\n      }), React.createElement(ExpandButton, {\n        onClick: this.onExpand,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, expand ? 'Collapse' : 'Expand', \"\\xA0\", React.createElement(Icon, {\n        icon: expand ? 'angle-up' : 'angle-down',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }))));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var createdAt = this.props.activity.createdAt;\n      var _this$props$email = this.props.email,\n          subject = _this$props$email.subject,\n          fromEmail = _this$props$email.fromEmail,\n          fromUser = _this$props$email.fromUser;\n      var fromUserName = fromUser.details ? fromUser.details.fullName : 'Unknown';\n      return React.createElement(React.Fragment, null, React.createElement(FlexCenterContent, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, React.createElement(FlexBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, fromUserName, \" sent email\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(ControlLabel, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, \"From\"), \": \", React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, fromEmail)), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, React.createElement(ControlLabel, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, \"Subject\"), \": \", React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, subject))), React.createElement(Tip, {\n        text: dayjs(createdAt).format('llll'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, React.createElement(ActivityDate, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, dayjs(createdAt).format('MMM D, h:mm A')))), this.renderContent());\n    }\n  }]);\n\n  return Email;\n}(React.Component);\n\nexport default Email;","map":{"version":3,"sources":["/home/anu-ujin/Works/open-source/erxes/ui/src/modules/activityLogs/components/items/email/Email.tsx"],"names":["dayjs","ActivityDate","ContentShadow","EmailContent","ExpandButton","FlexBody","FlexCenterContent","ControlLabel","Icon","Tip","React","xss","Email","props","onExpand","setState","expand","state","body","email","longEmail","length","__html","createdAt","activity","subject","fromEmail","fromUser","fromUserName","details","fullName","format","renderContent","Component"],"mappings":"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","sourcesContent":["import dayjs from 'dayjs';\nimport {\n  ActivityDate,\n  ContentShadow,\n  EmailContent,\n  ExpandButton,\n  FlexBody,\n  FlexCenterContent\n} from 'modules/activityLogs/styles';\nimport { ControlLabel } from 'modules/common/components/form';\nimport Icon from 'erxes-common-ui/lib/components/icon';\nimport Tip from 'modules/common/components/Tip';\nimport { IEmailDelivery } from 'modules/engage/types';\nimport React from 'react';\nimport xss from 'xss';\n\ntype Props = {\n  email: IEmailDelivery;\n  emailType: string;\n  activity: any;\n};\n\nclass Email extends React.Component<Props, { expand: boolean }> {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      expand: false\n    };\n  }\n\n  onExpand = () => {\n    this.setState({ expand: !this.state.expand });\n  };\n\n  renderContent() {\n    const { body } = this.props.email;\n    const { expand } = this.state;\n    const longEmail = body.length >= 800;\n\n    return (\n      <>\n        <EmailContent\n          longEmail={longEmail}\n          expand={expand}\n          dangerouslySetInnerHTML={{ __html: xss(body) }}\n        />\n        {longEmail && (\n          <>\n            {!expand && <ContentShadow />}\n            <ExpandButton onClick={this.onExpand}>\n              {expand ? 'Collapse' : 'Expand'}&nbsp;\n              <Icon icon={expand ? 'angle-up' : 'angle-down'} />\n            </ExpandButton>\n          </>\n        )}\n      </>\n    );\n  }\n\n  render() {\n    const { createdAt } = this.props.activity;\n    const { subject, fromEmail, fromUser } = this.props.email;\n\n    const fromUserName = fromUser.details\n      ? fromUser.details.fullName\n      : 'Unknown';\n\n    return (\n      <>\n        <FlexCenterContent>\n          <FlexBody>\n            <strong>{fromUserName} sent email</strong>\n            <div>\n              <ControlLabel>From</ControlLabel>: <span>{fromEmail}</span>\n            </div>\n            <div>\n              <ControlLabel>Subject</ControlLabel>: <span>{subject}</span>\n            </div>\n          </FlexBody>\n\n          <Tip text={dayjs(createdAt).format('llll')}>\n            <ActivityDate>\n              {dayjs(createdAt).format('MMM D, h:mm A')}\n            </ActivityDate>\n          </Tip>\n        </FlexCenterContent>\n        {this.renderContent()}\n      </>\n    );\n  }\n}\n\nexport default Email;\n"]},"metadata":{},"sourceType":"module"}