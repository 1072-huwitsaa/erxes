import t from"react-onclickoutside";import e from"date-fns/add_days";import n from"date-fns/start_of_week";import a from"date-fns/end_of_month";import s from"date-fns/is_same_day";import o from"date-fns/is_before";import r from"date-fns/sub_months";import i from"date-fns/get_date";import d from"date-fns/is_same_month";import u from"date-fns/set_month";import l from"date-fns/get_days_in_month";import p from"date-fns/set_date";import m from"date-fns/get_year";import c from"date-fns/set_year";import f from"date-fns/get_days_in_year";import h from"date-fns/set_day_of_year";import{createElement as v,Component as w,Fragment as y}from"react";import D from"date-fns/get_hours";import C from"date-fns/add_hours";import b from"date-fns/add_minutes";import _ from"date-fns/add_seconds";import g from"date-fns/add_milliseconds";import k from"date-fns/set_hours";import N from"date-fns/start_of_month";import O from"date-fns/is_date";import S from"date-fns/is_valid";import V from"date-fns/parse";import M from"date-fns/add_months";import T from"date-fns/add_years";import P from"date-fns/format";import Y from"date-fns/is_equal";import F from"classcat";import{Manager as x,Reference as I,Popper as A}from"react-popper";var E=function(){return!0};function j(t,e,n,a){return v("td",Object.assign({},t),P(e,"D",a))}function B(t,e,n,a,s){var o=u(new Date,e);return v("td",Object.assign({},t),P(o,"MMM",s))}function L(t,e){return v("td",Object.assign({},t),e)}var K,U,H,z=function(t){return t.preventDefault(),!1},q=["hours","minutes","seconds","milliseconds"],R={hours:{min:0,max:23,step:1},minutes:{min:0,max:59,step:1},seconds:{min:0,max:59,step:1},milliseconds:{min:0,max:999,step:1}},W=function(t){var e=t.onUp,n=t.onDown,a=t.value;return null!=a?v(y,null,t.showPrefix&&v("div",{className:"rdtCounterSeparator"},":"),v("div",{className:"rdtCounter"},v("span",{className:"rdtBtn",onMouseDown:e,onContextMenu:z},"▲"),v("div",{className:"rdtCount"},a),v("span",{className:"rdtBtn",onMouseDown:n,onContextMenu:z},"▼"))):null};function G(t,e,n,a){var s="sub"===t?-1:1,o=function(t,e){var n=R[t].step,a=e?e[t]:void 0;return a&&a.step&&(n=a.step),n}(e,a)*s;return"hours"===e?C(n,o):"minutes"===e?b(n,o):"seconds"===e?_(n,o):g(n,o)}function J(t,e,n,a){var s="string"==typeof n?n:"";function o(t,e){return-1!==t.indexOf(e)}var r=o(s.toLowerCase(),"h"),i=o(s,"m"),d=o(s,"s"),u=o(s,"S"),l=o(s,"A"),p=o(s,"a"),m="hours"===t&&r?l||p?"h":"H":"minutes"===t&&i?"mm":"seconds"===t&&d?"ss":"milliseconds"===t&&u?"SSS":"daypart"===t&&p?"a":"daypart"===t&&l?"A":void 0;if(m)return P(e,m,a)}function Q(t,e){return function(){var n=D(t);e(k(t,n>=12?n-12:n+12))}}function X(t,e,n){return function(){var a=n.timeConstraints,s=n.setViewTimestamp,o=n.setTime;if(!n.readonly){var r=G(t,e,n.viewTimestamp,a);s(r),K=setTimeout(function(){U=setInterval(function(){r=G(t,e,r,a),s(r)},70)},500),H=function(){clearTimeout(K),clearInterval(U),o(r),document.body.removeEventListener("mouseup",H),document.body.removeEventListener("touchend",H)},document.body.addEventListener("mouseup",H),document.body.addEventListener("touchend",H)}}}var Z=function(){},$={days:function(t){var d=t.viewDate;void 0===d&&(d=new Date);var u=t.selectedDate,l=t.setDate,p=t.timeFormat,m=t.formatOptions,c=t.shift,f=t.show,h=u||d,w=t.renderDay||j,y=t.isValidDate||E,D=n(d),C=r(d,1),b=n(a(C));return v("div",{className:"rdtDays"},v("table",null,v("thead",null,v("tr",null,v("th",{className:"rdtPrev",onClick:c&&c("sub",1,"months")},v("span",null,"‹")),v("th",{className:"rdtSwitch",onClick:f&&f("months"),colSpan:5},P(d,"MMMM YYYY",m)),v("th",{className:"rdtNext",onClick:c&&c("add",1,"months")},v("span",null,"›"))),v("tr",null,[0,1,2,3,4,5,6].map(function(t){return v("th",{key:t,className:"dow"},P(e(D,t),"dd",m))}))),v("tbody",null,[0,1,2,3,4,5].map(function(t){var n=7*t;return v("tr",{key:P(e(b,n))},[0,1,2,3,4,5,6].map(function(t){var r=e(b,t+n),p=!y(r,u),c={key:i(r),className:F(["rdtDay",{rdtOld:o(r,N(d)),rdtNew:o(a(d),r),rdtActive:u&&s(r,u),rdtToday:s(r,new Date),rdtDisabled:p}])};return!p&&l&&(c.onClick=l("days",r,!0)),w(c,r,u,m)}))})),"string"==typeof p&&p.trim()&&h?v("tfoot",null,v("tr",null,v("td",{onClick:f&&f("time"),colSpan:7,className:"rdtTimeToggle"},P(h,p,m)))):null))},months:function(t){var e=t.selectedDate,n=t.viewDate;void 0===n&&(n=new Date);var a=t.renderMonth,s=t.isValidDate,o=t.shift,r=t.show,i=t.setDate,c=t.formatOptions,f=m(n),h=a||B,w=s||E;return v("div",{className:"rdtMonths"},v("table",null,v("thead",null,v("tr",null,v("th",{className:"rdtPrev",onClick:o&&o("sub",1,"years")},v("span",null,"‹")),v("th",{className:"rdtSwitch",onClick:r&&r("years"),colSpan:2},P(n,"YYYY",c)),v("th",{className:"rdtNext",onClick:o&&o("add",1,"years")},v("span",null,"›"))))),v("table",null,v("tbody",null,[0,1,2].map(function(t){var a=4*t;return v("tr",{key:a},[0,1,2,3].map(function(t){var s=t+a,o=u(n,s),r=Array.from({length:l(o)},function(t,e){return p(o,e+1)}).every(function(t){return!w(t)}),m={key:s,className:F(["rdtMonth",{rdtDisabled:r,rdtActive:e&&d(e,o)}])};return!r&&i&&(m.onClick=i("months",u(n,s))),h(m,s,f,e,c)}))}))))},years:function(t){var e=t.selectedDate,n=t.viewDate;void 0===n&&(n=new Date);var a=t.shift,s=t.show,o=t.setDate,r=t.renderYear||L,i=t.isValidDate||E,d=10*Math.floor(m(n)/10);return v("div",{className:"rdtYears"},v("table",null,v("thead",null,v("tr",null,v("th",{className:"rdtPrev",onClick:a&&a("sub",10,"years")},v("span",null,"‹")),v("th",{className:"rdtSwitch",onClick:s&&s("years"),colSpan:2},d,"-",d+9),v("th",{className:"rdtNext",onClick:a&&a("add",10,"years")},v("span",null,"›"))))),v("table",null,v("tbody",null,[0,1,2].map(function(t){var a=d-1+4*t;return v("tr",{key:a},[0,1,2,3].map(function(t){var s=t+a,d=c(n,s),u=Array.from({length:f(n)},function(t,e){return h(d,e+1)}).every(function(t){return!i(t)}),l={key:s,className:F(["rdtYear",{rdtDisabled:u,rdtActive:e&&m(e)===s}])};return!u&&o&&(l.onClick=o("years",c(n,s))),r(l,s,e)}))}))))},time:function(t){var e=t.viewTimestamp;void 0===e&&(e=new Date);var n=t.dateFormat,a=t.show,s=t.timeFormat,o=t.formatOptions,r=t.setTime,i=0;return v("div",{className:"rdtTime"},v("table",null,n?v("thead",null,v("tr",null,v("th",{className:"rdtSwitch",colSpan:4,onClick:a&&a("days")},P(e,n)))):null,v("tbody",null,v("tr",null,v("td",null,v("div",{className:"rdtCounters"},q.map(function(n){var a=J(n,e,s,o);return a&&i++,v(W,{key:n,showPrefix:i>1,onUp:X("add",n,t),onDown:X("sub",n,t),value:a})}),v(W,{onUp:Q(e,r),onDown:Q(e,r),value:J("daypart",e,s,o)})))))))}},tt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.handleClickOutside=function(){this.props.onClickOutside()},e.prototype.render=function(){var t=this.props;return v($[t.view],Object.assign({},t.viewProps))},e}(w);tt.defaultProps={view:"days",onClickOutside:Z,viewProps:{}};var et=t(tt),nt=function(t){return new Date(t.getTime()+6e4*t.getTimezoneOffset())},at=function(t){return new Date(t.getTime()-6e4*t.getTimezoneOffset())},st=et,ot={fromProps:["value","isValidDate","renderDay","renderMonth","renderYear","timeConstraints"],fromState:["viewDate","selectedDate","viewTimestamp"],fromThis:["setDate","setTime","setViewTimestamp","show","shift"]},rt={days:"days",months:"days",years:"months"},it={days:{sel:"-MM-DD",rest:""},months:{sel:"-MM",rest:"-DD"},years:{sel:"",rest:"-MM-DD"}};function dt(t){if(t){var e=V(t);if(O(e)&&S(e))return e}}function ut(t){var e=pt(t),n=dt(t.value)||dt(t.defaultValue),a=N(n||dt(t.viewDate)||new Date),s=lt(e),o=n?P(n,e.datetime,mt(t)):t.defaultValue||"";return{updateOn:s,inputFormat:e.datetime,viewDate:a,selectedDate:n,viewTimestamp:n||a,inputValue:o,open:t.open}}function lt(t){return t.date.match(/[lLD]/)?"days":-1!==t.date.indexOf("M")?"months":-1!==t.date.indexOf("Y")?"years":"days"}function pt(t){var e={date:t.dateFormat||"",time:t.timeFormat||""};return!0===e.date?e.date="MM/DD/YYYY":"days"!==lt(e)&&(e.time=""),!0===e.time&&(e.time="h:mm A"),e.datetime=e.date&&e.time?e.date+" "+e.time:e.date||e.time,e}function mt(t){return{locale:t.locale}}var ct=function(t){function e(e){var n=this;t.call(this,e),this.show=function(t){return function(){n.state.currentView!==t&&n.props.onViewModeChange(t),n.setState({currentView:t})}},this.shift=function(t,e,a){return function(){var s="sub"===t?-1:1,o=n.state.viewDate;"sub"===t?n.props.onNavigateBack(e,a):n.props.onNavigateForward(e,a),n.setState({viewDate:"months"===a?M(o,e*s):T(o,e*s)})}},this.setTime=function(t){n.setState({selectedDate:t,viewDate:t,viewTimestamp:t,inputValue:P(t,n.state.inputFormat,mt(n.props))})},this.setViewTimestamp=function(t){n.setState({viewTimestamp:t})},this.setDate=function(t,e,a){return void 0===a&&(a=!1),function(){if(n.state.updateOn===t){var s=a&&n.props.closeOnSelect,o=it[t],r=n.state,i=r.selectedDate||r.viewDate,d=dt(P(e,"YYYY"+o.sel)+P(i,o.rest+" HH:mm:ss.SSS"));if(void 0!==n.props.value)n.props.onChange(d);else{var u=!s;u||n.props.onBlur(d),n.setState({selectedDate:d,viewDate:d,inputValue:P(d,n.state.inputFormat,mt(n.props)),open:u})}s&&n.closeCalendar()}else{var l=rt[t];n.setState({viewDate:e,currentView:l}),n.props.onViewModeChange(l)}}},this.state=function(t){var e=ut(t);return void 0===e.open&&(e.open=!t.input),e.currentView=t.dateFormat?t.viewMode||e.updateOn:"time",e}(e),this.onInputChange=this.onInputChange.bind(this),this.onInputKey=this.onInputKey.bind(this),this.show=this.show.bind(this),this.setDate=this.setDate.bind(this),this.shift=this.shift.bind(this),this.setTime=this.setTime.bind(this),this.setViewTimestamp=this.setViewTimestamp.bind(this),this.openCalendar=this.openCalendar.bind(this),this.closeCalendar=this.closeCalendar.bind(this),this.handleClickOutside=this.handleClickOutside.bind(this),this.getComponentProps=this.getComponentProps.bind(this)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.componentDidUpdate=function(t,e){var n=e.selectedDate||e.inputValue,a=this.state.selectedDate||this.state.inputValue;(n instanceof Date&&a instanceof Date?Y(n,a):n===a)||"function"!=typeof this.props.onChange||this.props.onChange(a)},e.prototype.UNSAFE_componentWillReceiveProps=function(t){var e=pt(t),n=ut(t),a=mt(t);if(t.viewMode!==this.props.viewMode&&(n.currentView=t.viewMode),void 0===n.open&&this.props.closeOnSelect&&(n.currentView?"time"!==n.currentView:"time"!==this.state.currentView)&&(n.open=!1),t.locale!==this.props.locale&&(n.locale=t.locale,this.state.selectedDate&&(n.inputValue=P(this.state.selectedDate,e.datetime,a))),t.utc!==this.props.utc){var s=t.utc?nt:at;n.viewDate=s(this.state.viewDate),this.state.selectedDate&&(n.selectedDate=s(this.state.selectedDate),n.inputValue=P(n.selectedDate,e.datetime,a))}t.viewDate!==this.props.viewDate&&(n.viewDate=dt(t.viewDate)),void 0===n.open&&delete n.open,this.setState(n)},e.prototype.onInputChange=function(t){var e=t.target.value,n=dt(e),a={inputValue:e};n&&!this.props.value?(a.selectedDate=n,a.viewDate=n):a.selectedDate=null,this.setState(a),void 0!==this.props.value&&"function"==typeof this.props.onChange&&this.props.onChange(n)},e.prototype.onInputKey=function(t){9===t.which&&this.props.closeOnTab&&this.closeCalendar()},e.prototype.openCalendar=function(t){var e=this;this.state.open||this.setState({open:!0},function(){e.props.onFocus(t)})},e.prototype.closeCalendar=function(){var t=this;this.setState({open:!1},function(){t.props.onBlur(t.state.selectedDate||t.state.inputValue)})},e.prototype.handleClickOutside=function(){this.props.input&&this.state.open&&!this.props.open&&!this.props.disableOnClickOutside&&this.closeCalendar()},e.prototype.getComponentProps=function(){var t=this,e=pt(this.props),n={formatOptions:mt(this.props),dateFormat:e.date,timeFormat:e.time};return ot.fromProps.forEach(function(e){n[e]=t.props[e]}),ot.fromState.forEach(function(e){n[e]=t.state[e]}),ot.fromThis.forEach(function(e){n[e]=t[e]}),n},e.prototype.render=function(){var t=this,e=Object.assign({},{type:"text",className:"form-control",onClick:this.openCalendar,onFocus:this.openCalendar,onChange:this.onInputChange,onKeyDown:this.onInputKey,value:this.state.inputValue},this.props.inputProps),n=v(st,{view:this.state.currentView,viewProps:this.getComponentProps(),onClickOutside:this.handleClickOutside});return v("div",{className:F(["rdt",this.props.className,{rdtStatic:!this.props.input,rdtOpen:this.state.open}])},this.props.input?v(x,null,v(I,null,function(n){var a=n.ref;return t.props.renderInput?v("div",{ref:a,key:"i"},t.props.renderInput(e,t.openCalendar,t.closeCalendar)):v("input",Object.assign({ref:a},e,{key:"i"}))}),this.state.open&&v(A,{placement:"bottom-start",modifiers:{preventOverflow:{enabled:!0,boundariesElement:"window"}}},function(t){return v("div",{ref:t.ref,style:t.style,"data-placement":t.placement,className:"rdtPicker"},n)})):v("div",{className:"rdtPicker"},n))},e}(w);ct.defaultProps={className:"",defaultValue:"",viewDate:void 0,inputProps:{},input:!0,onFocus:Z,onBlur:Z,onChange:Z,onViewModeChange:Z,onNavigateBack:Z,onNavigateForward:Z,timeFormat:!0,timeConstraints:{},dateFormat:!0,closeOnSelect:!0,closeOnTab:!0,utc:!1};export default ct;export{st as CalendarContainer};
//# sourceMappingURL=index.esm.js.map
