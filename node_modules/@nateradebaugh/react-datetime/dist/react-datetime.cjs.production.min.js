"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var t=require("react"),n=e(require("classcat")),r=e(require("@reach/popover")),a=e(require("use-onclickoutside")),i=e(require("date-fns/format")),s=e(require("date-fns/parse")),o=e(require("date-fns/isEqual")),c=e(require("date-fns/toDate")),l=e(require("date-fns/isValid")),u=e(require("date-fns/startOfDay")),d=e(require("date-fns/getHours")),m=e(require("date-fns/addHours")),f=e(require("date-fns/addMinutes")),v=e(require("date-fns/addSeconds")),y=e(require("date-fns/addMilliseconds")),p=e(require("date-fns/setHours")),E=e(require("date-fns/addDays")),h=e(require("date-fns/differenceInDays")),D=e(require("date-fns/startOfWeek")),w=e(require("date-fns/startOfMonth")),q=e(require("date-fns/endOfMonth")),g=e(require("date-fns/isSameDay")),b=e(require("date-fns/isBefore")),N=e(require("date-fns/addMonths")),k=e(require("date-fns/getDate")),C=e(require("date-fns/addYears")),S=e(require("date-fns/isSameMonth")),O=e(require("date-fns/setMonth")),M=e(require("date-fns/getDaysInMonth")),x=e(require("date-fns/setDate")),V=e(require("date-fns/getYear")),L=e(require("date-fns/setYear")),T=e(require("date-fns/getDaysInYear")),F=e(require("date-fns/setDayOfYear"));function j(){return(j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function P(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t.indexOf(n=i[r])>=0||(a[n]=e[n]);return a}var Y,H,A,B=["hours","minutes","seconds","milliseconds"],I={hours:{min:0,max:23,step:1},minutes:{min:0,max:59,step:1},seconds:{min:0,max:59,step:1},milliseconds:{min:0,max:999,step:1}},U=function(e){var n=e.onUp,r=e.onDown,a=e.value;return null!=a?t.createElement(t.Fragment,null,e.showPrefix&&t.createElement("div",{className:"rdtCounterSeparator"},":"),t.createElement("div",{className:"rdtCounter"},t.createElement("span",{className:"rdtBtn",onMouseDown:n},"▲"),t.createElement("div",{className:"rdtCount"},a),t.createElement("span",{className:"rdtBtn",onMouseDown:r},"▼"))):null};function R(e,t,n,r){var a="sub"===e?-1:1,i=function(e,t){var n=I[e].step,r=t?t[e]:void 0;return r&&r.step&&(n=r.step),n}(t,r)*a;return"hours"===t?m(n,i):"minutes"===t?f(n,i):"seconds"===t?v(n,i):y(n,i)}function K(e,t,n,r){var a="string"==typeof n?n:"";function s(e,t){return-1!==e.indexOf(t)}var o=s(a.toLowerCase(),"h"),c=s(a,"m"),l=s(a,"s"),u=s(a,"S"),d=s(a,"a"),m="hours"===e&&o?d?"h":"H":"minutes"===e&&c?"mm":"seconds"===e&&l?"ss":"milliseconds"===e&&u?"SSS":"daypart"===e&&d?"a":void 0;if(m)return i(t,m,r)}function W(e,t){return function(){var n=d(e);t(p(e,n>=12?n-12:n+12))}}function z(e,t,n){return function(){var r=n.readonly,a=n.viewTimestamp,i=void 0===a?new Date:a,s=n.timeConstraints,o=n.setViewTimestamp,c=n.setSelectedDate;if(!r){var l=R(e,t,i,s);o(l),Y=setTimeout(function(){H=setInterval(function(){l=R(e,t,l,s),o(l)},70)},500),A=function(){clearTimeout(Y),clearInterval(H),c(l),document.body.removeEventListener("mouseup",A),document.body.removeEventListener("touchend",A)},document.body.addEventListener("mouseup",A),document.body.addEventListener("touchend",A)}}}function G(e){var n=e.viewTimestamp,r=void 0===n?new Date:n,a=e.dateFormat,s=void 0!==a&&a,o=e.setViewMode,c=e.timeFormat,l=e.formatOptions,u=e.setSelectedDate,d=0;return t.createElement("div",{className:"rdtTime"},t.createElement("table",null,s?t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",{className:"rdtSwitch",colSpan:4,onClick:function(){return o("days")}},i(r,s)))):null,t.createElement("tbody",null,t.createElement("tr",null,t.createElement("td",null,t.createElement("div",{className:"rdtCounters"},B.map(function(n){var a=K(n,r,c,l);return a&&d++,t.createElement(U,{key:n,showPrefix:d>1,onUp:z("add",n,e),onDown:z("sub",n,e),value:a})}),t.createElement(U,{onUp:W(r,u),onDown:W(r,u),value:K("daypart",r,c,l)})))))))}function J(e){var r=e.timeFormat,a=void 0!==r&&r,s=e.viewDate,o=void 0===s?new Date:s,c=e.setViewDate,l=e.selectedDate,u=e.setSelectedDate,d=e.formatOptions,m=e.setViewMode,f=e.isValidDate,v=D(o),y=N(o,-1),p=h(D(q(y)),o),C=E(o,p);return t.createElement("div",{className:"rdtDays"},t.createElement("table",null,t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",{className:"rdtPrev",onClick:function(){return c(N(o,-1))}},t.createElement("span",null,"‹")),t.createElement("th",{className:"rdtSwitch",onClick:function(){return m("months")},colSpan:5},i(o,"LLLL yyyy",d)),t.createElement("th",{className:"rdtNext",onClick:function(){return c(N(o,1))}},t.createElement("span",null,"›"))),t.createElement("tr",null,[0,1,2,3,4,5,6].map(function(e){return t.createElement("th",{key:e,className:"dow"},i(E(v,e),"iiiiii",d))}))),t.createElement("tbody",null,[0,1,2,3,4,5].map(function(e){var r=7*e;return t.createElement("tr",{key:i(E(C,r),"yyyy-MM-dd'T'HH:mm:ss.SSSxxx")},[0,1,2,3,4,5,6].map(function(e){var a=E(C,e+r),s="function"==typeof f&&!f(a);return t.createElement("td",{key:k(a),className:n(["rdtDay",{rdtOld:b(a,w(o)),rdtNew:b(q(o),a),rdtActive:l&&g(a,l),rdtToday:g(a,new Date),rdtDisabled:s}]),onClick:function(){s||u(a)}},i(a,"d",d))}))})),"string"==typeof a&&a.trim()&&t.createElement("tfoot",null,t.createElement("tr",null,t.createElement("td",{onClick:function(){return m("time")},colSpan:7,className:"rdtTimeToggle"},i(o,a,d))))))}function Q(e){var r=e.viewDate,a=void 0===r?new Date:r,s=e.setViewDate,o=e.selectedDate,c=e.setSelectedDate,l=e.formatOptions,u=e.setViewMode,d=e.isValidDate;return t.createElement("div",{className:"rdtMonths"},t.createElement("table",null,t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",{className:"rdtPrev",onClick:function(){return s(C(a,-1))}},t.createElement("span",null,"‹")),t.createElement("th",{className:"rdtSwitch",onClick:function(){return u("years")},colSpan:2},i(a,"yyyy",l)),t.createElement("th",{className:"rdtNext",onClick:function(){return s(C(a,1))}},t.createElement("span",null,"›"))))),t.createElement("table",null,t.createElement("tbody",null,[0,1,2].map(function(e){var r=4*e;return t.createElement("tr",{key:r},[0,1,2,3].map(function(e){var s=e+r,u=O(a,s),m=Array.from({length:M(u)},function(e,t){return x(u,t+1)}).every(function(e){return"function"==typeof d&&!d(e)}),f=O(new Date,s);return t.createElement("td",{key:s,className:n(["rdtMonth",{rdtDisabled:m,rdtActive:o&&S(o,u)}]),onClick:function(){m||c(O(a,s))}},i(f,"LLL",l))}))}))))}function X(e){var r=e.viewDate,a=void 0===r?new Date:r,s=e.setViewDate,o=e.selectedDate,c=e.setSelectedDate,l=e.formatOptions,u=e.setViewMode,d=e.isValidDate,m=10*Math.floor(V(a)/10);return t.createElement("div",{className:"rdtYears"},t.createElement("table",null,t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",{className:"rdtPrev",onClick:function(){return s(C(a,-10))}},t.createElement("span",null,"‹")),t.createElement("th",{className:"rdtSwitch",onClick:function(){return u("years")},colSpan:2},m,"-",m+9),t.createElement("th",{className:"rdtNext",onClick:function(){return s(C(a,10))}},t.createElement("span",null,"›"))))),t.createElement("table",null,t.createElement("tbody",null,[0,1,2].map(function(e){var r=m-1+4*e;return t.createElement("tr",{key:r},[0,1,2,3].map(function(e){var s=e+r,u=L(a,s),m=Array.from({length:T(a)},function(e,t){return F(u,t+1)}).every(function(e){return"function"==typeof d&&!d(e)});return t.createElement("td",{key:s,className:n(["rdtYear",{rdtDisabled:m,rdtActive:o&&V(o)===s}]),onClick:function(){m||c(L(a,s))}},i(u,"yyyy",l))}))}))))}function Z(e){var n=e.viewMode,r=P(e,["viewMode"]);switch(n){case"time":return t.createElement(G,Object.assign({},r));case"days":return t.createElement(J,Object.assign({},r));case"months":return t.createElement(Q,Object.assign({},r));case"years":return t.createElement(X,Object.assign({},r))}throw new Error("Unsupported view mode.")}var $=t.useRef,_=t.useState,ee=t.useEffect,te=t.useCallback;function ne(e,t){void 0===t&&(t=!0);var n,r,a=_(void 0),i=a[1],s=a[0]||e,o=t?(r=c(n=e))&&l(r)?r.getTime():n:e;return ee(function(){i(void 0)},[o]),[s,i]}function re(e,t,n){if("string"==typeof e){var r=s(e,t,new Date,n);if(l(r)&&e===i(r,t,n))return r}else if(e){var a=c(e);if(l(a))return a}}var ae={days:"days",months:"days",years:"months"};exports.default=function(e){var s=e.isValidDate,l=e.dateTypeMode,d=e.value,m=e.onChange,f=e.onBlur,v=e.onFocus,y=e.dateFormat,p=void 0===y||y,E=e.timeFormat,h=void 0===E||E,D=e.locale,w=P(e,["isValidDate","dateTypeMode","value","onChange","onBlur","onFocus","dateFormat","timeFormat","locale"]),q=!0===p?"LL/dd/yyyy":p,g=!0===h?"h:mm a":h,b=q&&g?q+" "+g:q||g||"",N={locale:D},k=re(d,b,N),C="string"==typeof l?"utc-ms-timestamp"===l.toLowerCase()?"utc-ms-timestamp":"input-format"===l.toLowerCase()?"input-format":"Date":d&&"number"==typeof d?"utc-ms-timestamp":"Date",S=te(function(e){if("string"==typeof e)return e;if(!e)return e;switch(C){case"utc-ms-timestamp":return e.getTime();case"input-format":return i(e,b,N)}return e},[C,N,b]),O=te(function(e){if("function"==typeof m){var t=S(e);d instanceof Date&&t instanceof Date&&o(d,t)||d!==t&&m(t)}},[S,m,d]),M=ne(k||u(new Date)),x=M[0],V=M[1],L=function(e,t){if("string"==typeof e&&e){if(e.match(/[d]/))return"days";if(-1!==e.indexOf("L"))return"months";if(-1!==e.indexOf("y"))return"years"}if("string"==typeof t&&t)return"time"}(q,g),T=ne(L,!1),F=T[0],Y=T[1],H=ne(k||x),A=H[0],B=H[1],I=_(!1),U=I[0],R=I[1];function K(){F&&(R(!0),"function"==typeof v&&v())}function W(e){if(R(!1),"function"==typeof f){var t=S(e);f(t)}}function z(){return W(k)}function G(e,t){void 0===t&&(t=!0);var n=c(e);V(n),B(n),"time"===F?O(e):F===L?(O(e),t&&W(e)):Y(F?ae[F]:void 0)}ee(function(){k&&G(k)},[C,b]);var J=$(null),Q=$(null);a(Q,z);var X=j({},w,{type:"text",onClick:K,onFocus:K,onChange:function(e){var t=e.target.value,n=re(t,b,N);n?G(n,!1):O(t)},onKeyDown:function(e){if(U)switch(e.which){case 13:case 27:case 9:z()}else switch(e.which){case 40:K()}},value:k&&b?i(k,b,N):"string"==typeof d?d:""}),ie={dateFormat:q,timeFormat:g,viewDate:x,setViewDate:V,selectedDate:k,setSelectedDate:G,viewTimestamp:A,setViewTimestamp:B,formatOptions:N,viewMode:F,setViewMode:Y,isValidDate:s};return t.createElement("div",{className:n(["rdt",{rdtOpen:U}])},t.createElement("input",Object.assign({ref:J,key:"i"},X)),U&&t.createElement(r,{targetRef:J},t.createElement("div",{ref:Q,className:"rdtPicker"},t.createElement(Z,Object.assign({},ie)))))};
//# sourceMappingURL=react-datetime.cjs.production.min.js.map
